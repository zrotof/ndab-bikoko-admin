"use strict";(self.webpackChunkforyou_admin=self.webpackChunkforyou_admin||[]).push([[223],{3223:(K,g,l)=>{l.r(g),l.d(g,{ReplayModule:()=>$});var d=l(6895),c=l(298),s=l(805),w=l(5849),e=l(8256),u=l(2249),L=l(2526),h=l(2435);function U(i,r){1&i&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2,"Aucun replay n'a encore \xe9t\xe9 enregistr\xe9 pour le moment."),e.qZA(),e.BQk())}function I(i,r){1&i&&(e.TgZ(0,"tr"),e._UZ(1,"th")(2,"th"),e.TgZ(3,"th"),e._uU(4,"Titre"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Activ\xe9e?"),e.qZA(),e.TgZ(7,"th",7),e._uU(8,"Actions"),e.qZA()())}function S(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",16)(1,"i",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(3);return e.KtG(o.editReplayEventTrigger(a.id))}),e.qZA(),e.TgZ(2,"i",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(3);return e.KtG(o.deleteReplayEventTrigger(a.id))}),e.qZA()()}}function k(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr",8),e._UZ(1,"td",9),e.TgZ(2,"td"),e._UZ(3,"span",10),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"div",11),e.qZA(),e.TgZ(8,"td",12)(9,"i",13),e.NdJ("click",function(a){e.CHM(t);const o=e.MAs(11);return e.KtG(o.toggle(a))}),e.qZA(),e.TgZ(10,"p-overlayPanel",null,14),e.YNc(12,S,3,0,"ng-template",15),e.qZA()()()}if(2&i){const t=r.$implicit;e.Q6J("pReorderableRow",r.rowIndex),e.xp6(5),e.Oqu(t.title),e.xp6(2),e.Q6J("ngClass",!0===t.isActive?"active-replay":"")}}function O(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p-table",4),e.NdJ("onRowReorder",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onRowReorder())}),e.YNc(1,I,9,0,"ng-template",5),e.YNc(2,k,13,3,"ng-template",6),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("value",t.currentReplayList)}}function F(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",1),e.YNc(2,U,3,0,"ng-container",2),e.YNc(3,O,3,1,"ng-template",null,3,e.W1O),e.qZA(),e.BQk()),2&i){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Q6J("ngIf",0==(null==n.currentReplayList?null:n.currentReplayList.length))("ngIfElse",t)}}let N=(()=>{class i{constructor(){this.editReplayTypeEvent=new e.vpe,this.deleteReplayEvent=new e.vpe,this.itemsOrderChangedEvent=new e.vpe}onRowReorder(){this.itemsOrderChangedEvent.emit({firstList:this._firstreplayList,currentList:this.currentReplayList})}editReplayEventTrigger(t){this.editReplayTypeEvent.emit(t)}deleteReplayEventTrigger(t){this.deleteReplayEvent.emit(t)}ngOnChanges(t){t.currentReplayList.currentValue&&(this._firstreplayList=[...this.currentReplayList])}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-replay-list"]],inputs:{currentReplayList:"currentReplayList"},outputs:{editReplayTypeEvent:"editReplayTypeEvent",deleteReplayEvent:"deleteReplayEvent",itemsOrderChangedEvent:"itemsOrderChangedEvent"},standalone:!0,features:[e._Bn([s.ez,s.YP]),e.TTD,e.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[1,"replay-list"],[4,"ngIf","ngIfElse"],["tableau",""],["responsiveLayout","scroll",3,"value","onRowReorder"],["pTemplate","header"],["pTemplate","body"],[1,"last-column"],[3,"pReorderableRow"],["pReorderableRowHandle","",1,"row-reorder-handler"],[1,"pi","pi-align-justify"],[1,"default-state",3,"ngClass"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["op",""],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(t,n){1&t&&e.YNc(0,F,5,2,"ng-container",0),2&t&&e.Q6J("ngIf",n.currentReplayList)},dependencies:[d.O5,u.U$,u.iA,s.jx,u.Mv,u.qO,L.U8,h.y,h.T,d.mk],styles:[".replay-list{display:flex;flex-direction:column}.replay-list p-table{width:100%;margin:auto;box-shadow:#00000029 0 1px 4px}.replay-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr{position:relative;transition:all .8s ease-in-out}.replay-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr .row-reorder-handler{position:absolute;top:0;left:0;width:100%;height:100%}.replay-list .last-column{text-align:right}.replay-list .default-state{height:15px;width:15px;border-radius:50%;background-color:#cbcbcb}.replay-list .active-replay{background-color:green}.replay-list .row-actions{text-align:right;position:relative}.replay-list .row-actions i{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.replay-list .row-actions i:hover{border:1.5px solid #191922}.replay-list .p-datatable .p-datatable-tbody>tr>td{padding:.5rem 1rem!important}.row-actions-event{display:flex;flex-direction:column}.row-actions-event i{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event .pi-trash{color:red;border:1px solid red}.row-actions-event .pi-trash:hover{color:#fff;background-color:red}.row-actions-event .pi-pencil{color:green;border:1px solid green}.row-actions-event .pi-pencil:hover{color:#fff;background-color:green}.p-overlaypanel .p-overlaypanel-content{padding:7px}@media all and (max-width: 990px){.replay-list p-table{width:100%}}\n"],encapsulation:2}),i})();var y=l(2453),f=l(2137),v=l(529),Y=l(1135),_=l(4004),R=l(2340);let b=(()=>{class i{constructor(t){this.http=t,this.addOrEdit$=new Y.X(!0),this.baseUrlReplays=R.N.baseUrl+"replays/",this.baseUrlYoutubeApi=R.N.baseUrl+"youtube/",this.httpOptions={headers:new v.WM({"Content-Type":"application/json"})}}getReplaysList(){return this.http.get(this.baseUrlReplays).pipe((0,_.U)(({data:n})=>n))}getReplayById(t){return this.http.get(this.baseUrlReplays+`${t}`)}addReplay(t){return this.http.post(this.baseUrlReplays,t,this.httpOptions)}editReplay(t,n){return this.http.put(this.baseUrlReplays+`${t}`,n)}deleteReplay(t){return this.http.delete(this.baseUrlReplays+`${t}`)}getVideoListByReplayId(t){return this.http.get(this.baseUrlYoutubeApi+`playlists/${t}/videos`)}getListOfReplaysOnYoutube(){return this.http.get(this.baseUrlYoutubeApi+"playlists/")}updateReplayListOrder(t){return this.http.put(this.baseUrlReplays+"update-replay-list-order",t).pipe((0,_.U)(({message:o})=>o))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(v.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=l(5174);function B(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.setNewItemsOrder())}),e._UZ(2,"i",11),e._uU(3," Sauvegarder l'odre "),e.qZA(),e.BQk()}}const J=function(){return{width:"50vw"}},D=function(){return{"960px":"75vw","640px":"100vw"}};let q=(()=>{class i{constructor(t,n,a,o,m){this.replayService=t,this.messageService=n,this.confirmationService=a,this.reorderUtils=o,this.router=m,this.areThereNewOrderToSave=!1,this.subscriptions=[]}ngOnInit(){this.getReplaysList()}getReplaysList(){this.replaysList$=this.replayService.getReplaysList()}onReOrderDetect(t){this.firstOrderedReplayList=t.firstList,this.currentOrderedReplayList=t.currentList,this.areThereNewOrderToSave=this.reorderUtils.areArraysEquals(this.firstOrderedReplayList,this.currentOrderedReplayList)}onEditReplayByIdDetect(t){const n=t;this.subscriptions.push(this.replayService.getReplayById(n).subscribe({next:()=>{this.router.navigate([`replays/modifier/${n}`],{queryParamsHandling:"preserve"})},error:a=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}}))}onDeleteReplayByIdDetect(t){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer ce type de Replay?",accept:()=>{this.subscriptions.push(this.replayService.deleteReplay(t).subscribe({next:a=>{this.getReplaysList(),this.messageService.add({severity:"success",detail:a.message})},error:a=>{this.messageService.add({severity:"error",detail:"Erreur syst\xe8me: faire appel au webmaster"})}}))},reject:n=>{n===s.wB.REJECT&&this.messageService.add({severity:"info",detail:"Suppression annul\xe9e"})}})}setNewItemsOrder(){const t=this.reorderUtils.findDifferentIdsAndIndices(this.firstOrderedReplayList,this.currentOrderedReplayList);this.replayService.updateReplayListOrder(t).subscribe({next:n=>{this.messageService.add({severity:"success",detail:n})},error:n=>{this.messageService.add({severity:"error",detail:n})},complete:()=>{this.areThereNewOrderToSave=!1,this.getReplaysList()}})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(s.ez),e.Y36(s.YP),e.Y36(M.N),e.Y36(c.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-replay-list-container"]],standalone:!0,features:[e._Bn([s.ez,s.YP,w.xA]),e.jDz],decls:14,vars:9,consts:[[1,"replay-list-container"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","button","routerLink","/replays/creer",1,"add"],[1,"pi","pi-plus"],[4,"ngIf"],[3,"currentReplayList","itemsOrderChangedEvent","editReplayTypeEvent","deleteReplayEvent"],["styleClass","delete-message","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],["type","button",1,"save",3,"click"],[1,"pi","pi-save"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Replays Cr\xe9\xe9s "),e.qZA(),e.TgZ(3,"p",2),e._uU(4,"Liste de tous les replays"),e.qZA(),e.TgZ(5,"div",3)(6,"button",4),e._UZ(7,"i",5),e._uU(8," Cr\xe9er replay "),e.qZA(),e.YNc(9,B,4,0,"ng-container",6),e.qZA(),e.TgZ(10,"app-replay-list",7),e.NdJ("itemsOrderChangedEvent",function(o){return n.onReOrderDetect(o)})("editReplayTypeEvent",function(o){return n.onEditReplayByIdDetect(o)})("deleteReplayEvent",function(o){return n.onDeleteReplayByIdDetect(o)}),e.ALo(11,"async"),e.qZA(),e._UZ(12,"p-confirmDialog",8)(13,"p-toast",9),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngIf",n.areThereNewOrderToSave),e.xp6(1),e.Q6J("currentReplayList",e.lcZ(11,5,n.replaysList$)),e.xp6(2),e.Akn(e.DdM(7,J)),e.Q6J("breakpoints",e.DdM(8,D)))},dependencies:[c.rH,d.Ov,d.O5,N,y.EV,y.FN,f.D,f.Q],styles:[".replay-list-container{display:flex;flex-direction:column}.replay-list-container .actions{padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px;display:flex;justify-content:space-between}.replay-list-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff}.replay-list-container .actions button:hover{background-color:green;color:#fff}.replay-list-container .actions button i{margin-right:5px}.replay-list-container .actions .add{border:solid green;color:green}.replay-list-container .actions .add:hover{background-color:green}.replay-list-container .actions .save{border:solid blue;color:#00f}.replay-list-container .actions .save:hover{background-color:#00f}\n"],encapsulation:2}),i})();var p=l(433),x=l(9808),C=l(7976),E=l(2210),T=l(1740),A=l(7913);function z(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"h1",10),e._uU(2,"Cr\xe9er Un Replay "),e.qZA(),e.TgZ(3,"p",11),e._uU(4,"Cr\xe9ation d'une nouvelle rubrique de replay \xe0 partir de playlists cr\xe9\xe9es sur Youtube"),e.qZA(),e.TgZ(5,"div",12)(6,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSaveReplay())}),e._UZ(7,"i",14),e._uU(8," Ajouter "),e.qZA(),e.TgZ(9,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancelAddEditReplay())}),e._UZ(10,"i",16),e._uU(11," Annuler "),e.qZA()(),e.BQk()}}function Q(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"h1",10),e._uU(1,"Modifier Un Replay"),e.qZA(),e.TgZ(2,"p",11),e._uU(3,"Modification d'une playlist"),e.qZA(),e.TgZ(4,"div",12)(5,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onEditReplay())}),e._UZ(6,"i",17),e._uU(7," Modifier "),e.qZA(),e.TgZ(8,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancelAddEditReplay())}),e._UZ(9,"i",16),e._uU(10," Annuler "),e.qZA()()}}function j(i,r){1&i&&(e.TgZ(0,"div",5)(1,"label"),e._uU(2,"Activer?"),e.qZA(),e._UZ(3,"p-inputSwitch",18),e.qZA())}function W(i,r){1&i&&(e.TgZ(0,"small",19),e._uU(1,"Renseigner le titre de la playlist"),e.qZA())}function H(i,r){1&i&&(e.TgZ(0,"small",19),e._uU(1,"S\xe9lectionnez une playlist"),e.qZA())}let Z=(()=>{class i{constructor(t,n,a,o,m){this.fb=t,this.replayService=n,this.messageService=a,this.location=o,this.activatedRoute=m,this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1}ngOnInit(){this.initForm(),this.getAllYoutubeChannelPlaylist()}initForm(){this.replayForm=this.fb.group({title:["",p.kI.required],playlistId:["",p.kI.required],isActive:[!1]})}get formControls(){return this.replayForm.controls}checkEditMode(){this.activatedRoute.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.replayService.getReplayById(t.id).subscribe(n=>{if("success"===n.status){this.initialReplayDataWhenEdit=n.data,this.replayForm.controls.title.setValue(this.initialReplayDataWhenEdit.title),this.replayForm.controls.isActive.setValue(this.initialReplayDataWhenEdit.isActive);const a=this.youtubePlaylists.findIndex(o=>o.id==this.initialReplayDataWhenEdit.playlistId);this.replayForm.controls.playlistId.setValue(this.youtubePlaylists[a])}},()=>{this.messageService.add({severity:"warn",detail:"Replay inexistant, contactez le webmaster"})}))},()=>{this.messageService.add({severity:"warn",detail:"Replay inconnue"})})}getAllYoutubeChannelPlaylist(){this.replayService.getListOfReplaysOnYoutube().subscribe(t=>{this.youtubePlaylists=t.message,this.checkEditMode()})}onCancelAddEditReplay(){this.location.back()}onSaveReplay(){if(this.isSaveButtonClicked=!0,this.replayForm.invalid)return;const t={title:this.replayForm.get("title")?.value,playlistId:this.replayForm.get("playlistId")?.value.id,isActive:this.replayForm.get("isActive")?.value};this.replayService.addReplay(t).subscribe(n=>{this.messageService.add({severity:"success",detail:n.message}),(0,x.n)((0,C.H)(2e3)).then(()=>{this.location.back()})})}onEditReplay(){if(this.isEditButtonClicked=!0,this.replayForm.controls.title.value===this.initialReplayDataWhenEdit.title&&this.replayForm.controls.playlistId.value.id===this.initialReplayDataWhenEdit.playlistId&&this.replayForm.controls.isActive.value===this.initialReplayDataWhenEdit.isActive)return void this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xe9e"});let t={};this.replayForm.controls.title.value!==this.initialReplayDataWhenEdit.title&&(t={...t,title:this.replayForm.controls.title.value}),this.replayForm.controls.playlistId.value.id!==this.initialReplayDataWhenEdit.playlistId&&(t={...t,playlistId:this.replayForm.controls.playlistId.value.id}),this.replayForm.controls.isActive.value!==this.initialReplayDataWhenEdit.isActive&&(t={...t,isActive:this.replayForm.controls.isActive.value}),this.replayService.editReplay(this.initialReplayDataWhenEdit.id,t).subscribe(n=>{"success"===n.status&&(this.messageService.add({severity:"success",detail:n.message}),(0,x.n)((0,C.H)(2e3)).then(()=>{this.location.back()}))},()=>{this.messageService.add({severity:"info",detail:"Programme inconnue"})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.qu),e.Y36(b),e.Y36(s.ez),e.Y36(d.Ye),e.Y36(c.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-replay-add-edit-container"]],standalone:!0,features:[e._Bn([s.ez]),e.jDz],decls:17,vars:9,consts:[[1,"add-edit-replay-container"],[4,"ngIf","ngIfElse"],["editMode",""],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["type","text","pInputText","","formControlName","title"],["class","p-error",4,"ngIf"],["formControlName","playlistId","placeholder","S\xe9lectionnez une playlist","filterBy","title","optionLabel","title",3,"options","filter","showClear"],["position","top-right"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],["type","button",1,"cancel",3,"click"],[1,"pi","pi-times"],[1,"pi","pi-pencil"],["formControlName","isActive"],[1,"p-error"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,z,12,0,"ng-container",1),e.YNc(2,Q,11,0,"ng-template",null,2,e.W1O),e.TgZ(4,"form",3),e.YNc(5,j,4,0,"div",4),e.TgZ(6,"div",5)(7,"label"),e._uU(8,"Titre de la replay"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,W,2,0,"small",7),e.qZA(),e.TgZ(11,"div",5)(12,"label"),e._uU(13,"Playlist sur youtube"),e.qZA(),e._UZ(14,"p-dropdown",8),e.YNc(15,H,2,0,"small",7),e.qZA()(),e._UZ(16,"p-toast",9),e.qZA()),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!n.isEditMode)("ngIfElse",a),e.xp6(3),e.Q6J("formGroup",n.replayForm),e.xp6(1),e.Q6J("ngIf",n.isEditMode),e.xp6(5),e.Q6J("ngIf",n.formControls.title.invalid&&(n.isSaveButtonClicked||n.isEditButtonClicked)),e.xp6(4),e.Q6J("options",n.youtubePlaylists)("filter",!0)("showClear",!0),e.xp6(1),e.Q6J("ngIf",n.formControls.playlistId.invalid&&(n.isSaveButtonClicked||n.isEditButtonClicked))}},dependencies:[d.O5,p.UX,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,E.kW,E.Lt,y.EV,y.FN,T.j,T.o,A.Iu,A.Ql],styles:[".add-edit-replay-container{display:flex;flex-direction:column;min-height:100vh}.add-edit-replay-container .actions{display:flex;justify-content:flex-end;padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px}.add-edit-replay-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;margin-left:10px}.add-edit-replay-container .actions button i{margin-right:5px}.add-edit-replay-container .actions .add{border:solid var(--project-primary-color);color:var(--project-primary-color)}.add-edit-replay-container .actions .add:hover{color:#fff;background-color:var(--project-primary-color)}.add-edit-replay-container .actions .cancel{border:solid gray;color:gray}.add-edit-replay-container .actions .cancel:hover{color:#fff;background-color:gray}.add-edit-replay-container form{display:flex;flex-direction:column;width:500px;border-radius:7px;margin:0 auto;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.add-edit-replay-container form .field{display:flex;flex-direction:column;margin-bottom:20px;flex:1}.add-edit-replay-container form .field label{margin-bottom:7px}.add-edit-replay-container form .field small{margin:10px 0 0}.add-edit-replay-container form .field p-dropdown{width:100%}.add-edit-replay-container form .field p-dropdown .p-dropdown{width:100%}@media all and (max-width: 990px){.add-replay form{width:100%}}@media all and (max-width: 990px){.add-replay form{padding:20px}}\n"],encapsulation:2}),i})();const P=[{path:"",component:q},{path:"creer",component:Z},{path:"modifier/:id",component:Z}];let G=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(P),c.Bz]}),i})(),$=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,G]}),i})()}}]);