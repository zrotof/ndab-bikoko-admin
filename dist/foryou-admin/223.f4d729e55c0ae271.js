"use strict";(self.webpackChunkforyou_admin=self.webpackChunkforyou_admin||[]).push([[223],{3223:(H,g,l)=>{l.r(g),l.d(g,{ReplayModule:()=>W});var c=l(6895),d=l(298),s=l(805),e=l(8256),m=l(2249),Z=l(2526),f=l(2137),u=l(2453),h=l(2435),_=l(529),O=l(1135),E=l(4004),P=l(8505),v=l(2340);let y=(()=>{class n{constructor(t){this.http=t,this.addOrEdit$=new O.X(!0),this.baseUrlReplays=v.N.baseUrl+"replays/",this.baseUrlYoutubeApi=v.N.baseUrl+"youtube/",this.httpOptions={headers:new _.WM({"Content-Type":"application/json"})}}getReplaysList(){return this.http.get(this.baseUrlReplays).pipe((0,E.U)(({data:i})=>i))}getReplayById(t){return this.http.get(this.baseUrlReplays+`${t}`)}addReplay(t){return this.http.post(this.baseUrlReplays,t,this.httpOptions)}editReplay(t,i){return this.http.put(this.baseUrlReplays+`${t}`,i)}deleteReplay(t){return this.http.delete(this.baseUrlReplays+`${t}`).pipe((0,P.b)(i=>console.log(i)))}getVideoListByReplayId(t){return this.http.get(this.baseUrlYoutubeApi+`playlists/${t}/videos`)}getListOfReplaysOnYoutube(){return this.http.get(this.baseUrlYoutubeApi+"playlists/")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(_.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function T(n,o){1&n&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2,"Aucun replay n'a encore \xe9t\xe9 enregistr\xe9 pour le moment."),e.qZA(),e.BQk())}function w(n,o){1&n&&(e.TgZ(0,"tr"),e._UZ(1,"th",9),e.TgZ(2,"th"),e._uU(3,"Titre"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Activ\xe9e?"),e.qZA(),e.TgZ(6,"th",10),e._uU(7,"Actions"),e.qZA()())}function U(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"i",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.editReplay(a.id))}),e.qZA(),e.TgZ(2,"i",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.deleteReplay(a.id))}),e.qZA()()}}function I(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",9),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"div",11),e.qZA(),e.TgZ(7,"td",12)(8,"i",13),e.NdJ("click",function(a){e.CHM(t);const r=e.MAs(10);return e.KtG(r.toggle(a))}),e.qZA(),e.TgZ(9,"p-overlayPanel",null,14),e.YNc(11,U,3,0,"ng-template",15),e.qZA()()()}if(2&n){const t=o.$implicit,i=o.rowIndex;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Q6J("ngClass",!0===t.isActive?"active-replay":"")}}const k=function(){return{width:"50vw"}},S=function(){return{"960px":"75vw","640px":"100vw"}};function L(n,o){if(1&n&&(e.TgZ(0,"p-table",4),e.YNc(1,w,8,0,"ng-template",5),e.YNc(2,I,12,3,"ng-template",6),e.qZA(),e._UZ(3,"p-confirmDialog",7)(4,"p-toast",8)),2&n){const t=e.oxw(2);e.Q6J("value",t.replays),e.xp6(3),e.Akn(e.DdM(4,k)),e.Q6J("breakpoints",e.DdM(5,S))}}function F(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1),e.YNc(2,T,3,0,"ng-container",2),e.YNc(3,L,5,6,"ng-template",null,3,e.W1O),e.qZA(),e.BQk()),2&n){const t=e.MAs(4),i=e.oxw();e.xp6(2),e.Q6J("ngIf",0==(null==i.replays?null:i.replays.length))("ngIfElse",t)}}let Y=(()=>{class n{constructor(t,i,a,r){this.router=t,this.replayService=i,this.messageService=a,this.confirmationService=r,this.deleteReplayEvent=new e.vpe}editReplay(t){this.replayService.getReplayById(t).subscribe(i=>{"success"===i.status?this.router.navigate([`replays/modifier/${t}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:i.message})},i=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})})}deleteReplay(t){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cette replay?",accept:()=>{this.deleteReplayEvent.emit(t)},reject:i=>{i===s.wB.REJECT&&this.messageService.add({severity:"info",detail:"Suppression annul\xe9e"})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.F0),e.Y36(y),e.Y36(s.ez),e.Y36(s.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-replay-list"]],inputs:{replays:"replays"},outputs:{deleteReplayEvent:"deleteReplayEvent"},standalone:!0,features:[e._Bn([s.ez,s.YP]),e.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[1,"replay-list"],[4,"ngIf","ngIfElse"],["tableau",""],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["styleClass","delete-message","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],[1,"count"],[1,"last-column"],[1,"default-state",3,"ngClass"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["op",""],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(t,i){1&t&&e.YNc(0,F,5,2,"ng-container",0),2&t&&e.Q6J("ngIf",i.replays)},dependencies:[c.O5,m.U$,m.iA,s.jx,Z.U8,f.D,f.Q,u.EV,u.FN,h.y,h.T,c.mk],styles:[".replay-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.replay-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:5px 10px;background-color:#f1f1f1;margin-top:60px;margin-bottom:30px}.replay-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;outline:none;border:solid green;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;white-space:nowrap}.replay-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]:hover{background-color:green;color:#fff}.replay-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.replay-list[_ngcontent-%COMP%]   p-table[_ngcontent-%COMP%]{width:550px;margin:auto;box-shadow:#00000029 0 1px 4px}.replay-list[_ngcontent-%COMP%]   .last-column[_ngcontent-%COMP%]{text-align:right}.replay-list[_ngcontent-%COMP%]   .default-state[_ngcontent-%COMP%]{height:15px;width:15px;border-radius:50%;background-color:#cbcbcb}.replay-list[_ngcontent-%COMP%]   .active-replay[_ngcontent-%COMP%]{background-color:green}.replay-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]{text-align:right}.replay-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.replay-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{border:1.5px solid #191922}.replay-list[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.5rem 1rem!important}.row-actions-event[_ngcontent-%COMP%]{display:flex;flex-direction:column}.row-actions-event[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]{color:red;border:1px solid red}.row-actions-event[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]:hover{color:#fff;background-color:red}.row-actions-event[_ngcontent-%COMP%]   .pi-pencil[_ngcontent-%COMP%]{color:green;border:1px solid green}.row-actions-event[_ngcontent-%COMP%]   .pi-pencil[_ngcontent-%COMP%]:hover{color:#fff;background-color:green}.p-overlaypanel[_ngcontent-%COMP%]   .p-overlaypanel-content[_ngcontent-%COMP%]{padding:7px}@media all and (max-width: 990px){.replay-list[_ngcontent-%COMP%]   p-table[_ngcontent-%COMP%]{width:100%}}"]}),n})(),N=(()=>{class n{constructor(t,i){this.replayService=t,this.messageService=i}ngOnInit(){this.getReplaysList()}getReplaysList(){this.replaysList$=this.replayService.getReplaysList()}deleteReplayById(t){this.replayService.deleteReplay(t).subscribe(a=>{console.log(a),"success"===a.status?(this.getReplaysList(),this.messageService.add({severity:"success",detail:a.message})):this.messageService.add({severity:"error",detail:a.message})},a=>{this.messageService.add({severity:"error",detail:"Erreur syst\xe8me: faire appel au webmaster"})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y),e.Y36(s.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-replay-list-container"]],standalone:!0,features:[e._Bn([s.ez]),e.jDz],decls:12,vars:3,consts:[[1,"replay-list-container"],[1,"title"],[1,"sub-title"],[1,"content"],[1,"actions"],["type","button","routerLink","/replays/creer",1,"add-replay"],[1,"pi","pi-plus"],[3,"replays","deleteReplayEvent"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Replays Cr\xe9\xe9s "),e.qZA(),e.TgZ(3,"p",2),e._uU(4,"Liste de tous les replays"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"button",5),e._UZ(8,"i",6),e._uU(9," Cr\xe9er replay "),e.qZA()(),e.TgZ(10,"app-replay-list",7),e.NdJ("deleteReplayEvent",function(r){return i.deleteReplayById(r)}),e.ALo(11,"async"),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("replays",e.lcZ(11,1,i.replaysList$)))},dependencies:[d.rH,c.Ov,Y],styles:[".replay-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.replay-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:5px 10px;background-color:#f1f1f1;margin-top:60px;margin-bottom:30px}.replay-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;outline:none;border:solid green;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;white-space:nowrap}.replay-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]:hover{background-color:green;color:#fff}.replay-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}"]}),n})();var p=l(433),C=l(9808),x=l(7976),R=l(2210),b=l(1740),M=l(7913);function B(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"h1",10),e._uU(2,"Cr\xe9er Un Replay "),e.qZA(),e.TgZ(3,"p",11),e._uU(4,"Cr\xe9ation d'une nouvelle rubrique de replay \xe0 partir de playlists cr\xe9\xe9es sur Youtube"),e.qZA(),e.TgZ(5,"div",12)(6,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSaveReplay())}),e._UZ(7,"i",14),e._uU(8," Ajouter "),e.qZA(),e.TgZ(9,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancelAddEditReplay())}),e._UZ(10,"i",16),e._uU(11," Annuler "),e.qZA()(),e.BQk()}}function J(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"h1",10),e._uU(1,"Modifier Un Replay"),e.qZA(),e.TgZ(2,"p",11),e._uU(3,"Modification d'une playlist"),e.qZA(),e.TgZ(4,"div",12)(5,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onEditReplay())}),e._UZ(6,"i",17),e._uU(7," Modifier "),e.qZA(),e.TgZ(8,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancelAddEditReplay())}),e._UZ(9,"i",16),e._uU(10," Annuler "),e.qZA()()}}function z(n,o){1&n&&(e.TgZ(0,"div",5)(1,"label"),e._uU(2,"Activer?"),e.qZA(),e._UZ(3,"p-inputSwitch",18),e.qZA())}function q(n,o){1&n&&(e.TgZ(0,"small",19),e._uU(1,"Renseigner le titre de la playlist"),e.qZA())}function D(n,o){1&n&&(e.TgZ(0,"small",19),e._uU(1,"S\xe9lectionnez une playlist"),e.qZA())}let A=(()=>{class n{constructor(t,i,a,r,$){this.fb=t,this.replayService=i,this.messageService=a,this.location=r,this.activatedRoute=$,this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1}ngOnInit(){this.initForm(),this.getAllYoutubeChannelPlaylist()}initForm(){this.replayForm=this.fb.group({title:["",p.kI.required],playlistId:["",p.kI.required],isActive:[!1]})}get formControls(){return this.replayForm.controls}checkEditMode(){this.activatedRoute.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.replayService.getReplayById(t.id).subscribe(i=>{if("success"===i.status){this.initialReplayDataWhenEdit=i.data,this.replayForm.controls.title.setValue(this.initialReplayDataWhenEdit.title),this.replayForm.controls.isActive.setValue(this.initialReplayDataWhenEdit.isActive);const a=this.youtubePlaylists.findIndex(r=>r.id==this.initialReplayDataWhenEdit.playlistId);this.replayForm.controls.playlistId.setValue(this.youtubePlaylists[a])}},()=>{this.messageService.add({severity:"warn",detail:"Replay inexistant, contactez le webmaster"})}))},()=>{this.messageService.add({severity:"warn",detail:"Replay inconnue"})})}getAllYoutubeChannelPlaylist(){this.replayService.getListOfReplaysOnYoutube().subscribe(t=>{this.youtubePlaylists=t.message,this.checkEditMode()})}onCancelAddEditReplay(){this.location.back()}onSaveReplay(){if(this.isSaveButtonClicked=!0,this.replayForm.invalid)return;const t={title:this.replayForm.get("title")?.value,playlistId:this.replayForm.get("playlistId")?.value.id,isActive:this.replayForm.get("isActive")?.value};this.replayService.addReplay(t).subscribe(i=>{this.messageService.add({severity:"success",detail:i.message}),(0,C.n)((0,x.H)(2e3)).then(()=>{this.location.back()})})}onEditReplay(){if(this.isEditButtonClicked=!0,this.replayForm.controls.title.value===this.initialReplayDataWhenEdit.title&&this.replayForm.controls.playlistId.value.id===this.initialReplayDataWhenEdit.playlistId&&this.replayForm.controls.isActive.value===this.initialReplayDataWhenEdit.isActive)return void this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xe9e"});let t={};this.replayForm.controls.title.value!==this.initialReplayDataWhenEdit.title&&(t={...t,title:this.replayForm.controls.title.value}),this.replayForm.controls.playlistId.value.id!==this.initialReplayDataWhenEdit.playlistId&&(t={...t,playlistId:this.replayForm.controls.playlistId.value.id}),this.replayForm.controls.isActive.value!==this.initialReplayDataWhenEdit.isActive&&(t={...t,isActive:this.replayForm.controls.isActive.value}),this.replayService.editReplay(this.initialReplayDataWhenEdit.id,t).subscribe(i=>{"success"===i.status&&(this.messageService.add({severity:"success",detail:i.message}),(0,C.n)((0,x.H)(2e3)).then(()=>{this.location.back()}))},()=>{this.messageService.add({severity:"info",detail:"Programme inconnue"})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(y),e.Y36(s.ez),e.Y36(c.Ye),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-replay-add-edit-container"]],standalone:!0,features:[e._Bn([s.ez]),e.jDz],decls:17,vars:9,consts:[[1,"add-edit-replay-container"],[4,"ngIf","ngIfElse"],["editMode",""],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["type","text","pInputText","","formControlName","title"],["class","p-error",4,"ngIf"],["formControlName","playlistId","placeholder","S\xe9lectionnez une playlist","filterBy","title","optionLabel","title",3,"options","filter","showClear"],["position","top-right"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],["type","button",1,"cancel",3,"click"],[1,"pi","pi-times"],[1,"pi","pi-pencil"],["formControlName","isActive"],[1,"p-error"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,B,12,0,"ng-container",1),e.YNc(2,J,11,0,"ng-template",null,2,e.W1O),e.TgZ(4,"form",3),e.YNc(5,z,4,0,"div",4),e.TgZ(6,"div",5)(7,"label"),e._uU(8,"Titre de la replay"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,q,2,0,"small",7),e.qZA(),e.TgZ(11,"div",5)(12,"label"),e._uU(13,"Playlist sur youtube"),e.qZA(),e._UZ(14,"p-dropdown",8),e.YNc(15,D,2,0,"small",7),e.qZA()(),e._UZ(16,"p-toast",9),e.qZA()),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!i.isEditMode)("ngIfElse",a),e.xp6(3),e.Q6J("formGroup",i.replayForm),e.xp6(1),e.Q6J("ngIf",i.isEditMode),e.xp6(5),e.Q6J("ngIf",i.formControls.title.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),e.xp6(4),e.Q6J("options",i.youtubePlaylists)("filter",!0)("showClear",!0),e.xp6(1),e.Q6J("ngIf",i.formControls.playlistId.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked))}},dependencies:[c.O5,p.UX,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,R.kW,R.Lt,u.EV,u.FN,b.j,b.o,M.Iu,M.Ql],styles:[".add-edit-replay-container{display:flex;flex-direction:column;min-height:100vh}.add-edit-replay-container .actions{display:flex;justify-content:flex-end;padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px}.add-edit-replay-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;margin-left:10px}.add-edit-replay-container .actions button i{margin-right:5px}.add-edit-replay-container .actions .add{border:solid var(--project-primary-color);color:var(--project-primary-color)}.add-edit-replay-container .actions .add:hover{color:#fff;background-color:var(--project-primary-color)}.add-edit-replay-container .actions .cancel{border:solid gray;color:gray}.add-edit-replay-container .actions .cancel:hover{color:#fff;background-color:gray}.add-edit-replay-container form{display:flex;flex-direction:column;width:500px;border-radius:7px;margin:0 auto;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.add-edit-replay-container form .field{display:flex;flex-direction:column;margin-bottom:20px;flex:1}.add-edit-replay-container form .field label{margin-bottom:7px}.add-edit-replay-container form .field small{margin:10px 0 0}.add-edit-replay-container form .field p-dropdown{width:100%}.add-edit-replay-container form .field p-dropdown .p-dropdown{width:100%}@media all and (max-width: 990px){.add-replay form{width:100%}}@media all and (max-width: 990px){.add-replay form{padding:20px}}\n"],encapsulation:2}),n})();const j=[{path:"",component:N},{path:"creer",component:A},{path:"modifier/:id",component:A}];let Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(j),d.Bz]}),n})(),W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,Q]}),n})()}}]);