"use strict";(self.webpackChunkforyou_admin=self.webpackChunkforyou_admin||[]).push([[214],{6214:(T,c,r)=>{r.r(c),r.d(c,{LoginModule:()=>A});var g=r(298),s=r(433),f=r(805),a=r(6895),o=r(8256);let m=(()=>{class e{constructor(){this.strokeWidth="2",this.fill="none",this.animationDuration="2s"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["p-progressSpinner"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration"},decls:3,vars:6,consts:[["role","alert","aria-busy","true",1,"p-progress-spinner",3,"ngStyle","ngClass"],["viewBox","25 25 50 50",1,"p-progress-spinner-svg"],["cx","50","cy","50","r","20","stroke-miterlimit","10",1,"p-progress-spinner-circle"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.O4$(),o.TgZ(1,"svg",1),o._UZ(2,"circle",2),o.qZA()()),2&t&&(o.Q6J("ngStyle",n.style)("ngClass",n.styleClass),o.xp6(1),o.Udp("animation-duration",n.animationDuration),o.xp6(1),o.uIk("fill",n.fill)("stroke-width",n.strokeWidth))},dependencies:[a.mk,a.PC],styles:['.p-progress-spinner{position:relative;margin:0 auto;width:100px;height:100px;display:inline-block}.p-progress-spinner:before{content:"";display:block;padding-top:100%}.p-progress-spinner-svg{animation:p-progress-spinner-rotate 2s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;inset:0;margin:auto}.p-progress-spinner-circle{stroke-dasharray:89,200;stroke-dashoffset:0;stroke:#d62d20;animation:p-progress-spinner-dash 1.5s ease-in-out infinite,p-progress-spinner-color 6s ease-in-out infinite;stroke-linecap:round}@keyframes p-progress-spinner-rotate{to{transform:rotate(360deg)}}@keyframes p-progress-spinner-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}@keyframes p-progress-spinner-color{to,0%{stroke:#d62d20}40%{stroke:#0057e7}66%{stroke:#008744}80%,90%{stroke:#ffa700}}\n'],encapsulation:2,changeDetection:0}),e})(),u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[a.ez]}),e})();var h=r(1816),d=r(1740),x=r(6256),y=r(1802);function b(e,i){if(1&e&&(o.ynx(0),o.TgZ(1,"p",16),o._uU(2),o.ALo(3,"json"),o.qZA(),o.BQk()),2&e){const t=o.oxw();o.xp6(2),o.Oqu(o.lcZ(3,1,t.messageError))}}function v(e,i){1&e&&(o.TgZ(0,"small",17),o._uU(1,"Renseigner votre login"),o.qZA())}function S(e,i){1&e&&(o.TgZ(0,"small",17),o._uU(1,"Renseigner votre mot de passe"),o.qZA())}const k=function(){return{width:"20px",height:"20px"}};function C(e,i){1&e&&(o.ynx(0),o._UZ(1,"p-progressSpinner",18),o.BQk()),2&e&&(o.xp6(1),o.Akn(o.DdM(2,k)))}function L(e,i){1&e&&o._uU(0,"Se Connecter")}const Z=[{path:"",component:(()=>{class e{constructor(t,n,l,p){this.fb=t,this.authService=n,this.userService=l,this.router=p,this.isSaveButtonClicked=!1,this.isMessageErrorDisplayed=!1,this.isLoginFormSubmittedAndNotErrorOnClientSide=!1}ngOnInit(){this.redirectOnAlreadyLog(),this.initForm()}redirectOnAlreadyLog(){this.authService.isLogged$.subscribe(t=>{!0===t&&this.router.navigateByUrl("")})}initForm(){this.loginForm=this.fb.group({email:["",s.kI.required],password:["",s.kI.required]})}get f(){return this.loginForm.controls}onLogin(){this.isMessageErrorDisplayed=!1,this.isSaveButtonClicked=!0,!this.loginForm.invalid&&(this.isLoginFormSubmittedAndNotErrorOnClientSide=!0,this.authService.login(this.loginForm.value).subscribe({next:t=>{this.handleSuccessfullyLogged(t),this.isLoginFormSubmittedAndNotErrorOnClientSide=!1,this.router.navigateByUrl("")},error:t=>{this.isMessageErrorDisplayed=!0,this.messageError=t,this.isLoginFormSubmittedAndNotErrorOnClientSide=!1}}))}handleSuccessfullyLogged(t){const n=h.Z(t),l=n.sub;n.exp-n.iat>0&&(this.authService.isLogged$.next(!0),this.setConnectedUser(l))}setConnectedUser(t){this.userService.getUserById(t).subscribe(n=>{this.authService.user$.next(n.data)})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(s.QS),o.Y36(x.e),o.Y36(y.f),o.Y36(g.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],standalone:!0,features:[o._Bn([f.ez]),o.jDz],decls:28,vars:6,consts:[[1,"login"],[1,"content","my-container"],[1,"form-bloc"],[1,"left"],["src","../../../../../assets/img/login/icon.png","alt","logo"],[1,"right"],[3,"formGroup","submit"],[4,"ngIf"],[1,"field"],["type","text","pInputText","","formControlName","email"],["class","p-error",4,"ngIf"],["type","text","pInputText","","formControlName","password"],["routerLink","/mot-de-passe-oublie",1,"forgotten-password"],["type","submit"],[4,"ngIf","ngIfElse"],["defaultText",""],[1,"message-request-error"],[1,"p-error"],["strokeWidth","8"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"img",4),o.TgZ(5,"h1"),o._uU(6,"Amadou B\xc2 2024"),o.qZA()(),o.TgZ(7,"div",5)(8,"form",6),o.NdJ("submit",function(){return n.onLogin()}),o.YNc(9,b,4,3,"ng-container",7),o.TgZ(10,"h1"),o._uU(11,"Se Connecter"),o.qZA(),o.TgZ(12,"div",8)(13,"label"),o._uU(14,"Login"),o.qZA(),o._UZ(15,"input",9),o.YNc(16,v,2,0,"small",10),o.qZA(),o.TgZ(17,"div",8)(18,"label"),o._uU(19,"Mot de passe"),o.qZA(),o._UZ(20,"input",11),o.YNc(21,S,2,0,"small",10),o.qZA(),o.TgZ(22,"p",12),o._uU(23," Mot de passe oubli\xe9 ?"),o.qZA(),o.TgZ(24,"button",13),o.YNc(25,C,2,3,"ng-container",14),o.qZA()(),o.YNc(26,L,1,0,"ng-template",null,15,o.W1O),o.qZA()()()()),2&t){const l=o.MAs(27);o.xp6(8),o.Q6J("formGroup",n.loginForm),o.xp6(1),o.Q6J("ngIf",n.isMessageErrorDisplayed),o.xp6(7),o.Q6J("ngIf",n.f.email.invalid&&n.isSaveButtonClicked),o.xp6(5),o.Q6J("ngIf",n.f.password.invalid&&n.isSaveButtonClicked),o.xp6(4),o.Q6J("ngIf",n.isLoginFormSubmittedAndNotErrorOnClientSide)("ngIfElse",l)}},dependencies:[a.O5,d.j,d.o,u,m,a.Ts,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,g.rH],styles:[".login{display:flex;align-items:center;justify-content:center}.login .content{display:flex;align-items:center;justify-content:center;width:100%;min-height:100vh}.login .content .form-bloc{display:flex;overflow:hidden;border-radius:7px;width:-moz-fit-content;width:fit-content;box-shadow:#00000059 0 5px 15px;min-height:455px}.login .content .form-bloc .left{background-color:var(--project-primary-color);width:300px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;padding:20px}.login .content .form-bloc .left img{width:170px;border-radius:50%;box-shadow:#00000059 0 5px 15px}.login .content .form-bloc .left h1{text-align:center;margin:20px 0}.login .content .form-bloc .right{width:-moz-fit-content;width:fit-content;padding:20px 50px;background-color:#fff;display:flex;align-items:center;justify-content:center;width:400px}.login .content .form-bloc .right form{display:flex;flex-direction:column}.login .content .form-bloc .right form .message-request-error{padding:5px;text-align:center;margin-bottom:20px;background-color:#fddddd;color:red;font-size:.9em}.login .content .form-bloc .right form h1{margin-bottom:35px;text-align:center}.login .content .form-bloc .right form .field{display:flex;flex-direction:column;margin-bottom:15px;width:300px}.login .content .form-bloc .right form .field label{margin-bottom:7px}.login .content .form-bloc .right form .field small{margin:10px 0 0}.login .content .form-bloc .right form .forgotten-password{text-align:right;cursor:pointer;color:#569672;transition:all .2s ease-in-out;font-size:.9rem;font-style:italic}.login .content .form-bloc .right form .forgotten-password:hover{text-decoration:underline}.login .content .form-bloc .right form button{margin-top:10px;padding:10px;border:1px solid black;background-color:#fff;transition:all .2s ease-in-out;font-size:1.1em}.login .content .form-bloc .right form button:hover{color:#fff;background-color:#000}@media all and (max-width: 830px){.login .content{flex-direction:column}.login .content .form-bloc{flex-direction:column;width:400px;height:-moz-fit-content;height:fit-content;min-height:unset}.login .content .form-bloc .left{width:100%;padding:0 10px}.login .content .form-bloc .left img{display:none}.login .content .form-bloc .left h1{margin:20px 0;color:#fff}.login .content .form-bloc .right{width:100%;padding:20px 20px 40px}.login .content .form-bloc .right form,.login .content .form-bloc .right form .field{width:100%}.login .content .form-bloc .right form button{padding:7px;font-size:1em}}@media all and (max-width: 515px){.login{margin:0 20px}.login .content .form-bloc{width:100%}.login .content .form-bloc .right{padding:10px 20px 25px}}\n"],encapsulation:2}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[g.Bz.forChild(Z),g.Bz]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[w]}),e})()}}]);