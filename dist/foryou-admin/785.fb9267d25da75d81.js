"use strict";(self.webpackChunkforyou_admin=self.webpackChunkforyou_admin||[]).push([[785],{1785:(Zt,y,c)=>{c.r(y),c.d(y,{ArticlesModule:()=>yt});var d=c(6895),p=c(298),s=c(805),t=c(8256),Z=c(2526),_=c(2435),m=c(2249);function O(n,o){1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2,"Aucune rubrique n'a encore \xe9t\xe9 enregistr\xe9e pour le moment."),t.qZA(),t.BQk())}function I(n,o){1&n&&(t.TgZ(0,"tr"),t._UZ(1,"th")(2,"th"),t.TgZ(3,"th"),t._uU(4,"Titre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Description"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Activ\xe9e?"),t.qZA(),t.TgZ(9,"th",7),t._uU(10,"Actions"),t.qZA()())}function q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"i",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.editRubricEventTrigger(r.id))}),t.qZA(),t.TgZ(2,"i",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.deleteRubricEventTrigger(r.id))}),t.qZA()()}}function L(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr",8),t._UZ(1,"td",9),t.TgZ(2,"td"),t._UZ(3,"span",10),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._UZ(9,"div",11),t.qZA(),t.TgZ(10,"td",12)(11,"i",13),t.NdJ("click",function(r){t.CHM(e);const a=t.MAs(13);return t.KtG(a.toggle(r))}),t.qZA(),t.TgZ(12,"p-overlayPanel",null,14),t.YNc(14,q,3,0,"ng-template",15),t.qZA()()()}if(2&n){const e=o.$implicit;t.Q6J("pReorderableRow",o.rowIndex),t.xp6(5),t.Oqu(e.name),t.xp6(2),t.hij(" ",e.description,""),t.xp6(2),t.Q6J("ngClass",!0===e.isActive?"active-rubric":"")}}function U(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"p-table",4),t.NdJ("onRowReorder",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onRowReorder())}),t.YNc(1,I,11,0,"ng-template",5),t.YNc(2,L,15,4,"ng-template",6),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("value",e.currentRubricList)}}function F(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,O,3,0,"ng-container",2),t.YNc(3,U,3,1,"ng-template",null,3,t.W1O),t.qZA(),t.BQk()),2&n){const e=t.MAs(4),i=t.oxw();t.xp6(2),t.Q6J("ngIf",0==(null==i.currentRubricList?null:i.currentRubricList.length))("ngIfElse",e)}}let P=(()=>{class n{constructor(){this.deleteRubricEvent=new t.vpe,this.editRubricEvent=new t.vpe,this.itemsOrderChangedEvent=new t.vpe}onRowReorder(){this.itemsOrderChangedEvent.emit({firstList:this._firstReplayList,currentList:this.currentRubricList})}editRubricEventTrigger(e){this.editRubricEvent.emit(e)}deleteRubricEventTrigger(e){this.deleteRubricEvent.emit(e)}ngOnChanges(e){e.currentRubricList.currentValue&&(this._firstReplayList=[...this.currentRubricList])}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-rubric-list"]],inputs:{currentRubricList:"currentRubricList"},outputs:{deleteRubricEvent:"deleteRubricEvent",editRubricEvent:"editRubricEvent",itemsOrderChangedEvent:"itemsOrderChangedEvent"},standalone:!0,features:[t.TTD,t.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[1,"rubric-list"],[4,"ngIf","ngIfElse"],["tableau",""],["responsiveLayout","scroll",3,"value","onRowReorder"],["pTemplate","header"],["pTemplate","body"],[1,"last-column"],[3,"pReorderableRow"],["pReorderableRowHandle","",1,"row-reorder-handler"],[1,"pi","pi-align-justify"],[1,"default-state",3,"ngClass"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["op",""],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(e,i){1&e&&t.YNc(0,F,5,2,"ng-container",0),2&e&&t.Q6J("ngIf",i.currentRubricList)},dependencies:[d.O5,m.U$,m.iA,s.jx,m.Mv,m.qO,Z.U8,_.y,_.T,d.mk],styles:[".rubric-list{display:flex;flex-direction:column}.rubric-list p-table{width:100%;margin:auto;box-shadow:#00000029 0 1px 4px}.rubric-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr{position:relative;transition:all .8s ease-in-out}.rubric-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr .row-reorder-handler{position:absolute;top:0;left:0;width:100%;height:100%}.rubric-list .last-column{text-align:right}.rubric-list .default-state{height:15px;width:15px;border-radius:50%;background-color:#cbcbcb}.rubric-list .active-rubric{background-color:green}.rubric-list .row-actions{text-align:right;position:relative}.rubric-list .row-actions i{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.rubric-list .row-actions i:hover{border:1.5px solid #191922}.rubric-list .p-datatable .p-datatable-tbody>tr>td{padding:.5rem 1rem!important}.row-actions-event{display:flex;flex-direction:column}.row-actions-event i{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event .pi-trash{color:red;border:1px solid red}.row-actions-event .pi-trash:hover{color:#fff;background-color:red}.row-actions-event .pi-pencil{color:green;border:1px solid green}.row-actions-event .pi-pencil:hover{color:#fff;background-color:green}.p-overlaypanel .p-overlaypanel-content{padding:7px}\n"],encapsulation:2}),n})();var S=c(5849),g=c(2453),f=c(2137),h=c(906),D=c(5174);function N(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setNewItemsOrder())}),t._UZ(2,"i",12),t._uU(3," Sauvegarder l'odre "),t.qZA(),t.BQk()}}const J=function(){return{width:"50vw"}},B=function(){return{"960px":"75vw","640px":"100vw"}};let Y=(()=>{class n{constructor(e,i,r,a,u){this.articleService=e,this.messageService=i,this.confirmationService=r,this.reorderUtils=a,this.router=u,this.subscriptions=[],this.areThereNewOrderToSave=!1}ngOnInit(){this.getRubricList()}getRubricList(){this.rubricList$=this.articleService.getRubricList()}onReorderDetect(e){this.firstOrderedReplayList=e.firstList,this.currentOrderedReplayList=e.currentList,this.areThereNewOrderToSave=this.reorderUtils.areArraysEquals(this.firstOrderedReplayList,this.currentOrderedReplayList)}onEditEventDetect(e){const i=e;this.subscriptions.push(this.articleService.getRubricById(i).subscribe({next:r=>{"success"===r.status?this.router.navigate([`articles/modifier-rubrique/${i}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:r.message})},error:r=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}}))}deleteRubricById(e){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cette rubrique ?",accept:()=>{this.subscriptions.push(this.articleService.deleteRubric(e).subscribe({next:r=>{"success"===r.status?(this.getRubricList(),this.messageService.add({severity:"success",detail:r.message})):this.messageService.add({severity:"error",detail:r.message})},error:r=>{this.messageService.add({severity:"error",detail:"Erreur syst\xe8me: faire appel au webmaster"})}}))},reject:i=>{i===s.wB.REJECT&&this.messageService.add({severity:"info",detail:"Suppression annul\xe9e"})}})}setNewItemsOrder(){const e=this.reorderUtils.findDifferentIdsAndIndices(this.firstOrderedReplayList,this.currentOrderedReplayList);this.articleService.updateArticleRubricsOrder(e).subscribe({next:i=>{this.messageService.add({severity:"success",detail:i})},error:i=>{this.messageService.add({severity:"error",detail:i})},complete:()=>{this.areThereNewOrderToSave=!1,this.getRubricList()}})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.n),t.Y36(s.ez),t.Y36(s.YP),t.Y36(D.N),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-article-rubric-list-container"]],standalone:!0,features:[t._Bn([s.ez,s.YP,S.xA]),t.jDz],decls:15,vars:9,consts:[[1,"rubric-list-container"],[1,"title"],[1,"sub-title"],[1,"content"],[1,"actions"],["type","button","routerLink","/articles/creer-rubrique",1,"add"],[1,"pi","pi-plus"],[4,"ngIf"],[3,"currentRubricList","itemsOrderChangedEvent","editRubricEvent","deleteRubricEvent"],["styleClass","delete-message","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],["type","button",1,"save",3,"click"],[1,"pi","pi-save"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Rubriques Cr\xe9\xe9es "),t.qZA(),t.TgZ(3,"p",2),t._uU(4,"Liste de toutes les rubriques d'articles"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"button",5),t._UZ(8,"i",6),t._uU(9," Cr\xe9er rubrique "),t.qZA(),t.YNc(10,N,4,0,"ng-container",7),t.qZA(),t.TgZ(11,"app-rubric-list",8),t.NdJ("itemsOrderChangedEvent",function(a){return i.onReorderDetect(a)})("editRubricEvent",function(a){return i.onEditEventDetect(a)})("deleteRubricEvent",function(a){return i.deleteRubricById(a)}),t.ALo(12,"async"),t.qZA(),t._UZ(13,"p-confirmDialog",9)(14,"p-toast",10),t.qZA()()),2&e&&(t.xp6(10),t.Q6J("ngIf",i.areThereNewOrderToSave),t.xp6(1),t.Q6J("currentRubricList",t.lcZ(12,5,i.rubricList$)),t.xp6(2),t.Akn(t.DdM(7,J)),t.Q6J("breakpoints",t.DdM(8,B)))},dependencies:[p.rH,d.Ov,d.O5,g.EV,g.FN,f.D,f.Q,P],styles:[".rubric-list-container{display:flex;flex-direction:column}.rubric-list-container .actions{padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px;display:flex;justify-content:space-between}.rubric-list-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff}.rubric-list-container .actions button:hover{background-color:green;color:#fff}.rubric-list-container .actions button i{margin-right:5px}.rubric-list-container .actions .add{border:solid green;color:green}.rubric-list-container .actions .add:hover{background-color:green}.rubric-list-container .actions .save{border:solid blue;color:#00f}.rubric-list-container .actions .save:hover{background-color:#00f}\n"],encapsulation:2}),n})();function Q(n,o){1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2,"Aucun article de cette rubrique n'a encore \xe9t\xe9 enregistr\xe9 pour le moment."),t.qZA(),t.BQk())}function V(n,o){1&n&&(t.TgZ(0,"tr"),t._UZ(1,"th",9),t.TgZ(2,"th"),t._uU(3,"Titre"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Description"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Date"),t.qZA(),t.TgZ(8,"th",10),t._uU(9,"Actions"),t.qZA()())}function j(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"i",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.editArticle(r.id))}),t.qZA(),t.TgZ(2,"i",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.deleteArticle(r.id,r.rubricId))}),t.qZA()()}}function W(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",9),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t._UZ(5,"td",11),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",12)(9,"i",13),t.NdJ("click",function(r){t.CHM(e);const a=t.MAs(11);return t.KtG(a.toggle(r))}),t.qZA(),t.TgZ(10,"p-overlayPanel",null,14),t.YNc(12,j,3,0,"ng-template",15),t.qZA()()()}if(2&n){const e=o.$implicit,i=o.rowIndex,r=t.oxw(3);t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("innerHTML",e.description,t.oJD),t.xp6(2),t.hij(" ",r.convertDate(e.date)," ")}}const z=function(){return{width:"50vw"}},H=function(){return{"960px":"75vw","640px":"100vw"}};function G(n,o){if(1&n&&(t.TgZ(0,"p-table",4),t.YNc(1,V,10,0,"ng-template",5),t.YNc(2,W,13,4,"ng-template",6),t.qZA(),t._UZ(3,"p-confirmDialog",7)(4,"p-toast",8)),2&n){const e=t.oxw(2);t.Q6J("value",e.articles),t.xp6(3),t.Akn(t.DdM(4,z)),t.Q6J("breakpoints",t.DdM(5,H))}}function $(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,Q,3,0,"ng-container",2),t.YNc(3,G,5,6,"ng-template",null,3,t.W1O),t.qZA(),t.BQk()),2&n){const e=t.MAs(4),i=t.oxw();t.xp6(2),t.Q6J("ngIf",0==(null==i.articles?null:i.articles.length))("ngIfElse",e)}}let K=(()=>{class n{constructor(e,i,r,a,u){this.router=e,this.articleService=i,this.messageService=r,this.confirmationService=a,this.datePipe=u,this.deleteArticleEvent=new t.vpe}editArticle(e){this.articleService.getArticleById(e).subscribe(i=>{"success"===i.status?this.router.navigate([`articles/modifier-article/${e}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:i.message})},i=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})})}deleteArticle(e,i){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cette replay?",accept:()=>{this.deleteArticleEvent.emit({articleId:e,rubricId:i})},reject:r=>{r===s.wB.REJECT&&this.messageService.add({severity:"info",detail:"Suppression annul\xe9e"})}})}convertDate(e){return this.datePipe.transform(e,"dd/MM/yyyy")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(h.n),t.Y36(s.ez),t.Y36(s.YP),t.Y36(d.uU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-article-list"]],inputs:{articles:"articles"},outputs:{deleteArticleEvent:"deleteArticleEvent"},standalone:!0,features:[t._Bn([s.ez,s.YP,d.uU]),t.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[1,"article-list"],[4,"ngIf","ngIfElse"],["tableau",""],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["styleClass","delete-message","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],[1,"count"],[1,"last-column"],[3,"innerHTML"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["op",""],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(e,i){1&e&&t.YNc(0,$,5,2,"ng-container",0),2&e&&t.Q6J("ngIf",i.articles)},dependencies:[d.O5,m.U$,m.iA,s.jx,Z.U8,f.D,f.Q,g.EV,g.FN,_.y,_.T],styles:[".article-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.article-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:5px 10px;background-color:#f1f1f1;margin-top:60px;margin-bottom:30px}.article-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;outline:none;border:solid green;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;white-space:nowrap}.article-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]:hover{background-color:green;color:#fff}.article-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.article-list[_ngcontent-%COMP%]   p-table[_ngcontent-%COMP%]{width:100%;margin:auto;box-shadow:#00000029 0 1px 4px}.article-list[_ngcontent-%COMP%]   .last-column[_ngcontent-%COMP%]{text-align:right}.article-list[_ngcontent-%COMP%]   .default-state[_ngcontent-%COMP%]{height:15px;width:15px;border-radius:50%;background-color:#cbcbcb}.article-list[_ngcontent-%COMP%]   .active-replay[_ngcontent-%COMP%]{background-color:green}.article-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]{text-align:right}.article-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.article-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{border:1.5px solid #191922}.article-list[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.5rem 1rem!important}.row-actions-event[_ngcontent-%COMP%]{display:flex;flex-direction:column}.row-actions-event[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]{color:red;border:1px solid red}.row-actions-event[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]:hover{color:#fff;background-color:red}.row-actions-event[_ngcontent-%COMP%]   .pi-pencil[_ngcontent-%COMP%]{color:green;border:1px solid green}.row-actions-event[_ngcontent-%COMP%]   .pi-pencil[_ngcontent-%COMP%]:hover{color:#fff;background-color:green}.p-overlaypanel[_ngcontent-%COMP%]   .p-overlaypanel-content[_ngcontent-%COMP%]{padding:7px}@media all and (max-width: 990px){.replay-list[_ngcontent-%COMP%]   p-table[_ngcontent-%COMP%]{width:100%}}"]}),n})();var E=c(4004),X=c(8419);let tt=(()=>{class n{constructor(e,i){this.articleService=e,this.messageService=i}ngOnInit(){this.getRubricList()}getRubricList(){this.rubricList$=this.articleService.getRubricList().pipe((0,E.U)(e=>e.map(i=>({id:i.id,name:i.name,isActive:!1}))))}getArticleListByRubricId(e){this.articlesList$=this.articleService.getArticleList(e)}deleteArticleById(e){const r=e.rubricId;this.articleService.deleteArticle(e.articleId).subscribe(a=>{"success"===a.status?(this.getArticleListByRubricId(r),this.messageService.add({severity:"success",detail:a.message})):this.messageService.add({severity:"error",detail:a.message})},a=>{this.messageService.add({severity:"error",detail:"Erreur syst\xe8me: faire appel au webmaster"})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.n),t.Y36(s.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-article-list-container"]],standalone:!0,features:[t._Bn([s.ez]),t.jDz],decls:14,vars:6,consts:[[1,"article-list-container"],[1,"title"],[1,"sub-title"],[1,"content"],[1,"actions"],["type","button","routerLink","/articles/creer-article",1,"add-article"],[1,"pi","pi-plus"],[3,"menuList","menuItemClikedEvent"],[3,"articles","deleteArticleEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Gestion Des Articles "),t.qZA(),t.TgZ(3,"p",2),t._uU(4,"Gestion de tous les articles cr\xe9\xe9s"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"button",5),t._UZ(8,"i",6),t._uU(9," Cr\xe9er article "),t.qZA()(),t.TgZ(10,"app-category-list-menu",7),t.NdJ("menuItemClikedEvent",function(a){return i.getArticleListByRubricId(a)}),t.ALo(11,"async"),t.qZA(),t.TgZ(12,"app-article-list",8),t.NdJ("deleteArticleEvent",function(a){return i.deleteArticleById(a)}),t.ALo(13,"async"),t.qZA()()()),2&e&&(t.xp6(10),t.Q6J("menuList",t.lcZ(11,2,i.rubricList$)),t.xp6(2),t.Q6J("articles",t.lcZ(13,4,i.articlesList$)))},dependencies:[p.rH,d.Ov,X.U,K],styles:[".article-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.article-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:5px 10px;background-color:#f1f1f1;margin-top:60px;margin-bottom:30px}.article-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-article[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;outline:none;border:solid green;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;white-space:nowrap}.article-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-article[_ngcontent-%COMP%]:hover{background-color:green;color:#fff}.article-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-article[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}"]}),n})();var l=c(433),b=c(1740),v=c(9808),C=c(7976),T=c(1008),A=c(7913),et=c(3054),w=c(2210),M=c(5121);function it(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"h1",28),t._uU(2,"Cr\xe9er Un d'Article "),t.qZA(),t.TgZ(3,"p",29),t._uU(4,"Cr\xe9ation d'un nouvel article"),t.qZA(),t.TgZ(5,"div",30)(6,"button",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSaveArticle())}),t._UZ(7,"i",32),t._uU(8," Ajouter "),t.qZA(),t.TgZ(9,"button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onCancelAddEditArticle())}),t._UZ(10,"i",34),t._uU(11," Annuler "),t.qZA()(),t.BQk()}}function nt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"h1",28),t._uU(1,"Modifier Un Article"),t.qZA(),t.TgZ(2,"p",29),t._uU(3,"Modification d'un article"),t.qZA(),t.TgZ(4,"div",30)(5,"button",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onEditArticle())}),t._UZ(6,"i",35),t._uU(7," Modifier "),t.qZA(),t.TgZ(8,"button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onCancelAddEditArticle())}),t._UZ(9,"i",34),t._uU(10," Annuler "),t.qZA()()}}function rt(n,o){1&n&&(t.TgZ(0,"small"),t._uU(1,"Image manquante"),t.qZA())}function ot(n,o){if(1&n&&(t.TgZ(0,"div",36),t.YNc(1,rt,2,0,"small",37),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.coverImage.errors?null:e.formControls.coverImage.errors.required)}}function at(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"S\xe9lectionnez une rubrique d'article"),t.qZA())}function ct(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Renseigner le titre de l'article"),t.qZA())}function lt(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Renseigner une courte description"),t.qZA())}function st(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Renseigner l'heure de l'\xe9v\xeanement"),t.qZA())}function dt(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Renseigner la date de l'\xe9v\xeanement"),t.qZA())}function ut(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Renseigner le m\xe9dia vid\xe9o"),t.qZA())}function pt(n,o){1&n&&(t.TgZ(0,"span",38),t._UZ(1,"button",39)(2,"button",40)(3,"button",41)(4,"button",42)(5,"button",43)(6,"button",44)(7,"button",45)(8,"button",46)(9,"button",47),t.qZA())}function mt(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Renseigner le contenu de l'article"),t.qZA())}const gt=function(){return{height:"320px"}};let R=(()=>{class n{constructor(e,i,r,a,u){this.fb=e,this.artcileService=i,this.messageService=r,this.location=a,this.activatedRoute=u,this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1,this.isImageEdit=!1,this.isMediaVideoInputIsToDisable=!0}ngOnInit(){this.initForm(),this.getArticleRubrics(),this.checkEditMode(),this.getUserConnected(),this.onHandlingMedia()}initForm(){this.articleForm=this.fb.group({title:["",l.kI.required],description:["",l.kI.required],date:["",l.kI.required],hour:[""],content:["",l.kI.required],hasVideo:[!1],videoLink:[{value:"",disabled:!0}],coverImage:["",l.kI.required],rubric:["",l.kI.required]})}getArticleRubrics(){this.articleRubrics$=this.artcileService.getRubricList().pipe((0,E.U)(e=>e.map(i=>({id:i.id,name:i.name}))))}onHandlingMedia(){this.articleForm.controls.hasVideo.valueChanges.subscribe(e=>{e?(this.articleForm.controls.videoLink.enable(),this.articleForm.controls.videoLink.setValidators(l.kI.required)):(this.articleForm.controls.videoLink.reset(),this.articleForm.controls.videoLink.disable(),this.articleForm.controls.videoLink.removeValidators(l.kI.required)),this.isMediaVideoInputIsToDisable=!this.isMediaVideoInputIsToDisable,this.articleForm.controls.videoLink.updateValueAndValidity()})}get formControls(){return this.articleForm.controls}checkEditMode(){this.activatedRoute.params.subscribe(e=>{e.id&&(this.isEditMode=!0,this.artcileService.getArticleById(e.id).subscribe(i=>{if("success"===i.status){this.initialArticleDataWhenEdit=i.data,this.articleForm.controls.title.setValue(this.initialArticleDataWhenEdit.title),this.articleForm.controls.description.setValue(this.initialArticleDataWhenEdit.description),this.articleForm.controls.date.setValue(new Date(this.initialArticleDataWhenEdit.date)),this.articleForm.controls.hour.setValue(this.initialArticleDataWhenEdit.hour),this.articleForm.controls.content.setValue(this.initialArticleDataWhenEdit.content),this.articleForm.controls.hasVideo.setValue(this.initialArticleDataWhenEdit.hasVideo),this.articleForm.controls.videoLink.setValue(this.initialArticleDataWhenEdit.videoLink),this.articleRubrics$.subscribe({next:a=>{const u=a.filter(x=>x.id===this.initialArticleDataWhenEdit.rubricId);this.articleForm.controls.rubric.setValue(u[0])}});const r=document.getElementById("image-previewed");this.imageDisplay=`${this.initialArticleDataWhenEdit.coverImage}`,r.style.display="block",this.articleForm.controls.coverImage.clearValidators(),this.articleForm.controls.coverImage.updateValueAndValidity()}},()=>{this.messageService.add({severity:"warn",detail:"Article inexistant, contactez le webmaster"})}))},()=>{this.messageService.add({severity:"warn",detail:"Article inconnu"})})}getUserConnected(){this.connectedUser=this.activatedRoute.snapshot.data.user}onCancelAddEditArticle(){this.location.back()}onSaveArticle(){if(this.isSaveButtonClicked=!0,this.articleForm.invalid)return;const e=new FormData;this.articleForm.get("title")?.value&&e.append("title",this.articleForm.get("title")?.value),this.articleForm.get("description")?.value&&e.append("description",this.articleForm.get("description")?.value),this.articleForm.get("date")?.value&&e.append("date",this.articleForm.get("date")?.value),this.articleForm.get("hour")?.value&&e.append("hour",this.articleForm.get("hour")?.value),this.articleForm.get("hasVideo")?.value&&e.append("hasVideo",this.articleForm.get("hasVideo")?.value),this.articleForm.get("videoLink")?.value&&e.append("videoLink",this.articleForm.get("videoLink")?.value),this.articleForm.get("coverImage")?.value&&e.append("coverImage",this.articleForm.get("coverImage")?.value),this.articleForm.get("content")?.value&&e.append("content",this.articleForm.get("content")?.value),this.articleForm.get("rubric")?.value&&e.append("rubricId",this.articleForm.get("rubric")?.value.id),e.append("userId",this.connectedUser.id),this.artcileService.addArticle(e).subscribe(i=>{this.messageService.add({severity:"success",detail:i.message}),(0,v.n)((0,C.H)(2e3)).then(()=>{this.location.back()})})}onEditArticle(){if(this.isEditButtonClicked=!0,this.articleForm.controls.title.value===this.initialArticleDataWhenEdit.title&&this.articleForm.controls.description.value===this.initialArticleDataWhenEdit.description&&this.articleForm.controls.date.value.getTime()===new Date(this.initialArticleDataWhenEdit.date).getTime()&&this.articleForm.controls.hour.value===this.initialArticleDataWhenEdit.hour&&this.articleForm.controls.content.value===this.initialArticleDataWhenEdit.content&&this.articleForm.controls.hasVideo.value===this.initialArticleDataWhenEdit.hasVideo&&this.articleForm.controls.videoLink.value===this.initialArticleDataWhenEdit.videoLink&&this.articleForm.controls.rubric.value.id===this.initialArticleDataWhenEdit.rubricId&&!this.isImageEdit)return void this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xe9e"});const e=new FormData;this.articleForm.get("title")?.value!=this.initialArticleDataWhenEdit.title&&e.append("title",this.articleForm.get("title")?.value),this.articleForm.get("description")?.value!=this.initialArticleDataWhenEdit.description&&e.append("description",this.articleForm.get("description")?.value),this.articleForm.get("date")?.value.getTime()!=new Date(this.initialArticleDataWhenEdit.date).getTime()&&e.append("date",this.articleForm.get("date")?.value),this.articleForm.get("hour")?.value!=this.initialArticleDataWhenEdit.hour&&e.append("hour",this.articleForm.get("hour")?.value),this.articleForm.get("hasVideo")?.value!=this.initialArticleDataWhenEdit.hasVideo&&e.append("hasVideo",this.articleForm.get("hasVideo")?.value),this.articleForm.get("videoLink")?.value!=this.initialArticleDataWhenEdit.videoLink&&e.append("videoLink",this.articleForm.get("videoLink")?.value),this.isImageEdit&&e.append("coverImage",this.articleForm.get("coverImage")?.value),this.articleForm.get("content")?.value!=this.initialArticleDataWhenEdit.content&&e.append("content",this.articleForm.get("content")?.value),this.articleForm.get("rubric")?.value.id!=this.initialArticleDataWhenEdit.rubricId&&e.append("rubricId",this.articleForm.get("rubric")?.value.id),e.append("userId",this.connectedUser.id),this.artcileService.editArticle(this.initialArticleDataWhenEdit.id,e).subscribe(i=>{"success"===i.status&&(this.messageService.add({severity:"success",detail:i.message}),(0,v.n)((0,C.H)(2e3)).then(()=>{this.location.back()}))},()=>{this.messageService.add({severity:"info",detail:"Programme inconnue"})})}showImagePreview(e){const i=e.target.files[0];if(i){this.isImageEdit=!0,this.articleForm.patchValue({coverImage:i}),this.formControls.coverImage.updateValueAndValidity();const r=new FileReader;r.onload=()=>{this.imageDisplay=r.result},r.readAsDataURL(i),document.getElementById("image-previewed").style.display="block"}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(h.n),t.Y36(s.ez),t.Y36(d.Ye),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-article-add-edit-container"]],standalone:!0,features:[t._Bn([s.ez]),t.jDz],decls:64,vars:26,consts:[[1,"article-add-edit-container"],[4,"ngIf","ngIfElse"],["editMode",""],[3,"formGroup"],[1,"left"],[1,"preview"],["id","image-previewed",3,"src"],[1,"upload"],[1,"input"],["for","image-input"],[1,"pi","pi-upload"],["type","file","id","image-input","accept","image/*",3,"change"],["class","p-error",4,"ngIf"],[1,"right"],[1,"row-one"],[1,"field"],["formControlName","rubric","placeholder","S\xe9lectionnez une rubrique d'article","filterBy","name","optionLabel","name",3,"options","filter","showClear"],["type","text","pInputText","","formControlName","title"],["type","text","pInputText","","formControlName","description"],[1,"row-two","calendar-bloc"],["placeholder","Entre l'heure","formControlName","hour","dateFormat","dd.mm.yy","timeSeparator",":","dataType","string",3,"showTime","readonlyInput","timeOnly"],["placeholder","Entrez la date","formControlName","date","dateFormat","dd/mm/yy",3,"showIcon","readonlyInput"],[1,"row-two","video-bloc"],["formControlName","hasVideo"],["type","text","pInputText","","formControlName","videoLink",3,"ngClass"],["formControlName","content"],["pTemplate","header"],["position","top-right"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],["type","button",1,"cancel",3,"click"],[1,"pi","pi-times"],[1,"pi","pi-pencil"],[1,"p-error"],[4,"ngIf"],[1,"ql-formats"],["value","1",1,"ql-header"],["value","2",1,"ql-header"],["value","false",1,"ql-header"],["type","button","aria-label","Bold",1,"ql-bold"],["type","button","aria-label","Italic",1,"ql-italic"],["type","button","aria-label","Underline",1,"ql-underline"],["type","button","value","ordered",1,"ql-list"],["type","button","value","bullet",1,"ql-list"],["type","button",1,"ql-link"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,it,12,0,"ng-container",1),t.YNc(2,nt,11,0,"ng-template",null,2,t.W1O),t.TgZ(4,"form",3)(5,"div",4)(6,"div",5),t._UZ(7,"img",6),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"label",9),t._UZ(11,"i",10),t._uU(12," Image de couverture "),t.qZA(),t.TgZ(13,"input",11),t.NdJ("change",function(a){return i.showImagePreview(a)}),t.qZA()(),t.YNc(14,ot,2,1,"div",12),t.qZA()(),t.TgZ(15,"div",13)(16,"div",14)(17,"div",15)(18,"label"),t._uU(19,"Rubrique de cet article"),t.qZA(),t._UZ(20,"p-dropdown",16),t.ALo(21,"async"),t.YNc(22,at,2,0,"small",12),t.qZA()(),t.TgZ(23,"div",14)(24,"div",15)(25,"label"),t._uU(26,"Titre de larticle"),t.qZA(),t._UZ(27,"input",17),t.YNc(28,ct,2,0,"small",12),t.qZA()(),t.TgZ(29,"div",14)(30,"div",15)(31,"label"),t._uU(32,"Description"),t.qZA(),t._UZ(33,"input",18),t.YNc(34,lt,2,0,"small",12),t.qZA()(),t.TgZ(35,"div",19)(36,"div",15)(37,"label"),t._uU(38,"Heure de l'\xe9v\xeanement"),t.qZA(),t._UZ(39,"p-calendar",20),t.YNc(40,st,2,0,"small",12),t.qZA(),t.TgZ(41,"div",15)(42,"label"),t._uU(43,"Date de quand l'\xe9v\xeanement a eu lieux"),t.qZA(),t._UZ(44,"p-calendar",21),t.YNc(45,dt,2,0,"small",12),t.qZA()(),t.TgZ(46,"div",22)(47,"div",15)(48,"label"),t._uU(49,"Contiendra une vid\xe9o?"),t.qZA(),t._UZ(50,"p-inputSwitch",23),t.qZA(),t.TgZ(51,"div",15)(52,"label"),t._uU(53,"Media video"),t.qZA(),t._UZ(54,"input",24),t.YNc(55,ut,2,0,"small",12),t.qZA()(),t.TgZ(56,"div",14)(57,"div",15)(58,"label"),t._uU(59,"Corps de l'article"),t.qZA(),t.TgZ(60,"p-editor",25),t.YNc(61,pt,10,0,"ng-template",26),t.qZA(),t.YNc(62,mt,2,0,"small",12),t.qZA()()()(),t._UZ(63,"p-toast",27),t.qZA()),2&e){const r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!i.isEditMode)("ngIfElse",r),t.xp6(3),t.Q6J("formGroup",i.articleForm),t.xp6(3),t.Q6J("src",i.imageDisplay,t.LSH),t.xp6(7),t.Q6J("ngIf",i.formControls.coverImage.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.xp6(6),t.Q6J("options",t.lcZ(21,23,i.articleRubrics$))("filter",!0)("showClear",!0),t.xp6(2),t.Q6J("ngIf",i.formControls.rubric.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.xp6(6),t.Q6J("ngIf",i.formControls.title.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.xp6(6),t.Q6J("ngIf",i.formControls.description.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.xp6(5),t.Q6J("showTime",!0)("readonlyInput",!0)("timeOnly",!0),t.xp6(1),t.Q6J("ngIf",i.formControls.hour.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.xp6(4),t.Q6J("showIcon",!0)("readonlyInput",!0),t.xp6(1),t.Q6J("ngIf",i.formControls.date.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.xp6(9),t.Q6J("ngClass",i.isMediaVideoInputIsToDisable?"disabledInput":"enabledInput"),t.xp6(1),t.Q6J("ngIf",i.formControls.videoLink.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.xp6(5),t.Akn(t.DdM(25,gt)),t.xp6(2),t.Q6J("ngIf",i.formControls.content.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked))}},dependencies:[d.O5,d.mk,d.Ov,m.U$,s.jx,g.EV,g.FN,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,b.j,b.o,A.Iu,A.Ql,T._8,T.f,et.A,w.kW,w.Lt,M.Z_,M.ML],styles:[".article-add-edit-container{display:flex;flex-direction:column;min-height:100vh}.article-add-edit-container .actions{display:flex;justify-content:flex-end;padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px}.article-add-edit-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;margin-left:10px}.article-add-edit-container .actions button i{margin-right:5px}.article-add-edit-container .actions .add{border:solid var(--project-primary-color);color:var(--project-primary-color)}.article-add-edit-container .actions .add:hover{color:#fff;background-color:var(--project-primary-color)}.article-add-edit-container .actions .cancel{border:solid gray;color:gray}.article-add-edit-container .actions .cancel:hover{color:#fff;background-color:gray}.article-add-edit-container form{display:flex;justify-content:center}.article-add-edit-container form .left{display:flex;flex-direction:column;align-items:center;width:275px;margin-right:20px}.article-add-edit-container form .left .preview{width:100%;height:250px;border-radius:5px;overflow:hidden;background-color:#d3d3d3}.article-add-edit-container form .left .preview img{width:100%;height:100%;display:none;object-fit:cover;object-position:top}.article-add-edit-container form .left .upload{display:flex;flex-direction:column;align-items:flex-start;width:100%;margin-top:15px}.article-add-edit-container form .left .upload .input{display:flex;flex-direction:column;width:100%}.article-add-edit-container form .left .upload .input input{display:none}.article-add-edit-container form .left .upload .input label{width:100%;height:50px;padding:5px 10px;background-color:#fff;color:var(--project-primary-color);border-radius:5px;cursor:pointer;border:solid var(--project-primary-color);display:flex;align-items:center;justify-content:center}.article-add-edit-container form .left .upload .input label:hover{transition:all .3 ease-in-out;background-color:var(--project-primary-color);color:#fff}.article-add-edit-container form .left .upload .input label i{margin-right:7px}.article-add-edit-container form .left .upload small{margin-top:10px}.article-add-edit-container form .right{display:flex;justify-content:center;flex-direction:column;width:700px;border-radius:7px;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.article-add-edit-container form .right .row-one{width:100%}.article-add-edit-container form .right .row-two{display:flex;justify-content:space-between}.article-add-edit-container form .right .calendar-bloc .field:first-child,.article-add-edit-container form .right .video-bloc .field:first-child{flex:1;margin-right:20px}.article-add-edit-container form .right .calendar-bloc .field:last-child,.article-add-edit-container form .right .video-bloc .field:last-child{flex:2}.article-add-edit-container form .right .calendar-bloc .field p-calendar,.article-add-edit-container form .right .video-bloc .field p-calendar{width:100%}.article-add-edit-container form .right .calendar-bloc .field p-calendar span,.article-add-edit-container form .right .video-bloc .field p-calendar span{width:100%}.article-add-edit-container form .right .field{display:flex;flex-direction:column;margin-bottom:20px;flex:1}.article-add-edit-container form .right .field label{margin-bottom:7px}.article-add-edit-container form .right .field small{margin:10px 0 0}.article-add-edit-container form .right .field .disabledInput{background-color:#d3d3d3}.article-add-edit-container form .right .field .enabledInput{background-color:none}.article-add-edit-container form .right .field .p-button{color:#fff;background:var(--project-primary-color);border:1px solid var(--project-primary-color)}.article-add-edit-container form .right .field .p-dropdown,.article-add-edit-container form .right .field .p-dropdown span{width:100%}@media all and (max-width: 990px){.add-replay form{width:100%}}@media all and (max-width: 990px){.add-replay form{padding:20px}}\n"],encapsulation:2}),n})();var ht=c(6256);function _t(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"h1",10),t._uU(2,"Cr\xe9er Une Rubrique"),t.qZA(),t.TgZ(3,"p",11),t._uU(4,"Cr\xe9ation d'une nouvelle rubrique d'articles"),t.qZA(),t.TgZ(5,"div",12)(6,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSaveRubric())}),t._UZ(7,"i",14),t._uU(8," Ajouter "),t.qZA(),t.TgZ(9,"button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onCancelAddEditRubric())}),t._UZ(10,"i",16),t._uU(11," Annuler "),t.qZA()(),t.BQk()}}function ft(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"h1",10),t._uU(1,"Modifier Une Rubrique"),t.qZA(),t.TgZ(2,"p",11),t._uU(3,"Modification d'une rubrique d'articles"),t.qZA(),t.TgZ(4,"div",12)(5,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onEditRubric())}),t._UZ(6,"i",17),t._uU(7," Modifier "),t.qZA(),t.TgZ(8,"button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onCancelAddEditRubric())}),t._UZ(9,"i",16),t._uU(10," Annuler "),t.qZA()()}}function bt(n,o){1&n&&(t.TgZ(0,"div",5)(1,"label"),t._uU(2,"Activer?"),t.qZA(),t._UZ(3,"p-inputSwitch",18),t.qZA())}function vt(n,o){1&n&&(t.TgZ(0,"small",19),t._uU(1,"Renseigner le nom de la rubrique"),t.qZA())}function Ct(n,o){1&n&&(t.TgZ(0,"small",19),t._uU(1,"Renseigner une courte description"),t.qZA())}let k=(()=>{class n{constructor(e,i,r,a,u,x){this.fb=e,this.artcileService=i,this.messageService=r,this.location=a,this.activatedRoute=u,this.authService=x,this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1}ngOnInit(){this.initForm(),this.checkEditMode(),this.getUserConnected()}initForm(){this.rubricForm=this.fb.group({name:["",l.kI.required],description:["",l.kI.required],isActive:[!1]})}get formControls(){return this.rubricForm.controls}checkEditMode(){this.activatedRoute.params.subscribe(e=>{e.id&&(this.isEditMode=!0,this.artcileService.getRubricById(e.id).subscribe(i=>{"success"===i.status&&(this.initialReplayDataWhenEdit=i.data,this.rubricForm.controls.name.setValue(this.initialReplayDataWhenEdit.name),this.rubricForm.controls.description.setValue(this.initialReplayDataWhenEdit.description),this.rubricForm.controls.isActive.setValue(this.initialReplayDataWhenEdit.isActive))},()=>{this.messageService.add({severity:"warn",detail:"Rubrique inexistant, contactez le webmaster"})}))},()=>{this.messageService.add({severity:"warn",detail:"Rubrique inconnue"})})}getUserConnected(){this.connectedUser=this.activatedRoute.snapshot.data.user}onCancelAddEditRubric(){this.location.back()}onSaveRubric(){if(this.isSaveButtonClicked=!0,this.rubricForm.invalid)return;const e={name:this.rubricForm.get("name")?.value,description:this.rubricForm.get("description")?.value,isActive:this.rubricForm.get("isActive")?.value,userId:this.connectedUser.id};this.artcileService.addRubric(e).subscribe(i=>{this.messageService.add({severity:"success",detail:i.message}),(0,v.n)((0,C.H)(2e3)).then(()=>{this.location.back()})})}onEditRubric(){if(this.isEditButtonClicked=!0,this.rubricForm.controls.name.value===this.initialReplayDataWhenEdit.name&&this.rubricForm.controls.description.value===this.initialReplayDataWhenEdit.description&&this.rubricForm.controls.isActive.value===this.initialReplayDataWhenEdit.isActive)return void this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xe9e"});let e={};this.rubricForm.controls.name.value!==this.initialReplayDataWhenEdit.name&&(e={...e,name:this.rubricForm.controls.name.value}),this.rubricForm.controls.description.value!==this.initialReplayDataWhenEdit.description&&(e={...e,description:this.rubricForm.controls.description.value}),this.rubricForm.controls.isActive.value!==this.initialReplayDataWhenEdit.isActive&&(e={...e,isActive:this.rubricForm.controls.isActive.value}),e={...e,userId:this.connectedUser.id},this.artcileService.editRubric(this.initialReplayDataWhenEdit.id,e).subscribe(i=>{"success"===i.status&&(this.messageService.add({severity:"success",detail:i.message}),(0,v.n)((0,C.H)(2e3)).then(()=>{this.location.back()}))},()=>{this.messageService.add({severity:"info",detail:"Programme inconnue"})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(h.n),t.Y36(s.ez),t.Y36(d.Ye),t.Y36(p.gz),t.Y36(ht.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-article-rubric-add-edit-container"]],standalone:!0,features:[t._Bn([s.ez]),t.jDz],decls:17,vars:6,consts:[[1,"article-rubric-add-edit-container"],[4,"ngIf","ngIfElse"],["editMode",""],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["type","text","pInputText","","formControlName","name"],["class","p-error",4,"ngIf"],["type","text","pInputText","","formControlName","description"],["position","top-right"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],["type","button",1,"cancel",3,"click"],[1,"pi","pi-times"],[1,"pi","pi-pencil"],["formControlName","isActive"],[1,"p-error"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,_t,12,0,"ng-container",1),t.YNc(2,ft,11,0,"ng-template",null,2,t.W1O),t.TgZ(4,"form",3),t.YNc(5,bt,4,0,"div",4),t.TgZ(6,"div",5)(7,"label"),t._uU(8,"Nom de la rubrique"),t.qZA(),t._UZ(9,"input",6),t.YNc(10,vt,2,0,"small",7),t.qZA(),t.TgZ(11,"div",5)(12,"label"),t._uU(13,"Description"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,Ct,2,0,"small",7),t.qZA()(),t._UZ(16,"p-toast",9),t.qZA()),2&e){const r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!i.isEditMode)("ngIfElse",r),t.xp6(3),t.Q6J("formGroup",i.rubricForm),t.xp6(1),t.Q6J("ngIf",i.isEditMode),t.xp6(5),t.Q6J("ngIf",i.formControls.name.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.xp6(5),t.Q6J("ngIf",i.formControls.description.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked))}},dependencies:[d.O5,m.U$,g.EV,g.FN,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,b.j,b.o,A.Iu,A.Ql],styles:[".article-rubric-add-edit-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;margin-left:10px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{border:solid var(--project-primary-color);color:var(--project-primary-color)}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--project-primary-color)}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{border:solid gray;color:gray}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]:hover{color:#fff;background-color:gray}.article-rubric-add-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:500px;border-radius:7px;margin:0 auto;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;flex:1}.article-rubric-add-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:7px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin:10px 0 0}@media all and (max-width: 990px){.add-rubric[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}}@media all and (max-width: 990px){.add-rubric[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:20px}}"]}),n})();const At=[{path:"liste-par-type-de-rubrique",component:tt},{path:"creer-article",component:R},{path:"modifier-article/:id",component:R},{path:"liste-rubriques",component:Y},{path:"creer-rubrique",component:k},{path:"modifier-rubrique/:id",component:k}];let xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(At),p.Bz]}),n})(),yt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,xt]}),n})()}}]);