"use strict";(self.webpackChunkforyou_admin=self.webpackChunkforyou_admin||[]).push([[717],{8717:(b,l,a)=>{a.r(l),a.d(l,{ValidateAccountModule:()=>C});var u=a(6895),r=a(298),p=a(1816),d=a(2453),m=a(805),t=a(8256),g=a(1802),f=a(6256);function h(e,i){1&e&&(t.ynx(0),t._UZ(1,"i",9),t.BQk())}function v(e,i){1&e&&t._UZ(0,"i",10)}function A(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t._uU(2," Vous pouvez vous connectez "),t.qZA(),t.TgZ(3,"button",12),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.onAskForMailValidation(o.associatedUser.id))}),t._uU(4," Redemander un mail de v\xe9rification "),t.qZA(),t.BQk()}}function x(e,i){}function y(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",6)(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Nous sommes heureux de vous voir."),t.qZA()(),t.YNc(6,h,2,0,"ng-container",3),t.YNc(7,v,1,0,"ng-template",null,7,t.W1O),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.YNc(11,A,5,0,"ng-container",3),t.YNc(12,x,0,0,"ng-template",null,8,t.W1O),t.BQk()),2&e){const n=t.MAs(8),c=t.MAs(13),o=t.oxw();t.xp6(3),t.AsE("Bonjour, ",o.associatedUser.firstname," ",o.associatedUser.lastname,""),t.xp6(3),t.Q6J("ngIf",o.isTokenVaild)("ngIfElse",n),t.xp6(4),t.Oqu(o.message),t.xp6(1),t.Q6J("ngIf",o.isTokenVaild)("ngIfElse",c)}}function T(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"Nous ne trouvons aucun compte associ\xe9."),t.qZA())}const V=[{path:"",component:(()=>{class e{constructor(n,c,o,s,k){this.activatedRoute=n,this.userService=c,this.messageService=o,this.router=s,this.authService=k}ngOnInit(){this.redirectOnAlreadyLog(),this.getTokenFromUrl(),this.getAssociatedUser(this.emailVerifyToken),this.verifyToken()}redirectOnAlreadyLog(){this.authService.isLogged$.subscribe(n=>{!0===n&&this.router.navigateByUrl("")})}getTokenFromUrl(){this.activatedRoute.queryParams.subscribe(n=>{this.emailVerifyToken=n.token,localStorage.setItem("tokenToVerifyEmail",this.emailVerifyToken)})}verifyToken(){this.dataSubscription=this.userService.verifyEmail().subscribe({next:n=>{this.isTokenVaild=!0,this.message=n.message},error:n=>{this.isTokenVaild=!1,this.message=n.message}})}getAssociatedUser(n){const o=p.Z(n).sub;this.userService.getUserById(o).subscribe({next:s=>{this.isThereAssociatedUserToToken=!0,this.associatedUser=s.data},error:s=>{this.isThereAssociatedUserToToken=!1}})}onAskForMailValidation(n){this.dataSubscription=this.userService.askNewVerifyEmail(n).subscribe({next:c=>{this.messageService.add({severity:"success",detail:c.message})}})}ngOnDestroy(){this.dataSubscription&&this.dataSubscription.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.gz),t.Y36(g.f),t.Y36(m.ez),t.Y36(r.F0),t.Y36(f.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-validate-account-container"]],standalone:!0,features:[t._Bn([m.ez]),t.jDz],decls:9,vars:2,consts:[[1,"validate-account-container"],[1,"header"],[1,"content","my-container"],[4,"ngIf","ngIfElse"],["noRelativeUser",""],["position","top-right","label","Sticky"],[1,"grettings"],["errorValid",""],["tokenNotValid",""],[1,"pi","pi-check-circle"],[1,"pi","pi-times-circle"],["routerLink","/se-connecter"],[3,"click"]],template:function(n,c){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Amadou B\xc2 2024"),t.qZA()(),t.TgZ(4,"div",2),t.YNc(5,y,14,7,"ng-container",3),t.YNc(6,T,2,0,"ng-template",null,4,t.W1O),t.qZA(),t._UZ(8,"p-toast",5),t.qZA()),2&n){const o=t.MAs(7);t.xp6(5),t.Q6J("ngIf",!0===c.isThereAssociatedUserToToken)("ngIfElse",o)}},dependencies:[u.O5,r.rH,d.EV,d.FN],styles:[".validate-account-container{flex-direction:column;display:flex;width:100%;justify-content:center}.validate-account-container .header{text-align:center;font-size:2rem;color:#fff;background-color:#000;padding-top:2rem;padding-bottom:2rem}.validate-account-container .content{width:100%;display:flex;flex-direction:column;align-items:center;padding-top:60px}.validate-account-container .content p{text-align:center}.validate-account-container .content .grettings{display:flex;flex-direction:column;width:100%;text-align:center;margin-bottom:30px;align-items:center}.validate-account-container .content .grettings p:first-child{font-size:1.7rem;margin-bottom:20px;font-weight:700}.validate-account-container .content .grettings p:last-child{font-size:1.2rem}.validate-account-container .content .pi{font-size:2rem;margin-bottom:15px}.validate-account-container .content .pi-check-circle{color:green}.validate-account-container .content .pi-times-circle{color:red}.validate-account-container .content p{max-width:700px;line-height:23px;font-size:16px}.validate-account-container .content button{margin:30px auto auto;padding:10px 30px;border:1px solid black;cursor:pointer;color:#000;width:-moz-fit-content;width:fit-content;transition:all .1s ease-in-out;font-size:1.1rem}.validate-account-container .content button:hover{border:1px solid var(--project-primary-color);background-color:var(--project-primary-color);color:#fff}\n"],encapsulation:2}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.Bz.forChild(V),r.Bz]}),e})(),C=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,_]}),e})()}}]);