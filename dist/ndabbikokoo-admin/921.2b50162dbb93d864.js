"use strict";(self.webpackChunkndabbikokoo_admin=self.webpackChunkndabbikokoo_admin||[]).push([[921],{3302:(F,l,a)=>{a.r(l),a.d(l,{ValidateAccountModule:()=>C});var d=a(177),r=a(5678),p=a(8350),u=a(6504),m=a(4101),t=a(4438),g=a(9137),f=a(6399);function h(e,s){1&e&&(t.qex(0),t.nrm(1,"i",9),t.bVm())}function v(e,s){1&e&&t.nrm(0,"i",10)}function k(e,s){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"button",11),t.EFF(2," Vous pouvez vous connectez "),t.k0s(),t.j41(3,"button",12),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.onAskForMailValidation(o.associatedUser.id))}),t.EFF(4," Redemander un mail de v\xe9rification "),t.k0s(),t.bVm()}}function x(e,s){}function b(e,s){if(1&e&&(t.qex(0),t.j41(1,"div",8)(2,"p"),t.EFF(3),t.k0s(),t.j41(4,"p"),t.EFF(5,"Nous sommes heureux de vous voir."),t.k0s()(),t.DNE(6,h,2,0,"ng-container",6)(7,v,1,0,"ng-template",null,1,t.C5r),t.j41(9,"p"),t.EFF(10),t.k0s(),t.DNE(11,k,5,0,"ng-container",6)(12,x,0,0,"ng-template",null,2,t.C5r),t.bVm()),2&e){const n=t.sdS(8),i=t.sdS(13),o=t.XpG();t.R7$(3),t.Lme("Bonjour, ",o.associatedUser.firstname," ",o.associatedUser.lastname,""),t.R7$(3),t.Y8G("ngIf",o.isTokenVaild)("ngIfElse",n),t.R7$(4),t.JRh(o.message),t.R7$(),t.Y8G("ngIf",o.isTokenVaild)("ngIfElse",i)}}function V(e,s){1&e&&(t.j41(0,"p"),t.EFF(1,"Nous ne trouvons aucun compte associ\xe9."),t.k0s())}const y=[{path:"",component:(()=>{class e{constructor(n,i,o,c,A){this.activatedRoute=n,this.userService=i,this.messageService=o,this.router=c,this.authService=A}ngOnInit(){this.redirectOnAlreadyLog(),this.getTokenFromUrl(),this.getAssociatedUser(this.emailVerifyToken),this.verifyToken()}redirectOnAlreadyLog(){this.authService.isLogged$.subscribe(n=>{!0===n&&this.router.navigateByUrl("")})}getTokenFromUrl(){this.activatedRoute.queryParams.subscribe(n=>{this.emailVerifyToken=n.token,localStorage.setItem("tokenToVerifyEmail",this.emailVerifyToken)})}verifyToken(){this.dataSubscription=this.userService.verifyEmail().subscribe({next:n=>{this.isTokenVaild=!0,this.message=n.message},error:n=>{this.isTokenVaild=!1,this.message=n.message}})}getAssociatedUser(n){const o=p.A(n).sub;this.userService.getUserById(o).subscribe({next:c=>{this.isThereAssociatedUserToToken=!0,this.associatedUser=c.data},error:c=>{this.isThereAssociatedUserToToken=!1}})}onAskForMailValidation(n){this.dataSubscription=this.userService.askNewVerifyEmail(n).subscribe({next:i=>{this.messageService.add({severity:"success",detail:i.message})}})}ngOnDestroy(){this.dataSubscription&&this.dataSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(r.nX),t.rXU(g.g),t.rXU(m.bg),t.rXU(r.Ix),t.rXU(f.u))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-validate-account-container"]],standalone:!0,features:[t.Jv_([m.bg]),t.aNF],decls:9,vars:2,consts:[["noRelativeUser",""],["errorValid",""],["tokenNotValid",""],[1,"validate-account-container"],[1,"header"],[1,"content","my-container"],[4,"ngIf","ngIfElse"],["position","top-right","label","Sticky"],[1,"grettings"],[1,"pi","pi-check-circle"],[1,"pi","pi-times-circle"],["routerLink","/se-connecter"],[3,"click"]],template:function(i,o){if(1&i&&(t.j41(0,"div",3)(1,"div",4)(2,"span"),t.EFF(3,"Amadou B\xc2 2024"),t.k0s()(),t.j41(4,"div",5),t.DNE(5,b,14,7,"ng-container",6)(6,V,2,0,"ng-template",null,0,t.C5r),t.k0s(),t.nrm(8,"p-toast",7),t.k0s()),2&i){const c=t.sdS(7);t.R7$(5),t.Y8G("ngIf",!0===o.isThereAssociatedUserToToken)("ngIfElse",c)}},dependencies:[d.bT,r.Wk,u.MB,u.y8],styles:[".validate-account-container{flex-direction:column;display:flex;width:100%;justify-content:center}.validate-account-container .header{text-align:center;font-size:2rem;color:#fff;background-color:#000;padding-top:2rem;padding-bottom:2rem}.validate-account-container .content{width:100%;display:flex;flex-direction:column;align-items:center;padding-top:60px}.validate-account-container .content p{text-align:center}.validate-account-container .content .grettings{display:flex;flex-direction:column;width:100%;text-align:center;margin-bottom:30px;align-items:center}.validate-account-container .content .grettings p:first-child{font-size:1.7rem;margin-bottom:20px;font-weight:700}.validate-account-container .content .grettings p:last-child{font-size:1.2rem}.validate-account-container .content .pi{font-size:2rem;margin-bottom:15px}.validate-account-container .content .pi-check-circle{color:green}.validate-account-container .content .pi-times-circle{color:red}.validate-account-container .content p{max-width:700px;line-height:23px;font-size:16px}.validate-account-container .content button{margin:30px auto auto;padding:10px 30px;border:1px solid black;cursor:pointer;color:#000;width:-moz-fit-content;width:fit-content;transition:all .1s ease-in-out;font-size:1.1rem}.validate-account-container .content button:hover{border:1px solid var(--project-primary-color);background-color:var(--project-primary-color);color:#fff}\n"],encapsulation:2})}}return e})()}];let T=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[r.iI.forChild(y),r.iI]})}}return e})(),C=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[d.MD,T]})}}return e})()}}]);