"use strict";(self.webpackChunkndabbikokoo_admin=self.webpackChunkndabbikokoo_admin||[]).push([[337],{3337:(I,g,n)=>{n.r(g),n.d(g,{ResetPasswordModule:()=>A});var w=n(177),p=n(5678),c=n(4341),m=n(4101),x=n(3207),v=n(9908),e=n(4438),h=n(6399),b=n(9137),F=n(6504),R=n(5335);function k(r,y){1&r&&(e.qex(0),e.j41(1,"div",13),e.nrm(2,"img",14),e.j41(3,"h1"),e.EFF(4,"Amadou B\xc2 2024"),e.k0s()(),e.bVm())}function P(r,y){if(1&r&&(e.qex(0),e.j41(1,"p",15),e.EFF(2),e.k0s(),e.bVm()),2&r){const a=e.XpG();e.R7$(2),e.JRh(a.message)}}function C(r,y){if(1&r&&(e.qex(0),e.j41(1,"p",16),e.EFF(2),e.k0s(),e.bVm()),2&r){const a=e.XpG();e.R7$(2),e.JRh(a.message)}}function i(r,y){1&r&&(e.j41(0,"p",17),e.EFF(1,"Pour cr\xe9er un mot de pase s\xe9curis\xe9, vous pouvez suivre les suggestions ci-apr\xe8s"),e.k0s(),e.j41(2,"ul",18)(3,"li",19),e.EFF(4,"Au moins un caract\xe8re en minuscule"),e.k0s(),e.j41(5,"li",19),e.EFF(6,"Au moins un caract\xe8re en majuscule"),e.k0s(),e.j41(7,"li",19),e.EFF(8,"Au moins un chiffre"),e.k0s(),e.j41(9,"li",19),e.EFF(10,"Au moins 8 caract\xe8res"),e.k0s()())}function t(r,y){1&r&&(e.j41(0,"small",20),e.EFF(1,"Renseigner votre mot de passe"),e.k0s())}function s(r,y){1&r&&(e.j41(0,"small",20),e.EFF(1,"Confirmer votre mot de passe"),e.k0s())}const d=[{path:"",component:(()=>{class r{constructor(a,l,f,j,S){this.fb=a,this.router=l,this.authService=f,this.userService=j,this.activatedRoute=S,this.isSaveButtonClicked=!1,this.isMessageErrorDisplayed=!1,this.isUserConnected=!1,this.isRequestFailed=!1,this.isRequestSucceed=!1,this.resetPasswordForm=this.fb.group({password:["",[c.k0.required]],confirmPassword:["",[c.k0.required]]})}ngOnInit(){this.authService.isLogged$.subscribe(a=>{this.isUserConnected=a}),this.getTokenFromUrl()}get f(){return this.resetPasswordForm.controls}getTokenFromUrl(){this.activatedRoute.queryParams.subscribe(a=>{this.changePasswordToken=a.token,localStorage.setItem("changePasswordToken",this.changePasswordToken)})}onResetPassword(){if(this.isSaveButtonClicked=!0,!this.resetPasswordForm.invalid)return 0!==this.f.password.value.localeCompare(this.f.confirmPassword.value)?(this.isRequestSucceed=!1,this.isRequestFailed=!0,void(this.message="Les mots de passe ne sont pas identiques")):void this.userService.resetPassport(this.f.password.value).subscribe({next:l=>{this.isRequestFailed=!1,this.isRequestSucceed=!0,this.message=l.message,(0,x.s)((0,v.O)(4e3)).then(()=>{this.authService.logout(),this.router.navigateByUrl("se-connecter")})},error:l=>{this.isRequestSucceed=!1,this.isRequestFailed=!0,this.message=l}})}static{this.\u0275fac=function(l){return new(l||r)(e.rXU(c.ze),e.rXU(p.Ix),e.rXU(h.u),e.rXU(b.g),e.rXU(p.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-reset-password"]],features:[e.Jv_([m.bg])],decls:24,vars:8,consts:[[1,"reset-password"],[1,"content","my-container"],[1,"form-bloc"],[4,"ngIf"],[1,"right"],[3,"submit","formGroup"],[1,"field"],["formControlName","password","promptLabel"," ","styleClass","p-password","weakLabel","Mot de passe faible","mediumLabel","Mot de passe moyen","strongLabel","Mot de passe fort"],["pTemplate","header"],["class","p-error",4,"ngIf"],["formControlName","confirmPassword","styleClass","p-password p-component p-inputwrapper p-input-icon-right",3,"toggleMask","feedback"],["type","submit"],["position","top-right"],[1,"left"],["src","../../../../../assets/img/login/icon.png","alt","logo"],[1,"message-request-error"],[1,"message-request-succeed"],[2,"margin-bottom","10px"],[2,"margin-bottom","10px","list-style-position","inside"],[2,"font-size","0.92em"],[1,"p-error"]],template:function(l,f){1&l&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,k,5,0,"ng-container",3),e.j41(4,"div",4)(5,"form",5),e.bIt("submit",function(){return f.onResetPassword()}),e.DNE(6,P,3,1,"ng-container",3)(7,C,3,1,"ng-container",3),e.j41(8,"h1"),e.EFF(9,"Nouveau Mot De Passe"),e.k0s(),e.j41(10,"div",6)(11,"label"),e.EFF(12,"Mot de passe"),e.k0s(),e.j41(13,"p-password",7),e.DNE(14,i,11,0,"ng-template",8),e.k0s(),e.DNE(15,t,2,0,"small",9),e.k0s(),e.j41(16,"div",6)(17,"label"),e.EFF(18,"Confirmer mot de passe"),e.k0s(),e.nrm(19,"p-password",10),e.DNE(20,s,2,0,"small",9),e.k0s(),e.j41(21,"button",11),e.EFF(22," Valider "),e.k0s()(),e.nrm(23,"p-toast",12),e.k0s()()()()),2&l&&(e.R7$(3),e.Y8G("ngIf",!f.isUserConnected),e.R7$(2),e.Y8G("formGroup",f.resetPasswordForm),e.R7$(),e.Y8G("ngIf",f.isRequestFailed),e.R7$(),e.Y8G("ngIf",f.isRequestSucceed),e.R7$(8),e.Y8G("ngIf",f.f.password.invalid&&f.isSaveButtonClicked),e.R7$(4),e.Y8G("toggleMask",!0)("feedback",!1),e.R7$(),e.Y8G("ngIf",f.f.confirmPassword.invalid&&f.isSaveButtonClicked))},dependencies:[w.bT,c.qT,c.BC,c.cb,c.j4,c.JD,m.Ei,F.y8,R._2],styles:[".reset-password{display:flex;align-items:center;justify-content:center}.reset-password .content{display:flex;justify-content:center;align-items:center;width:100%;min-height:100vh}.reset-password .content .form-bloc{display:flex;overflow:hidden;border-radius:7px;width:-moz-fit-content;width:fit-content;box-shadow:#00000059 0 5px 15px;height:-moz-fit-content;height:fit-content}.reset-password .content .form-bloc .left{background:var(--project-primary-color);width:300px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;padding:20px}.reset-password .content .form-bloc .left img{width:115px}.reset-password .content .form-bloc .left h1{text-align:center;margin:20px 0}.reset-password .content .form-bloc .right{width:-moz-fit-content;width:fit-content;background-color:#fff;height:455px;display:flex;align-items:center;justify-content:center}.reset-password .content .form-bloc .right form{display:flex;flex-direction:column;width:300px;margin:0 50px}.reset-password .content .form-bloc .right form .message-request-error{padding:5px;text-align:center;margin-bottom:20px;background-color:#fddddd;color:red;font-size:.9em}.reset-password .content .form-bloc .right form .message-request-succeed{padding:5px;text-align:center;margin-bottom:20px;background-color:#f3e2b7;color:#d19706;font-size:.9em}.reset-password .content .form-bloc .right form h1{margin-bottom:10px;text-align:left}.reset-password .content .form-bloc .right form .infos{margin-bottom:35px}.reset-password .content .form-bloc .right form .field{display:flex;flex-direction:column;margin-bottom:15px;width:100%}.reset-password .content .form-bloc .right form .field label{margin-bottom:7px}.reset-password .content .form-bloc .right form .field small{margin:10px 0 0}.reset-password .content .form-bloc .right form .field .p-password,.reset-password .content .form-bloc .right form .field .p-password .p-inputtext{width:100%}.reset-password .content .form-bloc .right form .forgotten-password{text-align:right;cursor:pointer;color:#569672;transition:all .2s ease-in-out}.reset-password .content .form-bloc .right form .forgotten-password:hover{text-decoration:underline}.reset-password .content .form-bloc .right form button{margin-top:10px;padding:10px;border:1px solid black;background-color:#fff;transition:all .2s ease-in-out;font-size:1.1em}.reset-password .content .form-bloc .right form button:hover{color:#fff;background-color:#000}.reset-password .content-connected{align-items:flex-start!important}\n"],encapsulation:2})}}return r})()}];let u=(()=>{class r{static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[p.iI.forChild(d),p.iI]})}}return r})();var E=n(6419);let A=(()=>{class r{static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[w.MD,u,c.X1,E.r]})}}return r})()},3207:(I,g,n)=>{n.d(g,{s:()=>p});var w=n(9350);function p(c,m){const x="object"==typeof m;return new Promise((v,e)=>{let b,h=!1;c.subscribe({next:F=>{b=F,h=!0},error:e,complete:()=>{h?v(b):x?v(m.defaultValue):e(new w.G)}})})}},9908:(I,g,n)=>{n.d(g,{O:()=>C});var w=n(1985),p=n(8359);class c extends p.yU{constructor(t,s){super()}schedule(t,s=0){return this}}const m={setInterval(i,t,...s){const{delegate:o}=m;return o?.setInterval?o.setInterval(i,t,...s):setInterval(i,t,...s)},clearInterval(i){const{delegate:t}=m;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};var x=n(7908);const e={now:()=>(e.delegate||Date).now(),delegate:void 0};class h{constructor(t,s=h.now){this.schedulerActionCtor=t,this.now=s}schedule(t,s=0,o){return new this.schedulerActionCtor(this,t).schedule(o,s)}}h.now=e.now;const R=new class b extends h{constructor(t,s=h.now){super(t,s),this.actions=[],this._active=!1}flush(t){const{actions:s}=this;if(this._active)return void s.push(t);let o;this._active=!0;do{if(o=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,o){for(;t=s.shift();)t.unsubscribe();throw o}}}(class v extends c{constructor(t,s){super(t,s),this.scheduler=t,this.work=s,this.pending=!1}schedule(t,s=0){var o;if(this.closed)return this;this.state=t;const d=this.id,u=this.scheduler;return null!=d&&(this.id=this.recycleAsyncId(u,d,s)),this.pending=!0,this.delay=s,this.id=null!==(o=this.id)&&void 0!==o?o:this.requestAsyncId(u,this.id,s),this}requestAsyncId(t,s,o=0){return m.setInterval(t.flush.bind(t,this),o)}recycleAsyncId(t,s,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return s;null!=s&&m.clearInterval(s)}execute(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(t,s);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,s){let d,o=!1;try{this.work(t)}catch(u){o=!0,d=u||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:t,scheduler:s}=this,{actions:o}=s;this.work=this.state=this.scheduler=null,this.pending=!1,(0,x.o)(o,this),null!=t&&(this.id=this.recycleAsyncId(s,t,null)),this.delay=null,super.unsubscribe()}}});var k=n(9470);function C(i=0,t,s=R){let o=-1;return null!=t&&((0,k.m)(t)?s=t:o=t),new w.c(d=>{let u=function P(i){return i instanceof Date&&!isNaN(i)}(i)?+i-s.now():i;u<0&&(u=0);let E=0;return s.schedule(function(){d.closed||(d.next(E++),0<=o?this.schedule(void 0,o):d.complete())},u)})}}}]);