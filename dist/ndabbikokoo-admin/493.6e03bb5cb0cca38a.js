"use strict";(self.webpackChunkndabbikokoo_admin=self.webpackChunkndabbikokoo_admin||[]).push([[493],{4493:(Q,h,r)=>{r.r(h),r.d(h,{ReplayModule:()=>K});var c=r(177),y=r(5678),o=r(4101),T=r(6614),e=r(4438),u=r(5493),w=r(4149),g=r(261);function I(n,l){1&n&&(e.qex(0),e.j41(1,"span"),e.EFF(2,"Aucun replay n'a encore \xe9t\xe9 enregistr\xe9 pour le moment."),e.k0s(),e.bVm())}function L(n,l){1&n&&(e.j41(0,"tr"),e.nrm(1,"th")(2,"th"),e.j41(3,"th"),e.EFF(4,"Titre"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Activ\xe9e?"),e.k0s(),e.j41(7,"th",8),e.EFF(8,"Actions"),e.k0s()())}function S(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",16)(1,"i",17),e.bIt("click",function(){e.eBV(t);const a=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.editReplayEventTrigger(a.id))}),e.k0s(),e.j41(2,"i",18),e.bIt("click",function(){e.eBV(t);const a=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.deleteReplayEventTrigger(a.id))}),e.k0s()()}}function A(n,l){if(1&n){const t=e.RV6();e.j41(0,"tr",9),e.nrm(1,"td",10),e.j41(2,"td"),e.nrm(3,"span",11),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.nrm(7,"div",12),e.k0s(),e.j41(8,"td",13)(9,"i",14),e.bIt("click",function(a){e.eBV(t);const s=e.sdS(11);return e.Njj(s.toggle(a))}),e.k0s(),e.j41(10,"p-overlayPanel",null,1),e.DNE(12,S,3,0,"ng-template",15),e.k0s()()()}if(2&n){const t=l.$implicit;e.Y8G("pReorderableRow",l.rowIndex),e.R7$(5),e.JRh(t.title),e.R7$(2),e.Y8G("ngClass",!0===t.isActive?"active-replay":"")}}function O(n,l){if(1&n){const t=e.RV6();e.j41(0,"p-table",5),e.bIt("onRowReorder",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onRowReorder())}),e.DNE(1,L,9,0,"ng-template",6)(2,A,13,3,"ng-template",7),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("value",t.currentReplayList)}}function B(n,l){if(1&n&&(e.qex(0),e.j41(1,"div",3),e.DNE(2,I,3,0,"ng-container",4)(3,O,3,1,"ng-template",null,0,e.C5r),e.k0s(),e.bVm()),2&n){const t=e.sdS(4),i=e.XpG();e.R7$(2),e.Y8G("ngIf",0==(null==i.currentReplayList?null:i.currentReplayList.length))("ngIfElse",t)}}let D=(()=>{class n{constructor(){this.editReplayTypeEvent=new e.bkB,this.deleteReplayEvent=new e.bkB,this.itemsOrderChangedEvent=new e.bkB}onRowReorder(){this.itemsOrderChangedEvent.emit({firstList:this._firstreplayList,currentList:this.currentReplayList})}editReplayEventTrigger(t){this.editReplayTypeEvent.emit(t)}deleteReplayEventTrigger(t){this.deleteReplayEvent.emit(t)}ngOnChanges(t){t.currentReplayList.currentValue&&(this._firstreplayList=[...this.currentReplayList])}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-replay-list"]],inputs:{currentReplayList:"currentReplayList"},outputs:{editReplayTypeEvent:"editReplayTypeEvent",deleteReplayEvent:"deleteReplayEvent",itemsOrderChangedEvent:"itemsOrderChangedEvent"},standalone:!0,features:[e.Jv_([o.bg,o.td]),e.OA$,e.aNF],decls:1,vars:1,consts:[["tableau",""],["op",""],[4,"ngIf"],[1,"replay-list"],[4,"ngIf","ngIfElse"],["responsiveLayout","scroll",3,"onRowReorder","value"],["pTemplate","header"],["pTemplate","body"],[1,"last-column"],[3,"pReorderableRow"],["pReorderableRowHandle","",1,"row-reorder-handler"],[1,"pi","pi-align-justify"],[1,"default-state",3,"ngClass"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(i,a){1&i&&e.DNE(0,B,5,2,"ng-container",2),2&i&&e.Y8G("ngIf",a.currentReplayList)},dependencies:[c.bT,u.bG,u.XI,o.Ei,u.UG,u.ak,w.z_,g.d,g.j,c.YU],styles:[".replay-list{display:flex;flex-direction:column}.replay-list p-table{width:100%;margin:auto;box-shadow:#00000029 0 1px 4px}.replay-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr{position:relative;transition:all .8s ease-in-out}.replay-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr .row-reorder-handler{position:absolute;top:0;left:0;width:100%;height:100%}.replay-list .last-column{text-align:right}.replay-list .default-state{height:15px;width:15px;border-radius:50%;background-color:#cbcbcb}.replay-list .active-replay{background-color:green}.replay-list .row-actions{text-align:right;position:relative}.replay-list .row-actions i{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.replay-list .row-actions i:hover{border:1.5px solid #191922}.replay-list .p-datatable .p-datatable-tbody>tr>td{padding:.5rem 1rem!important}.row-actions-event{display:flex;flex-direction:column}.row-actions-event i{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event .pi-trash{color:red;border:1px solid red}.row-actions-event .pi-trash:hover{color:#fff;background-color:red}.row-actions-event .pi-pencil{color:green;border:1px solid green}.row-actions-event .pi-pencil:hover{color:#fff;background-color:green}.p-overlaypanel .p-overlaypanel-content{padding:7px}@media all and (max-width: 990px){.replay-list p-table{width:100%}}\n"],encapsulation:2})}}return n})();var m=r(6504),f=r(5661),v=r(1626),G=r(4412),b=r(6354),R=r(5312);let _=(()=>{class n{constructor(t){this.http=t,this.addOrEdit$=new G.t(!0),this.baseUrlReplays=R.c.baseUrl+"replays/",this.baseUrlYoutubeApi=R.c.baseUrl+"youtube/",this.httpOptions={headers:new v.Lr({"Content-Type":"application/json"})}}getReplaysList(){return this.http.get(this.baseUrlReplays).pipe((0,b.T)(({data:i})=>i))}getReplayById(t){return this.http.get(this.baseUrlReplays+`${t}`)}addReplay(t){return this.http.post(this.baseUrlReplays,t,this.httpOptions)}editReplay(t,i){return this.http.put(this.baseUrlReplays+`${t}`,i)}deleteReplay(t){return this.http.delete(this.baseUrlReplays+`${t}`)}getVideoListByReplayId(t){return this.http.get(this.baseUrlYoutubeApi+`playlists/${t}/videos`)}getListOfReplaysOnYoutube(){return this.http.get(this.baseUrlYoutubeApi+"playlists/")}updateReplayListOrder(t){return this.http.put(this.baseUrlReplays+"update-replay-list-order",t).pipe((0,b.T)(({message:s})=>s))}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(v.Qq))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var U=r(6757);const N=()=>({width:"50vw"}),V=()=>({"960px":"75vw","640px":"100vw"});function X(n,l){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",10),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.setNewItemsOrder())}),e.nrm(2,"i",11),e.EFF(3," Sauvegarder l'odre "),e.k0s(),e.bVm()}}let $=(()=>{class n{constructor(t,i,a,s,d){this.replayService=t,this.messageService=i,this.confirmationService=a,this.reorderUtils=s,this.router=d,this.areThereNewOrderToSave=!1,this.subscriptions=[]}ngOnInit(){this.getReplaysList()}getReplaysList(){this.replaysList$=this.replayService.getReplaysList()}onReOrderDetect(t){this.firstOrderedReplayList=t.firstList,this.currentOrderedReplayList=t.currentList,this.areThereNewOrderToSave=this.reorderUtils.areArraysEquals(this.firstOrderedReplayList,this.currentOrderedReplayList)}onEditReplayByIdDetect(t){const i=t;this.subscriptions.push(this.replayService.getReplayById(i).subscribe({next:()=>{this.router.navigate([`replays/modifier/${i}`],{queryParamsHandling:"preserve"})},error:a=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}}))}onDeleteReplayByIdDetect(t){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer ce type de Replay?",accept:()=>{this.subscriptions.push(this.replayService.deleteReplay(t).subscribe({next:a=>{this.getReplaysList(),this.messageService.add({severity:"success",detail:a.message})},error:a=>{this.messageService.add({severity:"error",detail:"Erreur syst\xe8me: faire appel au webmaster"})}}))},reject:i=>{i===o.TJ.REJECT&&this.messageService.add({severity:"info",detail:"Suppression annul\xe9e"})}})}setNewItemsOrder(){const t=this.reorderUtils.findDifferentIdsAndIndices(this.firstOrderedReplayList,this.currentOrderedReplayList);this.replayService.updateReplayListOrder(t).subscribe({next:i=>{this.messageService.add({severity:"success",detail:i})},error:i=>{this.messageService.add({severity:"error",detail:i})},complete:()=>{this.areThereNewOrderToSave=!1,this.getReplaysList()}})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(_),e.rXU(o.bg),e.rXU(o.td),e.rXU(U.B),e.rXU(y.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-replay-list-container"]],standalone:!0,features:[e.Jv_([o.bg,o.td,T.o3]),e.aNF],decls:14,vars:9,consts:[[1,"replay-list-container"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","button","routerLink","/replays/creer",1,"add"],[1,"pi","pi-plus"],[4,"ngIf"],[3,"itemsOrderChangedEvent","editReplayTypeEvent","deleteReplayEvent","currentReplayList"],["styleClass","delete-message","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],["type","button",1,"save",3,"click"],[1,"pi","pi-save"]],template:function(i,a){1&i&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Replays Cr\xe9\xe9s "),e.k0s(),e.j41(3,"p",2),e.EFF(4,"Liste de tous les replays"),e.k0s(),e.j41(5,"div",3)(6,"button",4),e.nrm(7,"i",5),e.EFF(8," Cr\xe9er replay "),e.k0s(),e.DNE(9,X,4,0,"ng-container",6),e.k0s(),e.j41(10,"app-replay-list",7),e.nI1(11,"async"),e.bIt("itemsOrderChangedEvent",function(d){return a.onReOrderDetect(d)})("editReplayTypeEvent",function(d){return a.onEditReplayByIdDetect(d)})("deleteReplayEvent",function(d){return a.onDeleteReplayByIdDetect(d)}),e.k0s(),e.nrm(12,"p-confirmDialog",8)(13,"p-toast",9),e.k0s()),2&i&&(e.R7$(9),e.Y8G("ngIf",a.areThereNewOrderToSave),e.R7$(),e.Y8G("currentReplayList",e.bMT(11,5,a.replaysList$)),e.R7$(2),e.Aen(e.lJ4(7,N)),e.Y8G("breakpoints",e.lJ4(8,V)))},dependencies:[y.Wk,c.Jj,c.bT,D,m.MB,m.y8,f.F,f.T],styles:[".replay-list-container{display:flex;flex-direction:column}.replay-list-container .actions{padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px;display:flex;justify-content:space-between}.replay-list-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff}.replay-list-container .actions button:hover{background-color:green;color:#fff}.replay-list-container .actions button i{margin-right:5px}.replay-list-container .actions .add{border:solid green;color:green}.replay-list-container .actions .add:hover{background-color:green}.replay-list-container .actions .save{border:solid blue;color:#00f}.replay-list-container .actions .save:hover{background-color:#00f}\n"],encapsulation:2})}}return n})();var p=r(4341),E=r(3207),C=r(9908),x=r(4528),k=r(6592),F=r(921);function Y(n,l){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"h1",10),e.EFF(2,"Cr\xe9er Un Replay "),e.k0s(),e.j41(3,"p",11),e.EFF(4,"Cr\xe9ation d'une nouvelle rubrique de replay \xe0 partir de playlists cr\xe9\xe9es sur Youtube"),e.k0s(),e.j41(5,"div",12)(6,"button",13),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onSaveReplay())}),e.nrm(7,"i",14),e.EFF(8," Ajouter "),e.k0s(),e.j41(9,"button",15),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onCancelAddEditReplay())}),e.nrm(10,"i",16),e.EFF(11," Annuler "),e.k0s()(),e.bVm()}}function M(n,l){if(1&n){const t=e.RV6();e.j41(0,"h1",10),e.EFF(1,"Modifier Un Replay"),e.k0s(),e.j41(2,"p",11),e.EFF(3,"Modification d'une playlist"),e.k0s(),e.j41(4,"div",12)(5,"button",13),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onEditReplay())}),e.nrm(6,"i",17),e.EFF(7," Modifier "),e.k0s(),e.j41(8,"button",15),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onCancelAddEditReplay())}),e.nrm(9,"i",16),e.EFF(10," Annuler "),e.k0s()()}}function W(n,l){1&n&&(e.j41(0,"div",5)(1,"label"),e.EFF(2,"Activer?"),e.k0s(),e.nrm(3,"p-inputSwitch",18),e.k0s())}function J(n,l){1&n&&(e.j41(0,"small",19),e.EFF(1,"Renseigner le titre de la playlist"),e.k0s())}function P(n,l){1&n&&(e.j41(0,"small",19),e.EFF(1,"S\xe9lectionnez une playlist"),e.k0s())}let j=(()=>{class n{constructor(t,i,a,s,d){this.fb=t,this.replayService=i,this.messageService=a,this.location=s,this.activatedRoute=d,this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1}ngOnInit(){this.initForm(),this.getAllYoutubeChannelPlaylist()}initForm(){this.replayForm=this.fb.group({title:["",p.k0.required],playlistId:["",p.k0.required],isActive:[!1]})}get formControls(){return this.replayForm.controls}checkEditMode(){this.activatedRoute.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.replayService.getReplayById(t.id).subscribe(i=>{if("success"===i.status){this.initialReplayDataWhenEdit=i.data,this.replayForm.controls.title.setValue(this.initialReplayDataWhenEdit.title),this.replayForm.controls.isActive.setValue(this.initialReplayDataWhenEdit.isActive);const a=this.youtubePlaylists.findIndex(s=>s.id==this.initialReplayDataWhenEdit.playlistId);this.replayForm.controls.playlistId.setValue(this.youtubePlaylists[a])}},()=>{this.messageService.add({severity:"warn",detail:"Replay inexistant, contactez le webmaster"})}))},()=>{this.messageService.add({severity:"warn",detail:"Replay inconnue"})})}getAllYoutubeChannelPlaylist(){this.replayService.getListOfReplaysOnYoutube().subscribe(t=>{this.youtubePlaylists=t.message,this.checkEditMode()})}onCancelAddEditReplay(){this.location.back()}onSaveReplay(){if(this.isSaveButtonClicked=!0,this.replayForm.invalid)return;const t={title:this.replayForm.get("title")?.value,playlistId:this.replayForm.get("playlistId")?.value.id,isActive:this.replayForm.get("isActive")?.value};this.replayService.addReplay(t).subscribe(i=>{this.messageService.add({severity:"success",detail:i.message}),(0,E.s)((0,C.O)(2e3)).then(()=>{this.location.back()})})}onEditReplay(){if(this.isEditButtonClicked=!0,this.replayForm.controls.title.value===this.initialReplayDataWhenEdit.title&&this.replayForm.controls.playlistId.value.id===this.initialReplayDataWhenEdit.playlistId&&this.replayForm.controls.isActive.value===this.initialReplayDataWhenEdit.isActive)return void this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xe9e"});let t={};this.replayForm.controls.title.value!==this.initialReplayDataWhenEdit.title&&(t={...t,title:this.replayForm.controls.title.value}),this.replayForm.controls.playlistId.value.id!==this.initialReplayDataWhenEdit.playlistId&&(t={...t,playlistId:this.replayForm.controls.playlistId.value.id}),this.replayForm.controls.isActive.value!==this.initialReplayDataWhenEdit.isActive&&(t={...t,isActive:this.replayForm.controls.isActive.value}),this.replayService.editReplay(this.initialReplayDataWhenEdit.id,t).subscribe(i=>{"success"===i.status&&(this.messageService.add({severity:"success",detail:i.message}),(0,E.s)((0,C.O)(2e3)).then(()=>{this.location.back()}))},()=>{this.messageService.add({severity:"info",detail:"Programme inconnue"})})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(p.ok),e.rXU(_),e.rXU(o.bg),e.rXU(c.aZ),e.rXU(y.nX))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-replay-add-edit-container"]],standalone:!0,features:[e.Jv_([o.bg]),e.aNF],decls:17,vars:9,consts:[["editMode",""],[1,"add-edit-replay-container"],[4,"ngIf","ngIfElse"],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["type","text","pInputText","","formControlName","title"],["class","p-error",4,"ngIf"],["formControlName","playlistId","placeholder","S\xe9lectionnez une playlist","filterBy","title","optionLabel","title",3,"options","filter","showClear"],["position","top-right"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],["type","button",1,"cancel",3,"click"],[1,"pi","pi-times"],[1,"pi","pi-pencil"],["formControlName","isActive"],[1,"p-error"]],template:function(i,a){if(1&i&&(e.j41(0,"div",1),e.DNE(1,Y,12,0,"ng-container",2)(2,M,11,0,"ng-template",null,0,e.C5r),e.j41(4,"form",3),e.DNE(5,W,4,0,"div",4),e.j41(6,"div",5)(7,"label"),e.EFF(8,"Titre de la replay"),e.k0s(),e.nrm(9,"input",6),e.DNE(10,J,2,0,"small",7),e.k0s(),e.j41(11,"div",5)(12,"label"),e.EFF(13,"Playlist sur youtube"),e.k0s(),e.nrm(14,"p-dropdown",8),e.DNE(15,P,2,0,"small",7),e.k0s()(),e.nrm(16,"p-toast",9),e.k0s()),2&i){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",!a.isEditMode)("ngIfElse",s),e.R7$(3),e.Y8G("formGroup",a.replayForm),e.R7$(),e.Y8G("ngIf",a.isEditMode),e.R7$(5),e.Y8G("ngIf",a.formControls.title.invalid&&(a.isSaveButtonClicked||a.isEditButtonClicked)),e.R7$(4),e.Y8G("options",a.youtubePlaylists)("filter",!0)("showClear",!0),e.R7$(),e.Y8G("ngIf",a.formControls.playlistId.invalid&&(a.isSaveButtonClicked||a.isEditButtonClicked))}},dependencies:[c.bT,p.X1,p.qT,p.me,p.BC,p.cb,p.j4,p.JD,x.kr,x.ms,m.MB,m.y8,k.u,k.S,F.H_,F.HW],styles:[".add-edit-replay-container{display:flex;flex-direction:column;min-height:100vh}.add-edit-replay-container .actions{display:flex;justify-content:flex-end;padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px}.add-edit-replay-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;margin-left:10px}.add-edit-replay-container .actions button i{margin-right:5px}.add-edit-replay-container .actions .add{border:solid var(--project-primary-color);color:var(--project-primary-color)}.add-edit-replay-container .actions .add:hover{color:#fff;background-color:var(--project-primary-color)}.add-edit-replay-container .actions .cancel{border:solid gray;color:gray}.add-edit-replay-container .actions .cancel:hover{color:#fff;background-color:gray}.add-edit-replay-container form{display:flex;flex-direction:column;width:500px;border-radius:7px;margin:0 auto;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.add-edit-replay-container form .field{display:flex;flex-direction:column;margin-bottom:20px;flex:1}.add-edit-replay-container form .field label{margin-bottom:7px}.add-edit-replay-container form .field small{margin:10px 0 0}.add-edit-replay-container form .field p-dropdown{width:100%}.add-edit-replay-container form .field p-dropdown .p-dropdown{width:100%}@media all and (max-width: 990px){.add-replay form{width:100%}}@media all and (max-width: 990px){.add-replay form{padding:20px}}\n"],encapsulation:2})}}return n})();const z=[{path:"",component:$},{path:"creer",component:j},{path:"modifier/:id",component:j}];let H=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[y.iI.forChild(z),y.iI]})}}return n})(),K=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[c.MD,H]})}}return n})()}}]);