"use strict";(self.webpackChunkndabbikokoo_admin=self.webpackChunkndabbikokoo_admin||[]).push([[320],{9320:(M,x,l)=>{l.r(x),l.d(x,{UsersModule:()=>ee});var g=l(177),f=l(5678),u=l(4341),c=l(4101),U=l(3207),E=l(9908),C=l(2832),e=l(4438),_=l(9137),b=l(6504),F=l(6592),y=l(66);function j(s,d){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"h1",13),e.EFF(2,"Ajouter Un Utilisateur"),e.k0s(),e.j41(3,"p",14),e.EFF(4,"Ajout d'un nouvel utilisateur"),e.k0s(),e.j41(5,"div",15)(6,"button",16),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onSaveUser())}),e.nrm(7,"i",17),e.EFF(8," Ajouter "),e.k0s(),e.j41(9,"button",18),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onCancelAddEditUser())}),e.nrm(10,"i",19),e.EFF(11," Annuler "),e.k0s()()()}}function I(s,d){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"h1",13),e.EFF(2,"Modifier Utilisateur"),e.k0s(),e.j41(3,"div",15)(4,"button",16),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onEdituser())}),e.nrm(5,"i",20),e.EFF(6," Modifier "),e.k0s(),e.j41(7,"button",18),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onCancelAddEditUser())}),e.nrm(8,"i",19),e.EFF(9," Annuler "),e.k0s()()()}}function m(s,d){1&s&&(e.j41(0,"span",23),e.EFF(1,"Pr\xe9nom(s) manquant(s)"),e.k0s())}function n(s,d){if(1&s&&(e.j41(0,"div",21),e.DNE(1,m,2,0,"span",22),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.formControls.firstname.errors?null:t.formControls.firstname.errors.required)}}function o(s,d){1&s&&(e.j41(0,"span",23),e.EFF(1,"Nom(s) manquant(s)"),e.k0s())}function a(s,d){if(1&s&&(e.j41(0,"div",21),e.DNE(1,o,2,0,"span",22),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.formControls.lastname.errors?null:t.formControls.lastname.errors.required)}}function h(s,d){1&s&&(e.j41(0,"span",23),e.EFF(1,"Veuillez renseignez l'email"),e.k0s())}function v(s,d){1&s&&(e.j41(0,"span",23),e.EFF(1,"Veuillez renseigner une adresse mail valide"),e.k0s())}function w(s,d){if(1&s&&(e.j41(0,"div",21),e.DNE(1,h,2,0,"span",22)(2,v,2,0,"span",22),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.formControls.email.errors?null:t.formControls.email.errors.required),e.R7$(),e.Y8G("ngIf",null==t.formControls.email.errors?null:t.formControls.email.errors.pattern)}}function B(s,d){1&s&&(e.j41(0,"span"),e.EFF(1,"Veuillez renseignez le mot de passe"),e.k0s())}function G(s,d){if(1&s&&(e.j41(0,"div",21),e.DNE(1,B,2,0,"span",1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.formControls.password.errors?null:t.formControls.password.errors.required)}}function D(s,d){if(1&s&&(e.j41(0,"div",3)(1,"label",4),e.EFF(2,"Mot de passe"),e.k0s(),e.nrm(3,"input",24),e.DNE(4,G,2,1,"div",6),e.k0s()),2&s){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.formControls.password.invalid&&(t.isSaveButtonClicked||t.isEditButtonClicked))}}function N(s,d){1&s&&(e.j41(0,"span"),e.EFF(1,"Veuillez renseignez le/les role(s) de l'utilisateur"),e.k0s())}function R(s,d){if(1&s&&(e.j41(0,"div",21),e.DNE(1,N,2,0,"span",1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.formControls.roles.errors?null:t.formControls.roles.errors.required)}}let A=(()=>{class s{constructor(t,i,r,p,k,te){this.fb=t,this.messageService=i,this.router=r,this.activatedRoute=p,this.location=k,this.userService=te,this.roles=Object.keys(C.Y).filter(se=>isNaN(+se)),this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1,this.isImageEdit=!1,this.positionsList=[],this.employeesList=[],this.userForm=this.fb.group({firstname:["",u.k0.required],lastname:["",u.k0.required],email:["",[u.k0.required,u.k0.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",u.k0.required],roles:[[],u.k0.required]})}ngOnInit(){this.checkEditMode()}get formControls(){return this.userForm.controls}checkEditMode(){this.activatedRoute.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.isEditMode&&this.userForm.controls.password.removeValidators(u.k0.required),this.userService.getUserById(t.id).subscribe(i=>{"success"===i.status&&(this.initialUserDataBeforeEdit=i.data,this.userForm.controls.firstname.setValue(this.initialUserDataBeforeEdit.firstname),this.userForm.controls.lastname.setValue(this.initialUserDataBeforeEdit.lastname),this.userForm.controls.email.setValue(this.initialUserDataBeforeEdit.email),this.userForm.controls.roles.setValue(this.initialUserDataBeforeEdit.roles))},()=>{this.messageService.add({severity:"warn",detail:"\xc9mission inexistante, contactez le webmaster"})}))},()=>{this.messageService.add({severity:"warn",detail:"Destination populaire inconnue"})})}onSaveUser(){if(this.isSaveButtonClicked=!0,this.userForm.invalid)return;const t={firstname:this.userForm.controls.firstname.value,lastname:this.userForm.controls.lastname.value,email:this.userForm.controls.email.value,password:this.userForm.controls.password.value,roles:this.userForm.controls.roles.value.join("|")};this.userService.addUser(t).subscribe(i=>{this.messageService.add({severity:"success",detail:i.message}),(0,U.s)((0,E.O)(2e3)).then(()=>{this.location.back()})},i=>{this.messageService.add({severity:"info",detail:i.error.message})})}onCancelAddEditUser(){this.router.navigateByUrl("/utilisateurs")}onEdituser(){if(this.isEditButtonClicked=!0,this.userForm.controls.roles.value.length<1)return;if(this.userForm.controls.firstname.value==this.initialUserDataBeforeEdit.firstname&&this.userForm.controls.lastname.value==this.initialUserDataBeforeEdit.lastname&&this.userForm.controls.email.value==this.initialUserDataBeforeEdit.email&&this.checkIfTwoArraysAreEquals(this.userForm.controls.roles.value,this.initialUserDataBeforeEdit.roles))return void this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xe9e"});let t={};this.userForm.controls.firstname.value!==this.initialUserDataBeforeEdit.firstname&&(t={...t,firstname:this.userForm.controls.firstname.value}),this.userForm.controls.lastname.value!==this.initialUserDataBeforeEdit.lastname&&(t={...t,lastname:this.userForm.controls.lastname.value}),this.userForm.controls.email.value!==this.initialUserDataBeforeEdit.email&&(t={...t,email:this.userForm.controls.email.value}),this.checkIfTwoArraysAreEquals(this.userForm.controls.roles.value,this.initialUserDataBeforeEdit.roles)||(t={...t,roles:this.userForm.controls.roles.value.join("|")}),this.userService.editUser(this.initialUserDataBeforeEdit.id,t).subscribe(i=>{i.status&&(this.messageService.add({severity:"success",detail:i.message}),(0,U.s)((0,E.O)(2e3)).then(()=>{this.location.back()}))},()=>{this.messageService.add({severity:"info",detail:"\xc9diteur inconnu"})})}checkIfTwoArraysAreEquals(t,i){return t.sort().toString()==i.sort().toString()}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(u.ze),e.rXU(c.bg),e.rXU(f.Ix),e.rXU(f.nX),e.rXU(g.aZ),e.rXU(_.g))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-users-add-edit"]],features:[e.Jv_([c.bg])],decls:28,vars:9,consts:[[1,"add-edit-user"],[4,"ngIf"],[3,"formGroup"],[1,"field"],[1,"block"],["type","text","pInputText","","formControlName","firstname","placeholder","Pr\xe9nom(s)"],["class","form-error",4,"ngIf"],[1,"p-error"],["type","text","pInputText","","formControlName","lastname","placeholder","Nom(s)"],["type","email","pInputText","","formControlName","email","placeholder","Entrez l'adresse mail"],["class","field",4,"ngIf"],["id","presenters","formControlName","roles","defaultLabel","Ajouter le/les role(s)","display","chip",3,"options"],["position","top-right"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],["type","button",1,"cancel",3,"click"],[1,"pi","pi-times"],[1,"pi","pi-pencil"],[1,"form-error"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","text","pInputText","","formControlName","password","placeholder","Entrez le mot de passe "]],template:function(i,r){1&i&&(e.j41(0,"div",0),e.DNE(1,j,12,0,"div",1)(2,I,10,0,"div",1),e.j41(3,"form",2)(4,"div",3)(5,"label",4),e.EFF(6,"Entrez le/les pr\xe9nom(s)"),e.k0s(),e.nrm(7,"input",5),e.DNE(8,n,2,1,"div",6),e.nrm(9,"small",7),e.k0s(),e.j41(10,"div",3)(11,"label",4),e.EFF(12,"Entrez le/les nom(s)"),e.k0s(),e.nrm(13,"input",8),e.DNE(14,a,2,1,"div",6),e.nrm(15,"small",7),e.k0s(),e.j41(16,"div",3)(17,"label",4),e.EFF(18,"Email"),e.k0s(),e.nrm(19,"input",9),e.DNE(20,w,3,2,"div",6),e.k0s(),e.DNE(21,D,5,1,"div",10),e.j41(22,"div",3)(23,"label",4),e.EFF(24,"Roles"),e.k0s(),e.nrm(25,"p-multiSelect",11),e.DNE(26,R,2,1,"div",6),e.k0s()(),e.nrm(27,"p-toast",12),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngIf",!r.isEditMode),e.R7$(),e.Y8G("ngIf",r.isEditMode),e.R7$(),e.Y8G("formGroup",r.userForm),e.R7$(5),e.Y8G("ngIf",r.formControls.firstname.invalid&&(r.isSaveButtonClicked||r.isEditButtonClicked)),e.R7$(6),e.Y8G("ngIf",r.formControls.lastname.invalid&&(r.isSaveButtonClicked||r.isEditButtonClicked)),e.R7$(6),e.Y8G("ngIf",r.formControls.email.invalid&&(r.isSaveButtonClicked||r.isEditButtonClicked)),e.R7$(),e.Y8G("ngIf",!r.isEditMode),e.R7$(4),e.Y8G("options",r.roles),e.R7$(),e.Y8G("ngIf",r.formControls.roles.invalid&&(r.isSaveButtonClicked||r.isEditButtonClicked)))},dependencies:[g.bT,u.qT,u.me,u.BC,u.cb,u.j4,u.JD,b.y8,F.S,y.KF],styles:[".add-edit-user{display:flex;flex-direction:column}.add-edit-user .actions{display:flex;justify-content:flex-end;padding:5px 10px;background-color:#fff;margin:60px 0 30px}.add-edit-user .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;margin:10px}.add-edit-user .actions button i{margin-right:5px}.add-edit-user .actions .add{border:solid #1172c2;color:#1172c2}.add-edit-user .actions .add:hover{border:solid #1172c2;color:#fff;background-color:#1172c2}.add-edit-user .actions .cancel{border:solid gray;color:gray}.add-edit-user .actions .cancel:hover{border:solid gray;color:#fff;background-color:gray}.add-edit-user form{display:flex;justify-content:center;flex-direction:column;margin:0 auto;max-width:550px;width:100%;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.add-edit-user form .field{display:flex;flex-direction:column;margin-bottom:20px;width:100%}.add-edit-user form .field label{margin-bottom:7px}.add-edit-user form .field small{margin:10px 0 0}.add-edit-user form .field p-multiselect{width:100%}.add-edit-user form .field p-multiselect .p-multiselect{width:100%}@media all and (max-width: 1024px){.add-edit-user form .left,.add-edit-user form .right{width:50%}}@media all and (max-width: 935px){.add-edit-user form{flex-direction:column-reverse}.add-edit-user form .left{width:300px;margin:auto}.add-edit-user form .left .preview{height:200px}.add-edit-user form .right{width:100%;margin-left:0;margin-bottom:20px}}\n"],encapsulation:2})}}return s})();var T=l(5661),S=l(261),O=l(5493),P=l(6399);const X=()=>({width:"50vw"}),$=()=>({"960px":"75vw","640px":"100vw"});function V(s,d){1&s&&(e.j41(0,"div")(1,"span"),e.EFF(2,"Aucun utilisateur n'a encore \xe9t\xe9 cr\xe9\xe9."),e.k0s()())}function L(s,d){1&s&&(e.j41(0,"tr"),e.nrm(1,"th",10),e.j41(2,"th"),e.EFF(3,"Nom"),e.k0s(),e.j41(4,"th"),e.EFF(5,"Role(s)"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Email"),e.k0s(),e.j41(8,"th",11),e.EFF(9,"Actions"),e.k0s()())}function Y(s,d){if(1&s&&(e.qex(0),e.j41(1,"p"),e.EFF(2),e.k0s(),e.bVm()),2&s){const t=d.$implicit;e.R7$(2),e.SpI("- ",t,"")}}function z(s,d){if(1&s){const t=e.RV6();e.j41(0,"div",16)(1,"i",17),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,p=e.XpG(3);return e.Njj(p.editUser(r.id))}),e.k0s(),e.j41(2,"i",18),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,p=e.XpG(3);return e.Njj(p.deleteUser(r))}),e.k0s()()}}function J(s,d){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td",10),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.DNE(6,Y,3,1,"ng-container",12),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td",13)(10,"i",14),e.bIt("click",function(r){e.eBV(t);const p=e.sdS(12);return e.Njj(p.toggle(r))}),e.k0s(),e.j41(11,"p-overlayPanel",null,1),e.DNE(13,z,3,0,"ng-template",15),e.k0s()()()}if(2&s){const t=d.$implicit,i=d.rowIndex;e.R7$(2),e.JRh(i+1),e.R7$(2),e.Lme("",t.firstname," ",t.lastname,""),e.R7$(2),e.Y8G("ngForOf",t.roles),e.R7$(2),e.JRh(t.email)}}function K(s,d){if(1&s&&(e.j41(0,"p-table",5),e.DNE(1,L,10,0,"ng-template",6)(2,J,14,5,"ng-template",7),e.k0s(),e.nrm(3,"p-confirmDialog",8)(4,"p-toast",9)),2&s){const t=e.XpG(2);e.Y8G("value",t.users),e.R7$(3),e.Aen(e.lJ4(4,X)),e.Y8G("breakpoints",e.lJ4(5,$))}}function W(s,d){if(1&s&&(e.j41(0,"div",3),e.DNE(1,V,3,0,"div",4)(2,K,5,6,"ng-template",null,0,e.C5r),e.k0s()),2&s){const t=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",0==i.users.length)("ngIfElse",t)}}let H=(()=>{class s{constructor(t,i,r,p,k){this.messageService=t,this.confirmationService=i,this.router=r,this.userService=p,this.authService=k,this.deleteUserEvent=new e.bkB}editUser(t){this.userService.getUserById(t).subscribe(i=>{this.router.navigate([`utilisateurs/modifier/${t}`],{queryParamsHandling:"preserve"})},i=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})})}deleteUser(t){"sm-digitalizer@amadou-ba.sn"!==t.email?this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer ce compte?",accept:()=>{this.deleteUserEvent.emit(t.id)},reject:i=>{i===c.TJ.REJECT&&this.messageService.add({severity:"info",detail:"Suppression annul\xe9e"})}}):this.messageService.add({severity:"error",detail:"Vous ne pouvez pas supprimer cet utilisateur"})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(c.bg),e.rXU(c.td),e.rXU(f.Ix),e.rXU(_.g),e.rXU(P.u))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-users-list"]],inputs:{users:"users"},outputs:{deleteUserEvent:"deleteUserEvent"},standalone:!0,features:[e.Jv_([c.bg,c.td]),e.aNF],decls:1,vars:1,consts:[["tableau",""],["op",""],["class","list-users",4,"ngIf"],[1,"list-users"],[4,"ngIf","ngIfElse"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["styleClass","delete-message","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],[1,"count"],[1,"last-column"],[4,"ngFor","ngForOf"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(i,r){1&i&&e.DNE(0,W,4,2,"div",2),2&i&&e.Y8G("ngIf",r.users)},dependencies:[g.bT,g.pM,O.bG,O.XI,c.Ei,S.d,S.j,b.MB,b.y8,T.F,T.T],styles:[".list-users[_ngcontent-%COMP%]{display:flex;flex-direction:column}.list-users[_ngcontent-%COMP%]   .last-column[_ngcontent-%COMP%], .list-users[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]{text-align:right}.list-users[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.list-users[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{border:1.5px solid #191922}.row-actions-event[_ngcontent-%COMP%]{display:flex;flex-direction:column}.row-actions-event[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]{color:red;border:1px solid red}.row-actions-event[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]:hover{color:#fff;background-color:red}.row-actions-event[_ngcontent-%COMP%]   .pi-pencil[_ngcontent-%COMP%]{color:green;border:1px solid green}.row-actions-event[_ngcontent-%COMP%]   .pi-pencil[_ngcontent-%COMP%]:hover{color:#fff;background-color:green}.p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.5rem 1rem!important}"]})}}return s})();const Z=[{path:"",component:(()=>{class s{constructor(t,i,r,p,k){this.userService=t,this.messageService=i,this.confirmationService=r,this.router=p,this.authService=k}ngOnInit(){this.getusers()}getusers(){this.usersList$=this.userService.getUsersList()}deleteUserById(t){this.userService.deleteUser(t).subscribe(r=>{this.getusers(),this.messageService.add({severity:"success",detail:r.message})},r=>{this.messageService.add({severity:"error",detail:"Erreur syst\xe8me: faire appel au webmaster"})})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(_.g),e.rXU(c.bg),e.rXU(c.td),e.rXU(f.Ix),e.rXU(P.u))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-user-list-container"]],standalone:!0,features:[e.Jv_([c.bg,c.td]),e.aNF],decls:11,vars:3,consts:[[1,"user-list-container"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","button","routerLink","/utilisateurs/creer",1,"add-user"],[1,"pi","pi-plus"],[3,"deleteUserEvent","users"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Gestion Des Utilisateurs "),e.k0s(),e.j41(3,"p",2),e.EFF(4,"Liste des utilisateurs de la partie admin"),e.k0s(),e.j41(5,"div",3)(6,"button",4),e.nrm(7,"i",5),e.EFF(8," Ajouter un utilisateur "),e.k0s()(),e.j41(9,"app-users-list",6),e.nI1(10,"async"),e.bIt("deleteUserEvent",function(k){return r.deleteUserById(k)}),e.k0s()()),2&i&&(e.R7$(9),e.Y8G("users",e.bMT(10,1,r.usersList$)))},dependencies:[g.Jj,f.Wk,H],styles:[".user-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px}.user-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-user[_ngcontent-%COMP%]{display:flex;align-items:center;outline:none;border:solid green;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff}.user-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-user[_ngcontent-%COMP%]:hover{background-color:green;color:#fff}.user-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-user[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}"]})}}return s})()},{path:"creer",component:A},{path:"modifier/:id",component:A}];let Q=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(Z),f.iI]})}}return s})();var q=l(6419);let ee=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[g.MD,Q,q.r,u.X1]})}}return s})()},3207:(M,x,l)=>{l.d(x,{s:()=>f});var g=l(9350);function f(u,c){const U="object"==typeof c;return new Promise((E,C)=>{let _,e=!1;u.subscribe({next:b=>{_=b,e=!0},error:C,complete:()=>{e?E(_):U?E(c.defaultValue):C(new g.G)}})})}},9908:(M,x,l)=>{l.d(x,{O:()=>I});var g=l(1985),f=l(8359);class u extends f.yU{constructor(n,o){super()}schedule(n,o=0){return this}}const c={setInterval(m,n,...o){const{delegate:a}=c;return a?.setInterval?a.setInterval(m,n,...o):setInterval(m,n,...o)},clearInterval(m){const{delegate:n}=c;return(n?.clearInterval||clearInterval)(m)},delegate:void 0};var U=l(7908);const C={now:()=>(C.delegate||Date).now(),delegate:void 0};class e{constructor(n,o=e.now){this.schedulerActionCtor=n,this.now=o}schedule(n,o=0,a){return new this.schedulerActionCtor(this,n).schedule(a,o)}}e.now=C.now;const F=new class _ extends e{constructor(n,o=e.now){super(n,o),this.actions=[],this._active=!1}flush(n){const{actions:o}=this;if(this._active)return void o.push(n);let a;this._active=!0;do{if(a=n.execute(n.state,n.delay))break}while(n=o.shift());if(this._active=!1,a){for(;n=o.shift();)n.unsubscribe();throw a}}}(class E extends u{constructor(n,o){super(n,o),this.scheduler=n,this.work=o,this.pending=!1}schedule(n,o=0){var a;if(this.closed)return this;this.state=n;const h=this.id,v=this.scheduler;return null!=h&&(this.id=this.recycleAsyncId(v,h,o)),this.pending=!0,this.delay=o,this.id=null!==(a=this.id)&&void 0!==a?a:this.requestAsyncId(v,this.id,o),this}requestAsyncId(n,o,a=0){return c.setInterval(n.flush.bind(n,this),a)}recycleAsyncId(n,o,a=0){if(null!=a&&this.delay===a&&!1===this.pending)return o;null!=o&&c.clearInterval(o)}execute(n,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const a=this._execute(n,o);if(a)return a;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,o){let h,a=!1;try{this.work(n)}catch(v){a=!0,h=v||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),h}unsubscribe(){if(!this.closed){const{id:n,scheduler:o}=this,{actions:a}=o;this.work=this.state=this.scheduler=null,this.pending=!1,(0,U.o)(a,this),null!=n&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,super.unsubscribe()}}});var y=l(9470);function I(m=0,n,o=F){let a=-1;return null!=n&&((0,y.m)(n)?o=n:a=n),new g.c(h=>{let v=function j(m){return m instanceof Date&&!isNaN(m)}(m)?+m-o.now():m;v<0&&(v=0);let w=0;return o.schedule(function(){h.closed||(h.next(w++),0<=a?this.schedule(void 0,a):h.complete())},v)})}}}]);