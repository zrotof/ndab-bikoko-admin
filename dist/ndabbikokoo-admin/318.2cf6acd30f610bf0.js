"use strict";(self.webpackChunkndabbikokoo_admin=self.webpackChunkndabbikokoo_admin||[]).push([[318],{9318:(yt,F,c)=>{c.r(F),c.d(F,{ArticlesModule:()=>Ft});var u=c(177),p=c(5678),d=c(4101),t=c(4438),y=c(4149),f=c(261),m=c(5493);function M(r,a){1&r&&(t.qex(0),t.j41(1,"span"),t.EFF(2,"Aucune rubrique n'a encore \xe9t\xe9 enregistr\xe9e pour le moment."),t.k0s(),t.bVm())}function O(r,a){1&r&&(t.j41(0,"tr"),t.nrm(1,"th")(2,"th"),t.j41(3,"th"),t.EFF(4,"Titre"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Description"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Activ\xe9e?"),t.k0s(),t.j41(9,"th",8),t.EFF(10,"Actions"),t.k0s()())}function T(r,a){if(1&r){const e=t.RV6();t.j41(0,"div",16)(1,"i",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(3);return t.Njj(o.editRubricEventTrigger(i.id))}),t.k0s(),t.j41(2,"i",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(3);return t.Njj(o.deleteRubricEventTrigger(i.id))}),t.k0s()()}}function P(r,a){if(1&r){const e=t.RV6();t.j41(0,"tr",9),t.nrm(1,"td",10),t.j41(2,"td"),t.nrm(3,"span",11),t.k0s(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.nrm(9,"div",12),t.k0s(),t.j41(10,"td",13)(11,"i",14),t.bIt("click",function(i){t.eBV(e);const o=t.sdS(13);return t.Njj(o.toggle(i))}),t.k0s(),t.j41(12,"p-overlayPanel",null,1),t.DNE(14,T,3,0,"ng-template",15),t.k0s()()()}if(2&r){const e=a.$implicit;t.Y8G("pReorderableRow",a.rowIndex),t.R7$(5),t.JRh(e.name),t.R7$(2),t.SpI(" ",e.description,""),t.R7$(2),t.Y8G("ngClass",!0===e.isActive?"active-rubric":"")}}function L(r,a){if(1&r){const e=t.RV6();t.j41(0,"p-table",5),t.bIt("onRowReorder",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onRowReorder())}),t.DNE(1,O,11,0,"ng-template",6)(2,P,15,4,"ng-template",7),t.k0s()}if(2&r){const e=t.XpG(2);t.Y8G("value",e.currentRubricList)}}function S(r,a){if(1&r&&(t.qex(0),t.j41(1,"div",3),t.DNE(2,M,3,0,"ng-container",4)(3,L,3,1,"ng-template",null,0,t.C5r),t.k0s(),t.bVm()),2&r){const e=t.sdS(4),n=t.XpG();t.R7$(2),t.Y8G("ngIf",0==(null==n.currentRubricList?null:n.currentRubricList.length))("ngIfElse",e)}}let D=(()=>{class r{constructor(){this.deleteRubricEvent=new t.bkB,this.editRubricEvent=new t.bkB,this.itemsOrderChangedEvent=new t.bkB}onRowReorder(){this.itemsOrderChangedEvent.emit({firstList:this._firstReplayList,currentList:this.currentRubricList})}editRubricEventTrigger(e){this.editRubricEvent.emit(e)}deleteRubricEventTrigger(e){this.deleteRubricEvent.emit(e)}ngOnChanges(e){e.currentRubricList.currentValue&&(this._firstReplayList=[...this.currentRubricList])}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-rubric-list"]],inputs:{currentRubricList:"currentRubricList"},outputs:{deleteRubricEvent:"deleteRubricEvent",editRubricEvent:"editRubricEvent",itemsOrderChangedEvent:"itemsOrderChangedEvent"},standalone:!0,features:[t.OA$,t.aNF],decls:1,vars:1,consts:[["tableau",""],["op",""],[4,"ngIf"],[1,"rubric-list"],[4,"ngIf","ngIfElse"],["responsiveLayout","scroll",3,"onRowReorder","value"],["pTemplate","header"],["pTemplate","body"],[1,"last-column"],[3,"pReorderableRow"],["pReorderableRowHandle","",1,"row-reorder-handler"],[1,"pi","pi-align-justify"],[1,"default-state",3,"ngClass"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(n,i){1&n&&t.DNE(0,S,5,2,"ng-container",2),2&n&&t.Y8G("ngIf",i.currentRubricList)},dependencies:[u.bT,m.bG,m.XI,d.Ei,m.UG,m.ak,y.z_,f.d,f.j,u.YU],styles:[".rubric-list{display:flex;flex-direction:column}.rubric-list p-table{width:100%;margin:auto;box-shadow:#00000029 0 1px 4px}.rubric-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr{position:relative;transition:all .8s ease-in-out}.rubric-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr .row-reorder-handler{position:absolute;top:0;left:0;width:100%;height:100%}.rubric-list .last-column{text-align:right}.rubric-list .default-state{height:15px;width:15px;border-radius:50%;background-color:#cbcbcb}.rubric-list .active-rubric{background-color:green}.rubric-list .row-actions{text-align:right;position:relative}.rubric-list .row-actions i{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.rubric-list .row-actions i:hover{border:1.5px solid #191922}.rubric-list .p-datatable .p-datatable-tbody>tr>td{padding:.5rem 1rem!important}.row-actions-event{display:flex;flex-direction:column}.row-actions-event i{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event .pi-trash{color:red;border:1px solid red}.row-actions-event .pi-trash:hover{color:#fff;background-color:red}.row-actions-event .pi-pencil{color:green;border:1px solid green}.row-actions-event .pi-pencil:hover{color:#fff;background-color:green}.p-overlaypanel .p-overlaypanel-content{padding:7px}\n"],encapsulation:2})}}return r})();var V=c(6614),g=c(6504),v=c(5661),h=c(8165),B=c(6757);const G=()=>({width:"50vw"}),N=()=>({"960px":"75vw","640px":"100vw"});function $(r,a){if(1&r){const e=t.RV6();t.qex(0),t.j41(1,"button",11),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.setNewItemsOrder())}),t.nrm(2,"i",12),t.EFF(3," Sauvegarder l'odre "),t.k0s(),t.bVm()}}let X=(()=>{class r{constructor(e,n,i,o,s){this.articleService=e,this.messageService=n,this.confirmationService=i,this.reorderUtils=o,this.router=s,this.subscriptions=[],this.areThereNewOrderToSave=!1}ngOnInit(){this.getRubricList()}getRubricList(){this.rubricList$=this.articleService.getRubricList()}onReorderDetect(e){this.firstOrderedReplayList=e.firstList,this.currentOrderedReplayList=e.currentList,this.areThereNewOrderToSave=this.reorderUtils.areArraysEquals(this.firstOrderedReplayList,this.currentOrderedReplayList)}onEditEventDetect(e){const n=e;this.subscriptions.push(this.articleService.getRubricById(n).subscribe({next:i=>{"success"===i.status?this.router.navigate([`articles/modifier-rubrique/${n}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:i.message})},error:i=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}}))}deleteRubricById(e){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cette rubrique ?",accept:()=>{this.subscriptions.push(this.articleService.deleteRubric(e).subscribe({next:i=>{"success"===i.status?(this.getRubricList(),this.messageService.add({severity:"success",detail:i.message})):this.messageService.add({severity:"error",detail:i.message})},error:i=>{this.messageService.add({severity:"error",detail:"Erreur syst\xe8me: faire appel au webmaster"})}}))},reject:n=>{n===d.TJ.REJECT&&this.messageService.add({severity:"info",detail:"Suppression annul\xe9e"})}})}setNewItemsOrder(){const e=this.reorderUtils.findDifferentIdsAndIndices(this.firstOrderedReplayList,this.currentOrderedReplayList);this.articleService.updateArticleRubricsOrder(e).subscribe({next:n=>{this.messageService.add({severity:"success",detail:n})},error:n=>{this.messageService.add({severity:"error",detail:n})},complete:()=>{this.areThereNewOrderToSave=!1,this.getRubricList()}})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(h.q),t.rXU(d.bg),t.rXU(d.td),t.rXU(B.B),t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-article-rubric-list-container"]],standalone:!0,features:[t.Jv_([d.bg,d.td,V.o3]),t.aNF],decls:15,vars:9,consts:[[1,"rubric-list-container"],[1,"title"],[1,"sub-title"],[1,"content"],[1,"actions"],["type","button","routerLink","/articles/creer-rubrique",1,"add"],[1,"pi","pi-plus"],[4,"ngIf"],[3,"itemsOrderChangedEvent","editRubricEvent","deleteRubricEvent","currentRubricList"],["styleClass","delete-message","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],["type","button",1,"save",3,"click"],[1,"pi","pi-save"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2,"Rubriques Cr\xe9\xe9es "),t.k0s(),t.j41(3,"p",2),t.EFF(4,"Liste de toutes les rubriques d'articles"),t.k0s(),t.j41(5,"div",3)(6,"div",4)(7,"button",5),t.nrm(8,"i",6),t.EFF(9," Cr\xe9er rubrique "),t.k0s(),t.DNE(10,$,4,0,"ng-container",7),t.k0s(),t.j41(11,"app-rubric-list",8),t.nI1(12,"async"),t.bIt("itemsOrderChangedEvent",function(s){return i.onReorderDetect(s)})("editRubricEvent",function(s){return i.onEditEventDetect(s)})("deleteRubricEvent",function(s){return i.deleteRubricById(s)}),t.k0s(),t.nrm(13,"p-confirmDialog",9)(14,"p-toast",10),t.k0s()()),2&n&&(t.R7$(10),t.Y8G("ngIf",i.areThereNewOrderToSave),t.R7$(),t.Y8G("currentRubricList",t.bMT(12,5,i.rubricList$)),t.R7$(2),t.Aen(t.lJ4(7,G)),t.Y8G("breakpoints",t.lJ4(8,N)))},dependencies:[p.Wk,u.Jj,u.bT,g.MB,g.y8,v.F,v.T,D],styles:[".rubric-list-container{display:flex;flex-direction:column}.rubric-list-container .actions{padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px;display:flex;justify-content:space-between}.rubric-list-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff}.rubric-list-container .actions button:hover{background-color:green;color:#fff}.rubric-list-container .actions button i{margin-right:5px}.rubric-list-container .actions .add{border:solid green;color:green}.rubric-list-container .actions .add:hover{background-color:green}.rubric-list-container .actions .save{border:solid blue;color:#00f}.rubric-list-container .actions .save:hover{background-color:#00f}\n"],encapsulation:2})}}return r})();const U=()=>({width:"50vw"}),W=()=>({"960px":"75vw","640px":"100vw"});function q(r,a){1&r&&(t.qex(0),t.j41(1,"span"),t.EFF(2,"Aucun article de cette rubrique n'a encore \xe9t\xe9 enregistr\xe9 pour le moment."),t.k0s(),t.bVm())}function Y(r,a){1&r&&(t.j41(0,"tr"),t.nrm(1,"th",10),t.j41(2,"th"),t.EFF(3,"Titre"),t.k0s(),t.j41(4,"th"),t.EFF(5,"Description"),t.k0s(),t.j41(6,"th"),t.EFF(7,"Date"),t.k0s(),t.j41(8,"th",11),t.EFF(9,"Actions"),t.k0s()())}function J(r,a){if(1&r){const e=t.RV6();t.j41(0,"div",16)(1,"i",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(3);return t.Njj(o.editArticle(i.id))}),t.k0s(),t.j41(2,"i",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(3);return t.Njj(o.deleteArticle(i.id,i.rubricId))}),t.k0s()()}}function z(r,a){if(1&r){const e=t.RV6();t.j41(0,"tr")(1,"td",10),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.nrm(5,"td",12),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td",13)(9,"i",14),t.bIt("click",function(i){t.eBV(e);const o=t.sdS(11);return t.Njj(o.toggle(i))}),t.k0s(),t.j41(10,"p-overlayPanel",null,1),t.DNE(12,J,3,0,"ng-template",15),t.k0s()()()}if(2&r){const e=a.$implicit,n=a.rowIndex,i=t.XpG(3);t.R7$(2),t.JRh(n+1),t.R7$(2),t.JRh(e.title),t.R7$(),t.Y8G("innerHTML",e.description,t.npT),t.R7$(2),t.SpI(" ",i.convertDate(e.date)," ")}}function H(r,a){if(1&r&&(t.j41(0,"p-table",5),t.DNE(1,Y,10,0,"ng-template",6)(2,z,13,4,"ng-template",7),t.k0s(),t.nrm(3,"p-confirmDialog",8)(4,"p-toast",9)),2&r){const e=t.XpG(2);t.Y8G("value",e.articles),t.R7$(3),t.Aen(t.lJ4(4,U)),t.Y8G("breakpoints",t.lJ4(5,W))}}function Z(r,a){if(1&r&&(t.qex(0),t.j41(1,"div",3),t.DNE(2,q,3,0,"ng-container",4)(3,H,5,6,"ng-template",null,0,t.C5r),t.k0s(),t.bVm()),2&r){const e=t.sdS(4),n=t.XpG();t.R7$(2),t.Y8G("ngIf",0==(null==n.articles?null:n.articles.length))("ngIfElse",e)}}let K=(()=>{class r{constructor(e,n,i,o,s){this.router=e,this.articleService=n,this.messageService=i,this.confirmationService=o,this.datePipe=s,this.deleteArticleEvent=new t.bkB}editArticle(e){this.articleService.getArticleById(e).subscribe(n=>{"success"===n.status?this.router.navigate([`articles/modifier-article/${e}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:n.message})},n=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})})}deleteArticle(e,n){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cette replay?",accept:()=>{this.deleteArticleEvent.emit({articleId:e,rubricId:n})},reject:i=>{i===d.TJ.REJECT&&this.messageService.add({severity:"info",detail:"Suppression annul\xe9e"})}})}convertDate(e){return this.datePipe.transform(e,"dd/MM/yyyy")}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(p.Ix),t.rXU(h.q),t.rXU(d.bg),t.rXU(d.td),t.rXU(u.vh))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-article-list"]],inputs:{articles:"articles"},outputs:{deleteArticleEvent:"deleteArticleEvent"},standalone:!0,features:[t.Jv_([d.bg,d.td,u.vh]),t.aNF],decls:1,vars:1,consts:[["tableau",""],["op",""],[4,"ngIf"],[1,"article-list"],[4,"ngIf","ngIfElse"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["styleClass","delete-message","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],[1,"count"],[1,"last-column"],[3,"innerHTML"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(n,i){1&n&&t.DNE(0,Z,5,2,"ng-container",2),2&n&&t.Y8G("ngIf",i.articles)},dependencies:[u.bT,m.bG,m.XI,d.Ei,y.z_,v.F,v.T,g.MB,g.y8,f.d,f.j],styles:[".article-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.article-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:5px 10px;background-color:#f1f1f1;margin-top:60px;margin-bottom:30px}.article-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;outline:none;border:solid green;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;white-space:nowrap}.article-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]:hover{background-color:green;color:#fff}.article-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-replay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.article-list[_ngcontent-%COMP%]   p-table[_ngcontent-%COMP%]{width:100%;margin:auto;box-shadow:#00000029 0 1px 4px}.article-list[_ngcontent-%COMP%]   .last-column[_ngcontent-%COMP%]{text-align:right}.article-list[_ngcontent-%COMP%]   .default-state[_ngcontent-%COMP%]{height:15px;width:15px;border-radius:50%;background-color:#cbcbcb}.article-list[_ngcontent-%COMP%]   .active-replay[_ngcontent-%COMP%]{background-color:green}.article-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]{text-align:right}.article-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.article-list[_ngcontent-%COMP%]   .row-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{border:1.5px solid #191922}.article-list[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.5rem 1rem!important}.row-actions-event[_ngcontent-%COMP%]{display:flex;flex-direction:column}.row-actions-event[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]{color:red;border:1px solid red}.row-actions-event[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]:hover{color:#fff;background-color:red}.row-actions-event[_ngcontent-%COMP%]   .pi-pencil[_ngcontent-%COMP%]{color:green;border:1px solid green}.row-actions-event[_ngcontent-%COMP%]   .pi-pencil[_ngcontent-%COMP%]:hover{color:#fff;background-color:green}.p-overlaypanel[_ngcontent-%COMP%]   .p-overlaypanel-content[_ngcontent-%COMP%]{padding:7px}@media all and (max-width: 990px){.replay-list[_ngcontent-%COMP%]   p-table[_ngcontent-%COMP%]{width:100%}}"]})}}return r})();var x=c(6354),Q=c(3033);let tt=(()=>{class r{constructor(e,n){this.articleService=e,this.messageService=n}ngOnInit(){this.getRubricList()}getRubricList(){this.rubricList$=this.articleService.getRubricList().pipe((0,x.T)(e=>e.map(n=>({id:n.id,name:n.name,isActive:!1}))))}getArticleListByRubricId(e){this.articlesList$=this.articleService.getArticleList(e)}deleteArticleById(e){const i=e.rubricId;this.articleService.deleteArticle(e.articleId).subscribe(o=>{"success"===o.status?(this.getArticleListByRubricId(i),this.messageService.add({severity:"success",detail:o.message})):this.messageService.add({severity:"error",detail:o.message})},o=>{this.messageService.add({severity:"error",detail:"Erreur syst\xe8me: faire appel au webmaster"})})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(h.q),t.rXU(d.bg))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-article-list-container"]],standalone:!0,features:[t.Jv_([d.bg]),t.aNF],decls:14,vars:6,consts:[[1,"article-list-container"],[1,"title"],[1,"sub-title"],[1,"content"],[1,"actions"],["type","button","routerLink","/articles/creer-article",1,"add-article"],[1,"pi","pi-plus"],[3,"menuItemClikedEvent","menuList"],[3,"deleteArticleEvent","articles"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2,"Gestion Des Articles "),t.k0s(),t.j41(3,"p",2),t.EFF(4,"Gestion de tous les articles cr\xe9\xe9s"),t.k0s(),t.j41(5,"div",3)(6,"div",4)(7,"button",5),t.nrm(8,"i",6),t.EFF(9," Cr\xe9er article "),t.k0s()(),t.j41(10,"app-category-list-menu",7),t.nI1(11,"async"),t.bIt("menuItemClikedEvent",function(s){return i.getArticleListByRubricId(s)}),t.k0s(),t.j41(12,"app-article-list",8),t.nI1(13,"async"),t.bIt("deleteArticleEvent",function(s){return i.deleteArticleById(s)}),t.k0s()()()),2&n&&(t.R7$(10),t.Y8G("menuList",t.bMT(11,2,i.rubricList$)),t.R7$(2),t.Y8G("articles",t.bMT(13,4,i.articlesList$)))},dependencies:[p.Wk,u.Jj,Q.F,K],styles:[".article-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.article-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:5px 10px;background-color:#f1f1f1;margin-top:60px;margin-bottom:30px}.article-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-article[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;outline:none;border:solid green;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;white-space:nowrap}.article-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-article[_ngcontent-%COMP%]:hover{background-color:green;color:#fff}.article-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add-article[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}"]})}}return r})();var l=c(4341),_=c(6592),C=c(3207),E=c(9908),R=c(7237),k=c(921),et=c(7603),A=c(4528),j=c(9548);const it=()=>({height:"320px"});function nt(r,a){if(1&r){const e=t.RV6();t.qex(0),t.j41(1,"h1",28),t.EFF(2,"Cr\xe9er Un d'Article "),t.k0s(),t.j41(3,"p",29),t.EFF(4,"Cr\xe9ation d'un nouvel article"),t.k0s(),t.j41(5,"div",30)(6,"button",31),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSaveArticle())}),t.nrm(7,"i",32),t.EFF(8," Ajouter "),t.k0s(),t.j41(9,"button",33),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onCancelAddEditArticle())}),t.nrm(10,"i",34),t.EFF(11," Annuler "),t.k0s()(),t.bVm()}}function rt(r,a){if(1&r){const e=t.RV6();t.j41(0,"h1",28),t.EFF(1,"Modifier Un Article"),t.k0s(),t.j41(2,"p",29),t.EFF(3,"Modification d'un article"),t.k0s(),t.j41(4,"div",30)(5,"button",31),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onEditArticle())}),t.nrm(6,"i",35),t.EFF(7," Modifier "),t.k0s(),t.j41(8,"button",33),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onCancelAddEditArticle())}),t.nrm(9,"i",34),t.EFF(10," Annuler "),t.k0s()()}}function ot(r,a){1&r&&(t.j41(0,"small"),t.EFF(1,"Image manquante"),t.k0s())}function at(r,a){if(1&r&&(t.j41(0,"div",36),t.DNE(1,ot,2,0,"small",37),t.k0s()),2&r){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.formControls.coverImage.errors?null:e.formControls.coverImage.errors.required)}}function ct(r,a){1&r&&(t.j41(0,"small",36),t.EFF(1,"S\xe9lectionnez une rubrique d'article"),t.k0s())}function lt(r,a){1&r&&(t.j41(0,"small",36),t.EFF(1,"Renseigner le titre de l'article"),t.k0s())}function st(r,a){1&r&&(t.j41(0,"small",36),t.EFF(1,"Renseigner une courte description"),t.k0s())}function dt(r,a){1&r&&(t.j41(0,"small",36),t.EFF(1,"Renseigner l'heure de l'\xe9v\xeanement"),t.k0s())}function ut(r,a){1&r&&(t.j41(0,"small",36),t.EFF(1,"Renseigner la date de l'\xe9v\xeanement"),t.k0s())}function pt(r,a){1&r&&(t.j41(0,"small",36),t.EFF(1,"Renseigner le m\xe9dia vid\xe9o"),t.k0s())}function mt(r,a){1&r&&(t.j41(0,"span",38),t.nrm(1,"button",39)(2,"button",40)(3,"button",41)(4,"button",42)(5,"button",43)(6,"button",44)(7,"button",45)(8,"button",46)(9,"button",47),t.k0s())}function gt(r,a){1&r&&(t.j41(0,"small",36),t.EFF(1,"Renseigner le contenu de l'article"),t.k0s())}let I=(()=>{class r{constructor(e,n,i,o,s){this.fb=e,this.artcileService=n,this.messageService=i,this.location=o,this.activatedRoute=s,this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1,this.isImageEdit=!1,this.isMediaVideoInputIsToDisable=!0}ngOnInit(){this.initForm(),this.getArticleRubrics(),this.checkEditMode(),this.getUserConnected(),this.onHandlingMedia()}initForm(){this.articleForm=this.fb.group({title:["",l.k0.required],description:["",l.k0.required],date:["",l.k0.required],hour:[""],content:["",l.k0.required],hasVideo:[!1],videoLink:[{value:"",disabled:!0}],coverImage:["",l.k0.required],rubric:["",l.k0.required]})}getArticleRubrics(){this.articleRubrics$=this.artcileService.getRubricList().pipe((0,x.T)(e=>e.map(n=>({id:n.id,name:n.name}))))}onHandlingMedia(){this.articleForm.controls.hasVideo.valueChanges.subscribe(e=>{e?(this.articleForm.controls.videoLink.enable(),this.articleForm.controls.videoLink.setValidators(l.k0.required)):(this.articleForm.controls.videoLink.reset(),this.articleForm.controls.videoLink.disable(),this.articleForm.controls.videoLink.removeValidators(l.k0.required)),this.isMediaVideoInputIsToDisable=!this.isMediaVideoInputIsToDisable,this.articleForm.controls.videoLink.updateValueAndValidity()})}get formControls(){return this.articleForm.controls}checkEditMode(){this.activatedRoute.params.subscribe(e=>{e.id&&(this.isEditMode=!0,this.artcileService.getArticleById(e.id).subscribe(n=>{if("success"===n.status){this.initialArticleDataWhenEdit=n.data,this.articleForm.controls.title.setValue(this.initialArticleDataWhenEdit.title),this.articleForm.controls.description.setValue(this.initialArticleDataWhenEdit.description),this.articleForm.controls.date.setValue(new Date(this.initialArticleDataWhenEdit.date)),this.articleForm.controls.hour.setValue(this.initialArticleDataWhenEdit.hour),this.articleForm.controls.content.setValue(this.initialArticleDataWhenEdit.content),this.articleForm.controls.hasVideo.setValue(this.initialArticleDataWhenEdit.hasVideo),this.articleForm.controls.videoLink.setValue(this.initialArticleDataWhenEdit.videoLink),this.articleRubrics$.subscribe({next:o=>{const s=o.filter(b=>b.id===this.initialArticleDataWhenEdit.rubricId);this.articleForm.controls.rubric.setValue(s[0])}});const i=document.getElementById("image-previewed");this.imageDisplay=`${this.initialArticleDataWhenEdit.coverImage}`,i.style.display="block",this.articleForm.controls.coverImage.clearValidators(),this.articleForm.controls.coverImage.updateValueAndValidity()}},()=>{this.messageService.add({severity:"warn",detail:"Article inexistant, contactez le webmaster"})}))},()=>{this.messageService.add({severity:"warn",detail:"Article inconnu"})})}getUserConnected(){this.connectedUser=this.activatedRoute.snapshot.data.user}onCancelAddEditArticle(){this.location.back()}onSaveArticle(){if(this.isSaveButtonClicked=!0,this.articleForm.invalid)return;const e=new FormData;this.articleForm.get("title")?.value&&e.append("title",this.articleForm.get("title")?.value),this.articleForm.get("description")?.value&&e.append("description",this.articleForm.get("description")?.value),this.articleForm.get("date")?.value&&e.append("date",this.articleForm.get("date")?.value),this.articleForm.get("hour")?.value&&e.append("hour",this.articleForm.get("hour")?.value),this.articleForm.get("hasVideo")?.value&&e.append("hasVideo",this.articleForm.get("hasVideo")?.value),this.articleForm.get("videoLink")?.value&&e.append("videoLink",this.articleForm.get("videoLink")?.value),this.articleForm.get("coverImage")?.value&&e.append("coverImage",this.articleForm.get("coverImage")?.value),this.articleForm.get("content")?.value&&e.append("content",this.articleForm.get("content")?.value),this.articleForm.get("rubric")?.value&&e.append("rubricId",this.articleForm.get("rubric")?.value.id),e.append("userId",this.connectedUser.id),this.artcileService.addArticle(e).subscribe(n=>{this.messageService.add({severity:"success",detail:n.message}),(0,C.s)((0,E.O)(2e3)).then(()=>{this.location.back()})})}onEditArticle(){if(this.isEditButtonClicked=!0,this.articleForm.controls.title.value===this.initialArticleDataWhenEdit.title&&this.articleForm.controls.description.value===this.initialArticleDataWhenEdit.description&&this.articleForm.controls.date.value.getTime()===new Date(this.initialArticleDataWhenEdit.date).getTime()&&this.articleForm.controls.hour.value===this.initialArticleDataWhenEdit.hour&&this.articleForm.controls.content.value===this.initialArticleDataWhenEdit.content&&this.articleForm.controls.hasVideo.value===this.initialArticleDataWhenEdit.hasVideo&&this.articleForm.controls.videoLink.value===this.initialArticleDataWhenEdit.videoLink&&this.articleForm.controls.rubric.value.id===this.initialArticleDataWhenEdit.rubricId&&!this.isImageEdit)return void this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xe9e"});const e=new FormData;this.articleForm.get("title")?.value!=this.initialArticleDataWhenEdit.title&&e.append("title",this.articleForm.get("title")?.value),this.articleForm.get("description")?.value!=this.initialArticleDataWhenEdit.description&&e.append("description",this.articleForm.get("description")?.value),this.articleForm.get("date")?.value.getTime()!=new Date(this.initialArticleDataWhenEdit.date).getTime()&&e.append("date",this.articleForm.get("date")?.value),this.articleForm.get("hour")?.value!=this.initialArticleDataWhenEdit.hour&&e.append("hour",this.articleForm.get("hour")?.value),this.articleForm.get("hasVideo")?.value!=this.initialArticleDataWhenEdit.hasVideo&&e.append("hasVideo",this.articleForm.get("hasVideo")?.value),this.articleForm.get("videoLink")?.value!=this.initialArticleDataWhenEdit.videoLink&&e.append("videoLink",this.articleForm.get("videoLink")?.value),this.isImageEdit&&e.append("coverImage",this.articleForm.get("coverImage")?.value),this.articleForm.get("content")?.value!=this.initialArticleDataWhenEdit.content&&e.append("content",this.articleForm.get("content")?.value),this.articleForm.get("rubric")?.value.id!=this.initialArticleDataWhenEdit.rubricId&&e.append("rubricId",this.articleForm.get("rubric")?.value.id),e.append("userId",this.connectedUser.id),this.artcileService.editArticle(this.initialArticleDataWhenEdit.id,e).subscribe(n=>{"success"===n.status&&(this.messageService.add({severity:"success",detail:n.message}),(0,C.s)((0,E.O)(2e3)).then(()=>{this.location.back()}))},()=>{this.messageService.add({severity:"info",detail:"Programme inconnue"})})}showImagePreview(e){const n=e.target.files[0];if(n){this.isImageEdit=!0,this.articleForm.patchValue({coverImage:n}),this.formControls.coverImage.updateValueAndValidity();const i=new FileReader;i.onload=()=>{this.imageDisplay=i.result},i.readAsDataURL(n),document.getElementById("image-previewed").style.display="block"}}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(l.ok),t.rXU(h.q),t.rXU(d.bg),t.rXU(u.aZ),t.rXU(p.nX))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-article-add-edit-container"]],standalone:!0,features:[t.Jv_([d.bg]),t.aNF],decls:64,vars:26,consts:[["editMode",""],[1,"article-add-edit-container"],[4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"left"],[1,"preview"],["id","image-previewed",3,"src"],[1,"upload"],[1,"input"],["for","image-input"],[1,"pi","pi-upload"],["type","file","id","image-input","accept","image/*",3,"change"],["class","p-error",4,"ngIf"],[1,"right"],[1,"row-one"],[1,"field"],["formControlName","rubric","placeholder","S\xe9lectionnez une rubrique d'article","filterBy","name","optionLabel","name",3,"options","filter","showClear"],["type","text","pInputText","","formControlName","title"],["type","text","pInputText","","formControlName","description"],[1,"row-two","calendar-bloc"],["placeholder","Entre l'heure","formControlName","hour","dateFormat","dd.mm.yy","timeSeparator",":","dataType","string",3,"showTime","readonlyInput","timeOnly"],["placeholder","Entrez la date","formControlName","date","dateFormat","dd/mm/yy",3,"showIcon","readonlyInput"],[1,"row-two","video-bloc"],["formControlName","hasVideo"],["type","text","pInputText","","formControlName","videoLink",3,"ngClass"],["formControlName","content"],["pTemplate","header"],["position","top-right"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],["type","button",1,"cancel",3,"click"],[1,"pi","pi-times"],[1,"pi","pi-pencil"],[1,"p-error"],[4,"ngIf"],[1,"ql-formats"],["value","1",1,"ql-header"],["value","2",1,"ql-header"],["value","false",1,"ql-header"],["type","button","aria-label","Bold",1,"ql-bold"],["type","button","aria-label","Italic",1,"ql-italic"],["type","button","aria-label","Underline",1,"ql-underline"],["type","button","value","ordered",1,"ql-list"],["type","button","value","bullet",1,"ql-list"],["type","button",1,"ql-link"]],template:function(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",1),t.DNE(1,nt,12,0,"ng-container",2)(2,rt,11,0,"ng-template",null,0,t.C5r),t.j41(4,"form",3)(5,"div",4)(6,"div",5),t.nrm(7,"img",6),t.k0s(),t.j41(8,"div",7)(9,"div",8)(10,"label",9),t.nrm(11,"i",10),t.EFF(12," Image de couverture "),t.k0s(),t.j41(13,"input",11),t.bIt("change",function(b){return t.eBV(o),t.Njj(i.showImagePreview(b))}),t.k0s()(),t.DNE(14,at,2,1,"div",12),t.k0s()(),t.j41(15,"div",13)(16,"div",14)(17,"div",15)(18,"label"),t.EFF(19,"Rubrique de cet article"),t.k0s(),t.nrm(20,"p-dropdown",16),t.nI1(21,"async"),t.DNE(22,ct,2,0,"small",12),t.k0s()(),t.j41(23,"div",14)(24,"div",15)(25,"label"),t.EFF(26,"Titre de larticle"),t.k0s(),t.nrm(27,"input",17),t.DNE(28,lt,2,0,"small",12),t.k0s()(),t.j41(29,"div",14)(30,"div",15)(31,"label"),t.EFF(32,"Description"),t.k0s(),t.nrm(33,"input",18),t.DNE(34,st,2,0,"small",12),t.k0s()(),t.j41(35,"div",19)(36,"div",15)(37,"label"),t.EFF(38,"Heure de l'\xe9v\xeanement"),t.k0s(),t.nrm(39,"p-calendar",20),t.DNE(40,dt,2,0,"small",12),t.k0s(),t.j41(41,"div",15)(42,"label"),t.EFF(43,"Date de quand l'\xe9v\xeanement a eu lieux"),t.k0s(),t.nrm(44,"p-calendar",21),t.DNE(45,ut,2,0,"small",12),t.k0s()(),t.j41(46,"div",22)(47,"div",15)(48,"label"),t.EFF(49,"Contiendra une vid\xe9o?"),t.k0s(),t.nrm(50,"p-inputSwitch",23),t.k0s(),t.j41(51,"div",15)(52,"label"),t.EFF(53,"Media video"),t.k0s(),t.nrm(54,"input",24),t.DNE(55,pt,2,0,"small",12),t.k0s()(),t.j41(56,"div",14)(57,"div",15)(58,"label"),t.EFF(59,"Corps de l'article"),t.k0s(),t.j41(60,"p-editor",25),t.DNE(61,mt,10,0,"ng-template",26),t.k0s(),t.DNE(62,gt,2,0,"small",12),t.k0s()()()(),t.nrm(63,"p-toast",27),t.k0s()}if(2&n){const o=t.sdS(3);t.R7$(),t.Y8G("ngIf",!i.isEditMode)("ngIfElse",o),t.R7$(3),t.Y8G("formGroup",i.articleForm),t.R7$(3),t.Y8G("src",i.imageDisplay,t.B4B),t.R7$(7),t.Y8G("ngIf",i.formControls.coverImage.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.R7$(6),t.Y8G("options",t.bMT(21,23,i.articleRubrics$))("filter",!0)("showClear",!0),t.R7$(2),t.Y8G("ngIf",i.formControls.rubric.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.R7$(6),t.Y8G("ngIf",i.formControls.title.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.R7$(6),t.Y8G("ngIf",i.formControls.description.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.R7$(5),t.Y8G("showTime",!0)("readonlyInput",!0)("timeOnly",!0),t.R7$(),t.Y8G("ngIf",i.formControls.hour.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.R7$(4),t.Y8G("showIcon",!0)("readonlyInput",!0),t.R7$(),t.Y8G("ngIf",i.formControls.date.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.R7$(9),t.Y8G("ngClass",i.isMediaVideoInputIsToDisable?"disabledInput":"enabledInput"),t.R7$(),t.Y8G("ngIf",i.formControls.videoLink.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.R7$(5),t.Aen(t.lJ4(25,it)),t.R7$(2),t.Y8G("ngIf",i.formControls.content.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked))}},dependencies:[u.bT,u.YU,u.Jj,m.bG,d.Ei,g.MB,g.y8,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,_.u,_.S,k.H_,k.HW,R.rO,R.Vv,et.f,A.kr,A.ms,j.sv,j.KE],styles:[".article-add-edit-container{display:flex;flex-direction:column;min-height:100vh}.article-add-edit-container .actions{display:flex;justify-content:flex-end;padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px}.article-add-edit-container .actions button{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;margin-left:10px}.article-add-edit-container .actions button i{margin-right:5px}.article-add-edit-container .actions .add{border:solid var(--project-primary-color);color:var(--project-primary-color)}.article-add-edit-container .actions .add:hover{color:#fff;background-color:var(--project-primary-color)}.article-add-edit-container .actions .cancel{border:solid gray;color:gray}.article-add-edit-container .actions .cancel:hover{color:#fff;background-color:gray}.article-add-edit-container form{display:flex;justify-content:center}.article-add-edit-container form .left{display:flex;flex-direction:column;align-items:center;width:275px;margin-right:20px}.article-add-edit-container form .left .preview{width:100%;height:250px;border-radius:5px;overflow:hidden;background-color:#d3d3d3}.article-add-edit-container form .left .preview img{width:100%;height:100%;display:none;object-fit:cover;object-position:top}.article-add-edit-container form .left .upload{display:flex;flex-direction:column;align-items:flex-start;width:100%;margin-top:15px}.article-add-edit-container form .left .upload .input{display:flex;flex-direction:column;width:100%}.article-add-edit-container form .left .upload .input input{display:none}.article-add-edit-container form .left .upload .input label{width:100%;height:50px;padding:5px 10px;background-color:#fff;color:var(--project-primary-color);border-radius:5px;cursor:pointer;border:solid var(--project-primary-color);display:flex;align-items:center;justify-content:center}.article-add-edit-container form .left .upload .input label:hover{transition:all .3 ease-in-out;background-color:var(--project-primary-color);color:#fff}.article-add-edit-container form .left .upload .input label i{margin-right:7px}.article-add-edit-container form .left .upload small{margin-top:10px}.article-add-edit-container form .right{display:flex;justify-content:center;flex-direction:column;width:700px;border-radius:7px;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.article-add-edit-container form .right .row-one{width:100%}.article-add-edit-container form .right .row-two{display:flex;justify-content:space-between}.article-add-edit-container form .right .calendar-bloc .field:first-child,.article-add-edit-container form .right .video-bloc .field:first-child{flex:1;margin-right:20px}.article-add-edit-container form .right .calendar-bloc .field:last-child,.article-add-edit-container form .right .video-bloc .field:last-child{flex:2}.article-add-edit-container form .right .calendar-bloc .field p-calendar,.article-add-edit-container form .right .video-bloc .field p-calendar{width:100%}.article-add-edit-container form .right .calendar-bloc .field p-calendar span,.article-add-edit-container form .right .video-bloc .field p-calendar span{width:100%}.article-add-edit-container form .right .field{display:flex;flex-direction:column;margin-bottom:20px;flex:1}.article-add-edit-container form .right .field label{margin-bottom:7px}.article-add-edit-container form .right .field small{margin:10px 0 0}.article-add-edit-container form .right .field .disabledInput{background-color:#d3d3d3}.article-add-edit-container form .right .field .enabledInput{background-color:none}.article-add-edit-container form .right .field .p-button{color:#fff;background:var(--project-primary-color);border:1px solid var(--project-primary-color)}.article-add-edit-container form .right .field .p-dropdown,.article-add-edit-container form .right .field .p-dropdown span{width:100%}@media all and (max-width: 990px){.add-replay form{width:100%}}@media all and (max-width: 990px){.add-replay form{padding:20px}}\n"],encapsulation:2})}}return r})();var ht=c(6399);function bt(r,a){if(1&r){const e=t.RV6();t.qex(0),t.j41(1,"h1",10),t.EFF(2,"Cr\xe9er Une Rubrique"),t.k0s(),t.j41(3,"p",11),t.EFF(4,"Cr\xe9ation d'une nouvelle rubrique d'articles"),t.k0s(),t.j41(5,"div",12)(6,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSaveRubric())}),t.nrm(7,"i",14),t.EFF(8," Ajouter "),t.k0s(),t.j41(9,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onCancelAddEditRubric())}),t.nrm(10,"i",16),t.EFF(11," Annuler "),t.k0s()(),t.bVm()}}function ft(r,a){if(1&r){const e=t.RV6();t.j41(0,"h1",10),t.EFF(1,"Modifier Une Rubrique"),t.k0s(),t.j41(2,"p",11),t.EFF(3,"Modification d'une rubrique d'articles"),t.k0s(),t.j41(4,"div",12)(5,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onEditRubric())}),t.nrm(6,"i",17),t.EFF(7," Modifier "),t.k0s(),t.j41(8,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onCancelAddEditRubric())}),t.nrm(9,"i",16),t.EFF(10," Annuler "),t.k0s()()}}function vt(r,a){1&r&&(t.j41(0,"div",5)(1,"label"),t.EFF(2,"Activer?"),t.k0s(),t.nrm(3,"p-inputSwitch",18),t.k0s())}function _t(r,a){1&r&&(t.j41(0,"small",19),t.EFF(1,"Renseigner le nom de la rubrique"),t.k0s())}function Ct(r,a){1&r&&(t.j41(0,"small",19),t.EFF(1,"Renseigner une courte description"),t.k0s())}let w=(()=>{class r{constructor(e,n,i,o,s,b){this.fb=e,this.artcileService=n,this.messageService=i,this.location=o,this.activatedRoute=s,this.authService=b,this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1}ngOnInit(){this.initForm(),this.checkEditMode(),this.getUserConnected()}initForm(){this.rubricForm=this.fb.group({name:["",l.k0.required],description:["",l.k0.required],isActive:[!1]})}get formControls(){return this.rubricForm.controls}checkEditMode(){this.activatedRoute.params.subscribe(e=>{e.id&&(this.isEditMode=!0,this.artcileService.getRubricById(e.id).subscribe(n=>{"success"===n.status&&(this.initialReplayDataWhenEdit=n.data,this.rubricForm.controls.name.setValue(this.initialReplayDataWhenEdit.name),this.rubricForm.controls.description.setValue(this.initialReplayDataWhenEdit.description),this.rubricForm.controls.isActive.setValue(this.initialReplayDataWhenEdit.isActive))},()=>{this.messageService.add({severity:"warn",detail:"Rubrique inexistant, contactez le webmaster"})}))},()=>{this.messageService.add({severity:"warn",detail:"Rubrique inconnue"})})}getUserConnected(){this.connectedUser=this.activatedRoute.snapshot.data.user}onCancelAddEditRubric(){this.location.back()}onSaveRubric(){if(this.isSaveButtonClicked=!0,this.rubricForm.invalid)return;const e={name:this.rubricForm.get("name")?.value,description:this.rubricForm.get("description")?.value,isActive:this.rubricForm.get("isActive")?.value,userId:this.connectedUser.id};this.artcileService.addRubric(e).subscribe(n=>{this.messageService.add({severity:"success",detail:n.message}),(0,C.s)((0,E.O)(2e3)).then(()=>{this.location.back()})})}onEditRubric(){if(this.isEditButtonClicked=!0,this.rubricForm.controls.name.value===this.initialReplayDataWhenEdit.name&&this.rubricForm.controls.description.value===this.initialReplayDataWhenEdit.description&&this.rubricForm.controls.isActive.value===this.initialReplayDataWhenEdit.isActive)return void this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xe9e"});let e={};this.rubricForm.controls.name.value!==this.initialReplayDataWhenEdit.name&&(e={...e,name:this.rubricForm.controls.name.value}),this.rubricForm.controls.description.value!==this.initialReplayDataWhenEdit.description&&(e={...e,description:this.rubricForm.controls.description.value}),this.rubricForm.controls.isActive.value!==this.initialReplayDataWhenEdit.isActive&&(e={...e,isActive:this.rubricForm.controls.isActive.value}),e={...e,userId:this.connectedUser.id},this.artcileService.editRubric(this.initialReplayDataWhenEdit.id,e).subscribe(n=>{"success"===n.status&&(this.messageService.add({severity:"success",detail:n.message}),(0,C.s)((0,E.O)(2e3)).then(()=>{this.location.back()}))},()=>{this.messageService.add({severity:"info",detail:"Programme inconnue"})})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(l.ok),t.rXU(h.q),t.rXU(d.bg),t.rXU(u.aZ),t.rXU(p.nX),t.rXU(ht.u))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-article-rubric-add-edit-container"]],standalone:!0,features:[t.Jv_([d.bg]),t.aNF],decls:17,vars:6,consts:[["editMode",""],[1,"article-rubric-add-edit-container"],[4,"ngIf","ngIfElse"],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["type","text","pInputText","","formControlName","name"],["class","p-error",4,"ngIf"],["type","text","pInputText","","formControlName","description"],["position","top-right"],[1,"title"],[1,"sub-title"],[1,"actions"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],["type","button",1,"cancel",3,"click"],[1,"pi","pi-times"],[1,"pi","pi-pencil"],["formControlName","isActive"],[1,"p-error"]],template:function(n,i){if(1&n&&(t.j41(0,"div",1),t.DNE(1,bt,12,0,"ng-container",2)(2,ft,11,0,"ng-template",null,0,t.C5r),t.j41(4,"form",3),t.DNE(5,vt,4,0,"div",4),t.j41(6,"div",5)(7,"label"),t.EFF(8,"Nom de la rubrique"),t.k0s(),t.nrm(9,"input",6),t.DNE(10,_t,2,0,"small",7),t.k0s(),t.j41(11,"div",5)(12,"label"),t.EFF(13,"Description"),t.k0s(),t.nrm(14,"input",8),t.DNE(15,Ct,2,0,"small",7),t.k0s()(),t.nrm(16,"p-toast",9),t.k0s()),2&n){const o=t.sdS(3);t.R7$(),t.Y8G("ngIf",!i.isEditMode)("ngIfElse",o),t.R7$(3),t.Y8G("formGroup",i.rubricForm),t.R7$(),t.Y8G("ngIf",i.isEditMode),t.R7$(5),t.Y8G("ngIf",i.formControls.name.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked)),t.R7$(5),t.Y8G("ngIf",i.formControls.description.invalid&&(i.isSaveButtonClicked||i.isEditButtonClicked))}},dependencies:[u.bT,m.bG,g.MB,g.y8,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,_.u,_.S,k.H_,k.HW],styles:[".article-rubric-add-edit-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:5px 10px;background-color:#f1f1f1;margin:60px 0 30px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;outline:none;padding:6px 10px;border-radius:100px;color:green;width:-moz-fit-content;width:fit-content;cursor:pointer;background-color:#fff;margin-left:10px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{border:solid var(--project-primary-color);color:var(--project-primary-color)}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--project-primary-color)}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{border:solid gray;color:gray}.article-rubric-add-edit-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]:hover{color:#fff;background-color:gray}.article-rubric-add-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:500px;border-radius:7px;margin:0 auto;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;flex:1}.article-rubric-add-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:7px}.article-rubric-add-edit-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin:10px 0 0}@media all and (max-width: 990px){.add-rubric[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}}@media all and (max-width: 990px){.add-rubric[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:20px}}"]})}}return r})();const Et=[{path:"liste-par-type-de-rubrique",component:tt},{path:"creer-article",component:I},{path:"modifier-article/:id",component:I},{path:"liste-rubriques",component:X},{path:"creer-rubrique",component:w},{path:"modifier-rubrique/:id",component:w}];let kt=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(Et),p.iI]})}}return r})(),Ft=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[u.MD,kt]})}}return r})()}}]);