"use strict";(self.webpackChunkndabbikokoo_admin=self.webpackChunkndabbikokoo_admin||[]).push([[506],{6506:(M,g,i)=>{i.r(g),i.d(g,{LoginModule:()=>j});var d=i(5678),s=i(4341),p=i(4101),c=i(177),t=i(4438);let u=(()=>{class e{constructor(){this.strokeWidth="2",this.fill="none",this.animationDuration="2s"}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["p-progressSpinner"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration"},decls:3,vars:6,consts:[["role","alert","aria-busy","true",1,"p-progress-spinner",3,"ngStyle","ngClass"],["viewBox","25 25 50 50",1,"p-progress-spinner-svg"],["cx","50","cy","50","r","20","stroke-miterlimit","10",1,"p-progress-spinner-circle"]],template:function(o,n){1&o&&(t.j41(0,"div",0),t.qSk(),t.j41(1,"svg",1),t.nrm(2,"circle",2),t.k0s()()),2&o&&(t.Y8G("ngStyle",n.style)("ngClass",n.styleClass),t.R7$(),t.xc7("animation-duration",n.animationDuration),t.R7$(),t.BMQ("fill",n.fill)("stroke-width",n.strokeWidth))},dependencies:[c.YU,c.B3],styles:['.p-progress-spinner{position:relative;margin:0 auto;width:100px;height:100px;display:inline-block}.p-progress-spinner:before{content:"";display:block;padding-top:100%}.p-progress-spinner-svg{animation:p-progress-spinner-rotate 2s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;inset:0;margin:auto}.p-progress-spinner-circle{stroke-dasharray:89,200;stroke-dashoffset:0;stroke:#d62d20;animation:p-progress-spinner-dash 1.5s ease-in-out infinite,p-progress-spinner-color 6s ease-in-out infinite;stroke-linecap:round}@keyframes p-progress-spinner-rotate{to{transform:rotate(360deg)}}@keyframes p-progress-spinner-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}@keyframes p-progress-spinner-color{to,0%{stroke:#d62d20}40%{stroke:#0057e7}66%{stroke:#008744}80%,90%{stroke:#ffa700}}\n'],encapsulation:2,changeDetection:0}),e})(),h=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[c.MD]}),e})();var b=i(8350),f=i(6592),m=i(5335),x=i(6399),y=i(9137);const v=()=>({width:"20px",height:"20px"});function k(e,l){if(1&e&&(t.qex(0),t.j41(1,"p",16),t.EFF(2),t.nI1(3,"json"),t.k0s(),t.bVm()),2&e){const o=t.XpG();t.R7$(2),t.JRh(t.bMT(3,1,o.messageError))}}function S(e,l){1&e&&(t.j41(0,"small",17),t.EFF(1,"Renseigner votre login"),t.k0s())}function C(e,l){1&e&&(t.j41(0,"small",17),t.EFF(1,"Renseigner votre mot de passe"),t.k0s())}function F(e,l){1&e&&(t.qex(0),t.nrm(1,"p-progressSpinner",18),t.bVm()),2&e&&(t.R7$(),t.Aen(t.lJ4(2,v)))}function w(e,l){1&e&&t.EFF(0,"Se Connecter")}const E=[{path:"",component:(()=>{class e{constructor(o,n,r,a){this.fb=o,this.authService=n,this.userService=r,this.router=a,this.isSaveButtonClicked=!1,this.isMessageErrorDisplayed=!1,this.isLoginFormSubmittedAndNotErrorOnClientSide=!1}ngOnInit(){this.redirectOnAlreadyLog(),this.initForm()}redirectOnAlreadyLog(){this.authService.isLogged$.subscribe(o=>{!0===o&&this.router.navigateByUrl("")})}initForm(){this.loginForm=this.fb.group({email:["",s.k0.required],password:["",s.k0.required]})}get f(){return this.loginForm.controls}onLogin(){this.isMessageErrorDisplayed=!1,this.isSaveButtonClicked=!0,!this.loginForm.invalid&&(this.isLoginFormSubmittedAndNotErrorOnClientSide=!0,this.authService.login(this.loginForm.value).subscribe({next:o=>{this.handleSuccessfullyLogged(o),this.isLoginFormSubmittedAndNotErrorOnClientSide=!1,this.router.navigateByUrl("")},error:o=>{this.isMessageErrorDisplayed=!0,this.messageError=o,this.isLoginFormSubmittedAndNotErrorOnClientSide=!1}}))}handleSuccessfullyLogged(o){const n=b.A(o),r=n.sub;n.exp-n.iat>0&&(this.authService.isLogged$.next(!0),this.setConnectedUser(r))}setConnectedUser(o){this.userService.getUserById(o).subscribe(n=>{this.authService.user$.next(n.data)})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(s.ze),t.rXU(x.u),t.rXU(y.g),t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],standalone:!0,features:[t.Jv_([p.bg]),t.aNF],decls:28,vars:8,consts:[["defaultText",""],[1,"login"],[1,"content","my-container"],[1,"form-bloc"],[1,"left"],["src","../../../../../assets/img/login/icon.png","alt","logo"],[1,"right"],[3,"submit","formGroup"],[4,"ngIf"],[1,"field"],["type","text","pInputText","","formControlName","email"],["class","p-error",4,"ngIf"],["formControlName","password",3,"feedback","toggleMask"],["routerLink","/mot-de-passe-oublie",1,"forgotten-password"],["type","submit"],[4,"ngIf","ngIfElse"],[1,"message-request-error"],[1,"p-error"],["strokeWidth","8"]],template:function(n,r){if(1&n){const a=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.nrm(4,"img",5),t.j41(5,"h1"),t.EFF(6,"Amadou B\xc2 2024"),t.k0s()(),t.j41(7,"div",6)(8,"form",7),t.bIt("submit",function(){return t.eBV(a),t.Njj(r.onLogin())}),t.DNE(9,k,4,3,"ng-container",8),t.j41(10,"h1"),t.EFF(11,"Se Connecter"),t.k0s(),t.j41(12,"div",9)(13,"label"),t.EFF(14,"Login"),t.k0s(),t.nrm(15,"input",10),t.DNE(16,S,2,0,"small",11),t.k0s(),t.j41(17,"div",9)(18,"label"),t.EFF(19,"Mot de passe"),t.k0s(),t.nrm(20,"p-password",12),t.DNE(21,C,2,0,"small",11),t.k0s(),t.j41(22,"p",13),t.EFF(23," Mot de passe oubli\xe9 ?"),t.k0s(),t.j41(24,"button",14),t.DNE(25,F,2,3,"ng-container",15),t.k0s()(),t.DNE(26,w,1,0,"ng-template",null,0,t.C5r),t.k0s()()()()}if(2&n){const a=t.sdS(27);t.R7$(8),t.Y8G("formGroup",r.loginForm),t.R7$(),t.Y8G("ngIf",r.isMessageErrorDisplayed),t.R7$(7),t.Y8G("ngIf",r.f.email.invalid&&r.isSaveButtonClicked),t.R7$(4),t.Y8G("feedback",!1)("toggleMask",!0),t.R7$(),t.Y8G("ngIf",r.f.password.invalid&&r.isSaveButtonClicked),t.R7$(4),t.Y8G("ngIf",r.isLoginFormSubmittedAndNotErrorOnClientSide)("ngIfElse",a)}},dependencies:[c.bT,f.u,f.S,m.Ou,m._2,h,u,c.TG,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,d.Wk],styles:[".login{display:flex;align-items:center;justify-content:center}.login .content{display:flex;align-items:center;justify-content:center;width:100%;min-height:100vh}.login .content .form-bloc{display:flex;overflow:hidden;border-radius:7px;width:-moz-fit-content;width:fit-content;box-shadow:#00000059 0 5px 15px;min-height:455px}.login .content .form-bloc .left{background-color:var(--project-primary-color);width:300px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;padding:20px}.login .content .form-bloc .left img{width:170px;border-radius:50%;box-shadow:#00000059 0 5px 15px}.login .content .form-bloc .left h1{text-align:center;margin:20px 0}.login .content .form-bloc .right{width:-moz-fit-content;width:fit-content;padding:20px 50px;background-color:#fff;display:flex;align-items:center;justify-content:center;width:400px}.login .content .form-bloc .right form{display:flex;flex-direction:column}.login .content .form-bloc .right form .message-request-error{padding:5px;text-align:center;margin-bottom:20px;background-color:#fddddd;color:red;font-size:.9em}.login .content .form-bloc .right form h1{margin-bottom:35px;text-align:center}.login .content .form-bloc .right form .field{display:flex;flex-direction:column;margin-bottom:15px;width:300px}.login .content .form-bloc .right form .field label{margin-bottom:7px}.login .content .form-bloc .right form .field .p-password,.login .content .form-bloc .right form .field .p-password input{width:100%}.login .content .form-bloc .right form .field small{margin:10px 0 0}.login .content .form-bloc .right form .forgotten-password{text-align:right;cursor:pointer;color:#569672;transition:all .2s ease-in-out;font-size:.9rem;font-style:italic}.login .content .form-bloc .right form .forgotten-password:hover{text-decoration:underline}.login .content .form-bloc .right form button{margin-top:10px;padding:10px;border:1px solid black;background-color:#fff;transition:all .2s ease-in-out;font-size:1.1em}.login .content .form-bloc .right form button:hover{color:#fff;background-color:#000}@media all and (max-width: 830px){.login .content{flex-direction:column}.login .content .form-bloc{flex-direction:column;width:400px;height:-moz-fit-content;height:fit-content;min-height:unset}.login .content .form-bloc .left{width:100%;padding:0 10px}.login .content .form-bloc .left img{display:none}.login .content .form-bloc .left h1{margin:20px 0;color:#fff}.login .content .form-bloc .right{width:100%;padding:20px 20px 40px}.login .content .form-bloc .right form,.login .content .form-bloc .right form .field{width:100%}.login .content .form-bloc .right form button{padding:7px;font-size:1em}}@media all and (max-width: 515px){.login{margin:0 20px}.login .content .form-bloc{width:100%}.login .content .form-bloc .right{padding:10px 20px 25px}}\n"],encapsulation:2})}}return e})()}];let L=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(E),d.iI]})}}return e})(),j=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[L]})}}return e})()}}]);