import{a as Ge,b as Ke,c as ot,d as rt,e as ct,f as pt,g as mt,h as ut}from"./chunk-OBLJTS6I.js";import{a as _t}from"./chunk-C5FPPYOD.js";import{c as at,d as st,e as lt,f as dt}from"./chunk-LO4ZCD5M.js";import{c as Je}from"./chunk-ANXTTF4S.js";import{b as nt}from"./chunk-GAILHOJW.js";import{a as it}from"./chunk-YYBEQ4IA.js";import{A as ie,Aa as We,B as ne,Ba as Qe,Ca as Ze,F as oe,G as S,Ga as $e,Ha as le,I as j,K as re,N as ae,Oa as Ue,P as He,Sa as k,Ta as et,Ua as tt,_ as Z,ga as Ne,k as Be,l as Xe,qa as se,ra as qe,sa as $,u as Ye,v as ee,wa as U,x as Q,z as te}from"./chunk-DDQR3AKU.js";import{$a as p,Ac as Ae,Bc as je,Cc as Pe,Db as T,Eb as L,Ec as Fe,Fb as z,Gb as Ee,Hb as g,Hc as A,Ib as N,Jb as q,La as s,M,Ob as W,Pa as ye,Pb as O,Qa as y,Qb as J,R as F,Rb as Ie,S as B,Sa as Ce,Sb as Te,Va as E,Xa as ve,Y as ge,Yb as Le,Z as u,Za as xe,Zb as ze,_,aa as he,ca as fe,eb as we,f as x,fa as X,fb as De,ga as be,gb as a,hb as Re,jb as Y,kb as K,lb as I,lc as Se,nc as ke,pb as l,qb as d,rb as C,sb as w,tb as D,ub as H,vb as v,wc as Ve,xb as b,xc as Me,yb as c,zc as Oe}from"./chunk-LNFGSNGS.js";import{a as _e}from"./chunk-DAQOROHW.js";function vt(t,o){t&1&&(l(0,"span"),g(1,"Aucune rubrique n'a encore \xE9t\xE9 enregistr\xE9e pour le moment."),d())}function xt(t,o){t&1&&(l(0,"tr"),C(1,"th",6),l(2,"th"),g(3,"Titre"),d(),l(4,"th"),g(5,"Description"),d(),l(6,"th",7),g(7,"Activ\xE9e ?"),d(),l(8,"th",8),g(9,"Actions"),d()())}function wt(t,o){t&1&&(l(0,"span",11),g(1," Oui "),d())}function Dt(t,o){t&1&&(l(0,"span",12),g(1,"Non"),d())}function Rt(t,o){if(t&1){let e=v();l(0,"div",16)(1,"i",17),b("click",function(){u(e);let i=c().$implicit,r=c(3);return _(r.editRubricEventTrigger(i.id))}),d(),l(2,"i",18),b("click",function(){u(e);let i=c().$implicit,r=c(3);return _(r.deleteRubricEventTrigger(i.id))}),d()()}}function Et(t,o){if(t&1){let e=v();l(0,"tr",9)(1,"td"),C(2,"span",10),d(),l(3,"td"),g(4),d(),l(5,"td"),g(6),d(),l(7,"td"),p(8,wt,2,0,"span",11)(9,Dt,2,0,"span",12),d(),l(10,"td",13)(11,"i",14),b("click",function(i){u(e);let r=Ee(13);return _(r.toggle(i))}),d(),l(12,"p-overlayPanel",null,0),p(14,Rt,3,0,"ng-template",15),d()()()}if(t&2){let e=o.$implicit,n=o.rowIndex;a("pReorderableRow",n),s(4),N(e.name),s(2),q(" ",e.description,""),s(2),I(e.isActive===!0?8:9)}}function It(t,o){if(t&1){let e=v();l(0,"p-table",3),b("onRowReorder",function(){u(e);let i=c(2);return _(i.onRowReorder())}),p(1,xt,10,0,"ng-template",4)(2,Et,15,4,"ng-template",5),d()}if(t&2){let e=c(2);a("value",e.currentRubricList)("reorderableColumns",!0)}}function Tt(t,o){if(t&1&&(l(0,"div",1),p(1,vt,2,0,"span")(2,It,3,2,"p-table",2),d()),t&2){let e=c();s(),I(e.currentRubricList.length===0?1:2)}}var gt=(()=>{class t{constructor(){this.deleteRubricEvent=new X,this.editRubricEvent=new X,this.itemsOrderChangedEvent=new X}onRowReorder(){let e={firstList:this._firstReplayList,currentList:this.currentRubricList};this.itemsOrderChangedEvent.emit(e)}editRubricEventTrigger(e){this.editRubricEvent.emit(e)}deleteRubricEventTrigger(e){this.deleteRubricEvent.emit(e)}ngOnChanges(e){e.currentRubricList.currentValue&&(this._firstReplayList=[...this.currentRubricList])}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=E({type:t,selectors:[["app-rubric-list"]],inputs:{currentRubricList:"currentRubricList"},outputs:{deleteRubricEvent:"deleteRubricEvent",editRubricEvent:"editRubricEvent",itemsOrderChangedEvent:"itemsOrderChangedEvent"},features:[ge],decls:1,vars:1,consts:[["op",""],[1,"rubric-list"],["responsiveLayout","scroll",3,"value","reorderableColumns"],["responsiveLayout","scroll",3,"onRowReorder","value","reorderableColumns"],["pTemplate","header"],["pTemplate","body"],[2,"width","3rem"],[2,"width","7rem"],[1,"last-column"],[3,"pReorderableRow"],["pReorderableRowHandle","",1,"pi","pi-align-justify"],[1,"state","active-rubric"],[1,"state","non-active-rubric"],[1,"row-actions"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"row-actions-event"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(n,i){n&1&&p(0,Tt,3,1,"div",1),n&2&&I(i.currentRubricList?0:-1)},dependencies:[dt,at,We,st,lt,nt,rt,ot],styles:[`.rubric-list{display:flex;flex-direction:column}.rubric-list p-table{width:100%;margin:auto;box-shadow:#00000029 0 1px 4px}.rubric-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr{position:relative;transition:all .8s ease-in-out}.rubric-list p-table .p-datatable .p-datatable-wrapper .p-datatable-table .p-datatable-tbody tr .row-reorder-handler{position:absolute;top:0;left:0;width:100%;height:100%}.rubric-list .last-column{text-align:right}.rubric-list .state{padding:.3rem 1rem;border-radius:100px;margin:auto;display:inline-block}.rubric-list .active-rubric{background-color:green;color:var(--project-white-primary-color)}.rubric-list .non-active-rubric{background-color:#cbcbcb;color:var(--project-black-primary-color)}.rubric-list .row-actions{text-align:right;position:relative}.rubric-list .row-actions i{padding:6px;font-weight:700;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;border:1.5px solid white}.rubric-list .row-actions i:hover{border:1.5px solid #191922}.rubric-list .p-datatable .p-datatable-tbody>tr>td{padding:.5rem 1rem!important}.row-actions-event{display:flex;flex-direction:column}.row-actions-event i{padding:6px;font-weight:700;margin:5px 0;border-radius:50%;cursor:pointer}.row-actions-event .pi-trash{color:red;border:1px solid red}.row-actions-event .pi-trash:hover{color:#fff;background-color:red}.row-actions-event .pi-pencil{color:green;border:1px solid green}.row-actions-event .pi-pencil:hover{color:#fff;background-color:green}.p-overlaypanel .p-overlaypanel-content{padding:7px}
`],encapsulation:2})}}return t})();var Lt=["mask"],zt=["content"],St=["footer"],kt=["titlebar"],Vt=(t,o,e)=>({position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex","justify-content":t,"align-items":o,"pointer-events":e}),Mt=t=>({"p-dialog p-component":!0,"p-dialog-maximized":t}),Ot=()=>({display:"flex","flex-direction":"column","pointer-events":"auto"}),At=(t,o)=>({transform:t,transition:o}),jt=t=>({value:"visible",params:t});function Pt(t,o){if(t&1){let e=v();l(0,"div",14),b("mousedown",function(i){u(e);let r=c(2);return _(r.initResize(i))}),d()}t&2&&a("ngClass","p-resizable-handle")}function Ft(t,o){t&1&&H(0)}function Bt(t,o){t&1&&C(0,"WindowMaximizeIcon")}function Xt(t,o){t&1&&C(0,"WindowMinimizeIcon")}function Yt(t,o){if(t&1&&(w(0),p(1,Bt,1,0,"WindowMaximizeIcon",11)(2,Xt,1,0,"WindowMinimizeIcon",11),D()),t&2){let e=c(5);s(),a("ngIf",!e.maximized&&!e.maximizeIconTemplate),s(),a("ngIf",e.maximized&&!e.minimizeIconTemplate)}}function Ht(t,o){}function Nt(t,o){t&1&&p(0,Ht,0,0,"ng-template")}function qt(t,o){if(t&1&&(w(0),p(1,Nt,1,0,null,21),D()),t&2){let e=c(5);s(),a("ngTemplateOutlet",e.maximizeIconTemplate)}}function Wt(t,o){}function Qt(t,o){t&1&&p(0,Wt,0,0,"ng-template")}function Zt(t,o){if(t&1&&(w(0),p(1,Qt,1,0,null,21),D()),t&2){let e=c(5);s(),a("ngTemplateOutlet",e.minimizeIconTemplate)}}function $t(t,o){if(t&1){let e=v();l(0,"p-button",20),b("onClick",function(){u(e);let i=c(4);return _(i.maximize())})("keydown.enter",function(){u(e);let i=c(4);return _(i.maximize())}),p(1,Yt,3,2,"ng-container",11)(2,qt,2,1,"ng-container",11)(3,Zt,2,1,"ng-container",11),d()}if(t&2){let e=c(4);a("styleClass","p-dialog-maximize-button")("tabindex",e.maximizable?"0":"-1"),s(),a("ngIf",!e.maximizeIcon),s(),a("ngIf",!e.maximized),s(),a("ngIf",e.maximized)}}function Ut(t,o){t&1&&(w(0),C(1,"TimesIcon"),D())}function Gt(t,o){}function Kt(t,o){t&1&&p(0,Gt,0,0,"ng-template")}function Jt(t,o){if(t&1&&(l(0,"span"),p(1,Kt,1,0,null,21),d()),t&2){let e=c(5);s(),a("ngTemplateOutlet",e.closeIconTemplate)}}function ei(t,o){if(t&1){let e=v();l(0,"p-button",22),b("onClick",function(){u(e);let i=c(4);return _(i.hide())})("keydown.enter",function(){u(e);let i=c(4);return _(i.hide())}),p(1,Ut,2,0,"ng-container",11)(2,Jt,2,1,"span",11),d()}if(t&2){let e=c(4);a("styleClass","p-dialog-close-button")("ariaLabel",e.ddconfig.closeAriaLabel||e.defaultCloseAriaLabel),s(),a("ngIf",!e.closeIconTemplate),s(),a("ngIf",e.closeIconTemplate)}}function ti(t,o){if(t&1&&(w(0),l(1,"span",16),g(2),d(),l(3,"div",17),p(4,$t,4,5,"p-button",18)(5,ei,3,4,"p-button",19),d(),D()),t&2){let e=c(3);s(),a("ngClass","p-dialog-title")("id",e.ariaLabelledBy),s(),N(e.ddconfig.header),s(),a("ngClass","p-dialog-header-actions"),s(),a("ngIf",e.ddconfig.maximizable),s(),a("ngIf",e.closable)}}function ii(t,o){if(t&1){let e=v();l(0,"div",15,3),b("mousedown",function(i){u(e);let r=c(2);return _(r.initDrag(i))}),p(2,Ft,1,0,"ng-container",12)(3,ti,6,6,"ng-container",11),d()}if(t&2){let e=c(2);a("ngClass","p-dialog-header"),s(2),a("ngComponentOutlet",e.headerTemplate),s(),a("ngIf",!e.headerTemplate)}}function ni(t,o){}function oi(t,o){t&1&&p(0,ni,0,0,"ng-template",23)}function ri(t,o){t&1&&H(0)}function ai(t,o){if(t&1&&(w(0),g(1),D()),t&2){let e=c(3);s(),q(" ",e.ddconfig.footer," ")}}function si(t,o){t&1&&H(0)}function li(t,o){if(t&1&&(l(0,"div",17,4),p(2,ai,2,1,"ng-container",11)(3,si,1,0,"ng-container",12),d()),t&2){let e=c(2);a("ngClass","p-dialog-footer"),s(2),a("ngIf",!e.footerTemplate),s(),a("ngComponentOutlet",e.footerTemplate)}}function di(t,o){if(t&1){let e=v();l(0,"div",7,1),b("@animation.start",function(i){u(e);let r=c();return _(r.onAnimationStart(i))})("@animation.done",function(i){u(e);let r=c();return _(r.onAnimationEnd(i))}),p(2,Pt,1,1,"div",8)(3,ii,4,3,"div",9),l(4,"div",10,2),p(6,oi,1,0,null,11)(7,ri,1,0,"ng-container",12),d(),p(8,li,4,3,"div",13),d()}if(t&2){let e=c();Y(e.ddconfig.style),K(e.ddconfig.styleClass),Re("width",e.ddconfig.width)("height",e.ddconfig.height),a("ngClass",J(22,Mt,e.maximizable&&e.maximized))("ngStyle",O(24,Ot))("@animation",J(28,jt,Ie(25,At,e.transformOptions,e.ddconfig.transitionOptions||"150ms cubic-bezier(0, 0, 0.2, 1)")))("pFocusTrapDisabled",e.ddconfig.focusTrap===!1),De("aria-labelledby",e.ariaLabelledBy)("aria-modal",!0)("id",e.dialogId),s(2),a("ngIf",e.ddconfig.resizable),s(),a("ngIf",e.ddconfig.showHeader!==!1),s(),a("ngClass","p-dialog-content")("ngStyle",e.ddconfig.contentStyle),s(2),a("ngIf",!e.contentTemplate),s(),a("ngComponentOutlet",e.contentTemplate),s(),a("ngIf",e.ddconfig.footer||e.footerTemplate)}}var ht=(()=>{class t{viewContainerRef;constructor(e){this.viewContainerRef=e}static \u0275fac=function(n){return new(n||t)(y(Ce))};static \u0275dir=ve({type:t,selectors:[["","pDynamicDialogContent",""]]})}return t})(),ft=(()=>{class t extends pt{name="dialog";static \u0275fac=(()=>{let e;return function(i){return(e||(e=he(t)))(i||t)}})();static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();var G=class{data;inputValues;header;ariaLabelledBy;footer;width;height;closeOnEscape=!1;focusOnShow=!0;focusTrap=!0;baseZIndex;autoZIndex=!1;dismissableMask=!1;rtl=!1;style;contentStyle;styleClass;transitionOptions;closable=!1;showHeader=!1;modal=!1;maskStyleClass;resizable=!1;draggable=!1;keepInViewport=!1;minX;minY;maximizable=!1;maximizeIcon;minimizeIcon;position;closeAriaLabel;appendTo;duplicate=!1;breakpoints;templates},P=class{constructor(){}close(o){this._onClose.next(o),setTimeout(()=>{this._onClose.complete()},1e3)}destroy(){this._onDestroy.next(null)}dragStart(o){this._onDragStart.next(o)}dragEnd(o){this._onDragEnd.next(o)}resizeInit(o){this._onResizeInit.next(o)}resizeEnd(o){this._onResizeEnd.next(o)}maximize(o){this._onMaximize.next(o)}_onClose=new x;onClose=this._onClose.asObservable();_onDestroy=new x;onDestroy=this._onDestroy.asObservable();_onDragStart=new x;onDragStart=this._onDragStart.asObservable();_onDragEnd=new x;onDragEnd=this._onDragEnd.asObservable();_onResizeInit=new x;onResizeInit=this._onResizeInit.asObservable();_onResizeEnd=new x;onResizeEnd=this._onResizeEnd.asObservable();_onMaximize=new x;onMaximize=this._onMaximize.asObservable();onChildComponentLoaded=new x},ci=ie([Q({transform:"{{transform}}",opacity:0}),ee("{{transition}}",Q({transform:"none",opacity:1}))]),pi=ie([ee("{{transition}}",Q({transform:"{{transform}}",opacity:0}))]),mi=(()=>{class t extends $e{renderer;ddconfig;dialogRef;zone;parentDialog;visible=!0;componentRef;mask;resizing;dragging;maximized;_style={};originalStyle;lastPageX;lastPageY;ariaLabelledBy;id=se("pn_id_");styleElement;insertionPoint;maskViewChild;contentViewChild;footerViewChild;headerViewChild;childComponentType;inputValues;container;wrapper;documentKeydownListener;documentEscapeListener;maskClickListener;transformOptions="scale(0.7)";documentResizeListener;documentResizeEndListener;documentDragListener;documentDragEndListener;_componentStyle=B(ft);get minX(){return this.ddconfig.minX?this.ddconfig.minX:0}get minY(){return this.ddconfig.minY?this.ddconfig.minY:0}get keepInViewport(){return this.ddconfig.keepInViewport}get maximizable(){return this.ddconfig.maximizable}get maximizeIcon(){return this.ddconfig.maximizeIcon}get minimizeIcon(){return this.ddconfig.minimizeIcon}get closable(){return this.ddconfig.closable}get style(){return this._style}get position(){return this.ddconfig.position}get defaultCloseAriaLabel(){return this.config.getTranslation(Ze.ARIA).close}set style(e){e&&(this._style=_e({},e),this.originalStyle=e)}get parent(){let e=Array.from(this.document.getElementsByClassName("p-dialog"));if(e.length>1)return e.pop()}get parentContent(){let e=Array.from(this.document.getElementsByClassName("p-dialog"));if(e.length>0){let n=e[e.length-1].querySelector(".p-dialog-content");if(n)return Array.isArray(n)?n[0]:n}}get header(){return this.ddconfig.header}get data(){return this.ddconfig.data}get breakpoints(){return this.ddconfig.breakpoints}get footerTemplate(){return this.ddconfig?.templates?.footer}get headerTemplate(){return this.ddconfig?.templates?.header}get contentTemplate(){return this.ddconfig?.templates?.content}get minimizeIconTemplate(){return this.ddconfig?.templates?.minimizeicon}get maximizeIconTemplate(){return this.ddconfig?.templates?.maximizeicon}get closeIconTemplate(){return this.ddconfig?.templates?.closeicon}get maskClass(){let n=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(i=>i===this.position);return{"p-dialog-mask":!0,"p-overlay-mask p-overlay-mask-enter":this.ddconfig.modal||this.ddconfig.dismissableMask,[`p-dialog-${n}`]:n}}get dialogId(){return this.attrSelector}zIndexForLayering;constructor(e,n,i,r,m){super(),this.renderer=e,this.ddconfig=n,this.dialogRef=i,this.zone=r,this.parentDialog=m}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle()}createStyle(){if(A(this.platformId)&&!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",this.renderer.appendChild(this.document.head,this.styleElement);let e="";for(let n in this.breakpoints)e+=`
                        @media screen and (max-width: ${n}) {
                            .p-dialog[id=${this.dialogId}]:not(.p-dialog-maximized) {
                                width: ${this.breakpoints[n]} !important;
                            }
                        }
                    `;this.renderer.setProperty(this.styleElement,"innerHTML",e),Ne(this.styleElement,"nonce",this.config?.csp()?.nonce)}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngAfterViewInit(){super.ngAfterViewInit(),this.loadChildComponent(this.childComponentType),this.ariaLabelledBy=this.getAriaLabelledBy(),this.cd.detectChanges()}getAriaLabelledBy(){let{header:e,showHeader:n}=this.ddconfig;return e===null||n===!1?null:se("pn_id_")+"_header"}loadChildComponent(e){let n=this.insertionPoint?.viewContainerRef;n?.clear(),this.componentRef=n?.createComponent(e),this.inputValues&&Object.entries(this.inputValues).forEach(([i,r])=>{this.componentRef.setInput(i,r)}),this.dialogRef.onChildComponentLoaded.next(this.componentRef.instance)}moveOnTop(){this.ddconfig.autoZIndex!==!1?(k.set("modal",this.container,(this.ddconfig.baseZIndex||0)+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1)):this.zIndexForLayering=k.generateZIndex("modal",(this.ddconfig.baseZIndex||0)+this.config.zIndex.modal)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.moveOnTop(),this.parent&&this.unbindGlobalListeners(),this.bindGlobalListeners(),this.container?.setAttribute(this.id,""),this.ddconfig.modal!==!1&&this.enableModality(),this.ddconfig.focusOnShow!==!1&&this.focus();break;case"void":this.wrapper&&this.ddconfig.modal!==!1&&S(this.wrapper,"p-overlay-mask-leave");break}}onAnimationEnd(e){e.toState==="void"&&(this.parentContent&&this.focus(this.parentContent),this.onContainerDestroy(),this.dialogRef.destroy())}onContainerDestroy(){this.unbindGlobalListeners(),this.container&&this.ddconfig.autoZIndex!==!1&&k.clear(this.container),this.zIndexForLayering&&k.revertZIndex(this.zIndexForLayering),this.ddconfig.modal!==!1&&this.disableModality(),this.container=null}close(){this.visible=!1,this.cd.markForCheck()}hide(){this.dialogRef&&this.dialogRef.close()}enableModality(){this.ddconfig.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.hide()})),this.ddconfig.modal!==!1&&S(this.document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.ddconfig.dismissableMask&&this.unbindMaskClickListener(),this.ddconfig.modal!==!1&&j(this.document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}focus(e=this.contentViewChild.nativeElement){let n=le.getFocusableElement(e,"[autofocus]");if(n){this.zone.runOutsideAngular(()=>{setTimeout(()=>n.focus(),5)});return}let i=le.getFocusableElement(e);i?this.zone.runOutsideAngular(()=>{setTimeout(()=>i.focus(),5)}):this.footerViewChild?this.focus(this.footerViewChild.nativeElement):!i&&this.headerViewChild&&this.focus(this.headerViewChild.nativeElement)}maximize(){this.maximized=!this.maximized,this.maximized?S(this.document.body,"p-overflow-hidden"):j(this.document.body,"p-overflow-hidden"),this.dialogRef.maximize({maximized:this.maximized})}initResize(e){this.ddconfig.resizable&&(this.documentResizeListener||this.bindDocumentResizeListeners(),this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,S(this.document.body,"p-unselectable-text"),this.dialogRef.resizeInit(e))}onResize(e){if(this.resizing){let n=e.pageX-this.lastPageX,i=e.pageY-this.lastPageY,r=ae(this.container),m=Z(this.container),R=Z(this.contentViewChild.nativeElement),h=r+n,f=m+i,V=this.container.style.minWidth,pe=this.container.style.minHeight,me=this.container.getBoundingClientRect(),ue=re();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(h+=n,f+=i),(!V||h>parseInt(V))&&me.left+h<ue.width&&(this._style.width=h+"px",this.container.style.width=this._style.width),(!pe||f>parseInt(pe))&&me.top+f<ue.height&&(this.contentViewChild.nativeElement.style.height=R+f-m+"px",this._style.height&&(this._style.height=f+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,j(this.document.body,"p-unselectable-text"),this.dialogRef.resizeEnd(e))}initDrag(e){oe(e.target,"p-dialog-header-icon")||oe(e.target.parentElement,"p-dialog-header-icon")||this.ddconfig.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",S(this.document.body,"p-unselectable-text"),this.dialogRef.dragStart(e))}onDrag(e){if(this.dragging){let n=ae(this.container),i=Z(this.container),r=e.pageX-this.lastPageX,m=e.pageY-this.lastPageY,R=this.container.getBoundingClientRect(),h=R.left+r,f=R.top+m,V=re();this.container.style.position="fixed",this.keepInViewport?(h>=this.minX&&h+n<V.width&&(this._style.left=h+"px",this.lastPageX=e.pageX,this.container.style.left=h+"px"),f>=this.minY&&f+i<V.height&&(this._style.top=f+"px",this.lastPageY=e.pageY,this.container.style.top=f+"px")):(this.lastPageX=e.pageX,this.container.style.left=h+"px",this.lastPageY=e.pageY,this.container.style.top=f+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,j(this.document.body,"p-unselectable-text"),this.dialogRef.dragEnd(e),this.cd.detectChanges())}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}bindDocumentDragListener(){A(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentDragListener=this.renderer.listen(this.document,"mousemove",this.onDrag.bind(this))})}bindDocumentDragEndListener(){A(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.renderer.listen(this.document,"mouseup",this.endDrag.bind(this))})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(this.documentDragEndListener(),this.documentDragListener=null)}unbindDocumentDragListener(){this.documentDragListener&&(this.documentDragListener(),this.documentDragListener=null)}bindDocumentResizeListeners(){A(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.renderer.listen(this.document,"mousemove",this.onResize.bind(this)),this.documentResizeEndListener=this.renderer.listen(this.document,"mouseup",this.resizeEnd.bind(this))})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(this.documentResizeListener(),this.documentResizeEndListener(),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindGlobalListeners(){this.ddconfig.closeOnEscape!==!1&&this.bindDocumentEscapeListener(),this.ddconfig.resizable&&this.bindDocumentResizeListeners(),this.ddconfig.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener())}unbindGlobalListeners(){this.unbindDocumentEscapeListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener()}bindDocumentEscapeListener(){let e=this.maskViewChild?this.maskViewChild.nativeElement.ownerDocument:"document";this.documentEscapeListener=this.renderer.listen(e,"keydown",n=>{if(n.which==27){let i=k.getCurrent();(parseInt(this.container.style.zIndex)==i||this.zIndexForLayering==i)&&this.hide()}})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}ngOnDestroy(){this.onContainerDestroy(),this.componentRef&&this.componentRef.destroy(),this.destroyStyle(),super.ngOnDestroy()}static \u0275fac=function(n){return new(n||t)(y(ye),y(G),y(P),y(be),y(t,12))};static \u0275cmp=E({type:t,selectors:[["p-dynamicDialog"],["p-dynamicdialog"],["p-dynamic-dialog"]],viewQuery:function(n,i){if(n&1&&(T(ht,5),T(Lt,5),T(zt,5),T(St,5),T(kt,5)),n&2){let r;L(r=z())&&(i.insertionPoint=r.first),L(r=z())&&(i.maskViewChild=r.first),L(r=z())&&(i.contentViewChild=r.first),L(r=z())&&(i.footerViewChild=r.first),L(r=z())&&(i.headerViewChild=r.first)}},features:[W([ft]),xe],decls:3,vars:9,consts:[["mask",""],["container",""],["content",""],["titlebar",""],["footer",""],[3,"ngStyle","ngClass"],["role","dialog","pFocusTrap","",3,"ngClass","ngStyle","style","class","pFocusTrapDisabled","width","height",4,"ngIf"],["role","dialog","pFocusTrap","",3,"ngClass","ngStyle","pFocusTrapDisabled"],["style","z-index: 90;",3,"ngClass","mousedown",4,"ngIf"],[3,"ngClass","mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],[4,"ngIf"],[4,"ngComponentOutlet"],[3,"ngClass",4,"ngIf"],[2,"z-index","90",3,"mousedown","ngClass"],[3,"mousedown","ngClass"],[3,"ngClass","id"],[3,"ngClass"],["rounded","","text","",3,"styleClass","tabindex","onClick","keydown.enter",4,"ngIf"],["rounded","","text","","severity","secondary",3,"styleClass","ariaLabel","onClick","keydown.enter",4,"ngIf"],["rounded","","text","",3,"onClick","keydown.enter","styleClass","tabindex"],[4,"ngTemplateOutlet"],["rounded","","text","","severity","secondary",3,"onClick","keydown.enter","styleClass","ariaLabel"],["pDynamicDialogContent",""]],template:function(n,i){n&1&&(l(0,"div",5,0),p(2,di,9,30,"div",6),d()),n&2&&(K(i.ddconfig.maskStyleClass),a("ngStyle",Te(5,Vt,i.position==="left"||i.position==="topleft"||i.position==="bottomleft"?"flex-start":i.position==="right"||i.position==="topright"||i.position==="bottomright"?"flex-end":"center",i.position==="top"||i.position==="topleft"||i.position==="topright"?"flex-start":i.position==="bottom"||i.position==="bottomleft"||i.position==="bottomright"?"flex-end":"center",i.ddconfig.modal?"auto":"none"))("ngClass",i.maskClass),s(2),a("ngIf",i.visible))},dependencies:[Fe,Ve,Me,Oe,je,Ae,Qe,ht,Ge,Ke,Ue,Je,ct],encapsulation:2,data:{animation:[Ye("animation",[te("void => visible",[ne(ci)]),te("visible => void",[ne(pi)])])]}})}return t})();var ce=class{_parentInjector;_additionalTokens;constructor(o,e){this._parentInjector=o,this._additionalTokens=e}get(o,e,n){let i=this._additionalTokens.get(o);return i||this._parentInjector.get(o,e)}},bt=(()=>{class t{appRef;injector;document;dialogComponentRefMap=new Map;constructor(e,n,i){this.appRef=e,this.injector=n,this.document=i}open(e,n){if(!this.duplicationPermission(e,n))return null;let i=this.appendDialogComponentToBody(n,e);return this.dialogComponentRefMap.get(i).instance.childComponentType=e,this.dialogComponentRefMap.get(i).instance.inputValues=n.inputValues,i}getInstance(e){return this.dialogComponentRefMap.get(e).instance}appendDialogComponentToBody(e,n){let i=new WeakMap;i.set(G,e);let r=new P;i.set(P,r);let m=r.onClose.subscribe(()=>{this.dialogComponentRefMap.get(r).instance.close()}),R=r.onDestroy.subscribe(()=>{this.removeDialogComponentFromBody(r),R.unsubscribe(),m.unsubscribe()}),h=Se(mi,{environmentInjector:this.appRef.injector,elementInjector:new ce(this.injector,i)});this.appRef.attachView(h.hostView);let f=h.hostView.rootNodes[0];return!e.appendTo||e.appendTo==="body"?this.document.body.appendChild(f):He(e.appendTo,f),this.dialogComponentRefMap.set(r,h),r}removeDialogComponentFromBody(e){if(!e||!this.dialogComponentRefMap.has(e))return;let n=this.dialogComponentRefMap.get(e);this.appRef.detachView(n.hostView),n.destroy(),n.changeDetectorRef.detectChanges(),this.dialogComponentRefMap.delete(e)}duplicationPermission(e,n){if(n.duplicate)return!0;let i=!0;for(let[r,m]of this.dialogComponentRefMap)if(m.instance.childComponentType===e){i=!1;break}return i}static \u0275fac=function(n){return new(n||t)(F(we),F(fe),F(ke))};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();var yt=(()=>{class t{areArraysEquals(e,n){if(typeof e!=typeof n)return!1;let i=e.map(m=>m.id),r=n.map(m=>m.id);for(let m=0;m<i.length;m++)if(i[m]!==r[m])return!0;return!1}findDifferentIdsAndIndices(e,n){let i=[];for(let r=0;r<Math.min(e.length,n.length);r++)e[r]?.id!==n[r]?.id&&i.push({index:r,id:n[r]?.id});return i}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _i=()=>({width:"50vw"}),gi=()=>({"960px":"75vw","640px":"100vw"});function hi(t,o){if(t&1){let e=v();l(0,"button",9),b("click",function(){u(e);let i=c();return _(i.setNewItemsOrder())}),C(1,"i",10),g(2," Sauvegarder l'odre "),d()}}var yn=(()=>{class t{constructor(e,n,i,r){this.messageService=e,this.confirmationService=n,this.reorderUtils=i,this.router=r,this.blogService=B(_t),this.rubricList$=this.blogService.getBlogRubrics(),this.topHeaderPageData={title:"Rubriques Cr\xE9\xE9es",description:"Liste de toutes les rubriques d'articles"},this.subscriptions=[],this.areThereNewOrderToSave=!1}onReorderDetect(e){this.firstOrderedReplayList=e.firstList,this.currentOrderedReplayList=e.currentList,this.areThereNewOrderToSave=this.reorderUtils.areArraysEquals(this.firstOrderedReplayList,this.currentOrderedReplayList)}onEditEventDetect(e){let n=e;this.subscriptions.push(this.blogService.getBlogRubricById(n).subscribe({next:i=>{i.status==="success"?this.router.navigate([`/blog/rubriques/modifier/${n}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:i.message})},error:i=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}}))}deleteRubricById(e){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cette rubrique ?",rejectButtonProps:{label:"Annuler",icon:"pi pi-times",outlined:!0,size:"small"},acceptButtonProps:{label:"Supprimer",icon:"pi pi-trash",size:"small"},accept:()=>{let n=e;this.subscriptions.push(this.blogService.deleteRubric(n).subscribe({next:i=>{i.status==="success"?(this.rubricList$=this.blogService.getBlogRubrics(),this.messageService.add({severity:"success",detail:i.message})):this.messageService.add({severity:"error",detail:i.message})},error:i=>{this.messageService.add({severity:"error",detail:"Erreur syst\xE8me: faire appel au webmaster"})}}))},reject:n=>{switch(n){case qe.REJECT:this.messageService.add({severity:"info",detail:"Suppression annul\xE9e"});break}}})}setNewItemsOrder(){let e=this.reorderUtils.findDifferentIdsAndIndices(this.firstOrderedReplayList,this.currentOrderedReplayList)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(n){return new(n||t)(y(U),y($),y(yt),y(Be))}}static{this.\u0275cmp=E({type:t,selectors:[["app-rubric-list-container"]],features:[W([U,$,bt])],decls:11,vars:10,consts:[[1,"rubric-list-container","pages"],[3,"topHeaderData"],[1,"actions-bar"],["type","button",1,"save"],["type","button","routerLink","/blog/rubriques/creer",1,"add"],[1,"pi","pi-plus"],[3,"itemsOrderChangedEvent","editRubricEvent","deleteRubricEvent","currentRubricList"],["styleClass","confirm-delete-dialog","header","Confirmation de suppression","acceptLabel","Oui","rejectLabel","Non",3,"breakpoints"],["position","top-right"],["type","button",1,"save",3,"click"],[1,"pi","pi-save"]],template:function(n,i){n&1&&(l(0,"div",0),C(1,"app-page-top-header",1),l(2,"div",2),p(3,hi,3,0,"button",3),l(4,"button",4),C(5,"i",5),g(6," Cr\xE9er rubrique "),d()(),l(7,"app-rubric-list",6),Le(8,"async"),b("itemsOrderChangedEvent",function(m){return i.onReorderDetect(m)})("editRubricEvent",function(m){return i.onEditEventDetect(m)})("deleteRubricEvent",function(m){return i.deleteRubricById(m)}),d()(),C(9,"p-confirmDialog",7)(10,"p-toast",8)),n&2&&(s(),a("topHeaderData",i.topHeaderPageData),s(2),I(i.areThereNewOrderToSave?3:-1),s(4),a("currentRubricList",ze(8,6,i.rubricList$)),s(2),Y(O(8,_i)),a("breakpoints",O(9,gi)))},dependencies:[Xe,Pe,tt,et,ut,mt,it,gt],styles:[`.rubric-list-container{display:flex;flex-direction:column}
`],encapsulation:2})}}return t})();export{yn as ArticleRubricListContainerComponent};
