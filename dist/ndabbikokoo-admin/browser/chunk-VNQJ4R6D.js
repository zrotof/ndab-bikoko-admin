import{c as J,d as Y,g as K,h as Q}from"./chunk-JO7L7A46.js";import{c as G,f as N}from"./chunk-7WDP7VCX.js";import"./chunk-QX6DPA5I.js";import{a as U}from"./chunk-FRP3AOF3.js";import{d as O}from"./chunk-UWAIENCY.js";import{o as q}from"./chunk-R74AP4LI.js";import{Aa as B,Ta as F,Ua as R,k as H,l as j,ra as z,sa as S,wa as y}from"./chunk-MQQ7BALU.js";import{$a as d,Cc as V,Gb as w,Hb as l,Jb as k,Kb as D,La as s,Mc as $,Ob as I,Pb as T,S as g,Va as C,Yb as M,Z as v,Zb as A,_ as f,gb as m,ia as h,ja as b,jb as L,lb as P,pb as r,qb as a,rb as _,vb as x,xb as u,yb as c}from"./chunk-LNFGSNGS.js";import"./chunk-DAQOROHW.js";function Z(e,o){e&1&&(r(0,"tr")(1,"th"),l(2," Image "),a(),r(3,"th"),l(4,"Type d'\xE9v\xEAnement"),a(),r(5,"th"),l(6,"lieux"),a(),r(7,"th"),l(8,"Date"),a(),r(9,"th",5),l(10,"Actions"),a()())}function ee(e,o){if(e&1&&_(0,"img",7),e&2){let t=c().$implicit;m("ngSrc",t.coverImage)}}function te(e,o){e&1&&l(0," / ")}function ne(e,o){e&1&&l(0," Assembl\xE9e g\xE9n\xE9rale ")}function ie(e,o){e&1&&l(0," Installation de canton ")}function re(e,o){e&1&&l(0," S\xE9minaire ")}function ae(e,o){e&1&&l(0," Anniversaire ")}function le(e,o){if(e&1){let t=x();r(0,"div",11)(1,"i",12),u("click",function(){v(t);let i=c().$implicit,p=c(2);return f(p.editPlanner(i.id))}),a(),r(2,"i",13),u("click",function(){v(t);let i=c().$implicit,p=c(2);return f(p.deletePlanner(i.id))}),a()()}}function oe(e,o){if(e&1){let t=x();r(0,"tr")(1,"td",6),d(2,ee,1,1,"img",7)(3,te,1,0),a(),r(4,"td"),d(5,ne,1,0)(6,ie,1,0)(7,re,1,0)(8,ae,1,0),a(),r(9,"td"),l(10),a(),r(11,"td"),l(12),a(),r(13,"td",8)(14,"i",9),u("click",function(i){v(t);let p=w(16);return f(p.toggle(i))}),a(),r(15,"p-overlayPanel",null,0),d(17,le,3,0,"ng-template",10),a()()()}if(e&2){let t,n=o.$implicit;s(2),P(n.coverImage?2:3),s(3),P((t=n.type)==="AG"?5:t==="IC"?6:t==="SEMINAR"?7:t==="BIRTHDAY"?8:-1),s(5),D(" ",n.town," ( ",n.country," ) "),s(2),k(" ",n.date," ")}}function pe(e,o){if(e&1&&(r(0,"p-table",2),d(1,Z,11,0,"ng-template",3)(2,oe,18,5,"ng-template",4),a()),e&2){let t=c();m("value",t.planners())}}function se(e,o){e&1&&(r(0,"p"),l(1,"Aucun \xE9v\xEAnement n'a encore \xE9t\xE9 cr\xE9\xE9 pour le moment."),a())}var W=(()=>{class e{constructor(){this.planners=b(),this.editPlannerEventTrigger=h(),this.deletePlannerEventTrigger=h()}editPlanner(t){this.editPlannerEventTrigger.emit(t)}deletePlanner(t){this.deletePlannerEventTrigger.emit(t)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-planner-list"]],inputs:{planners:[1,"planners"]},outputs:{editPlannerEventTrigger:"editPlannerEventTrigger",deletePlannerEventTrigger:"deletePlannerEventTrigger"},decls:3,vars:1,consts:[["op",""],[1,"planner-list"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"table-actions-column-header"],[1,"table-image"],["width","40","height","40",3,"ngSrc"],[1,"table-actions-header"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"table-actions-overlay-panel"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(n,i){if(n&1&&(r(0,"div",1),d(1,pe,3,1,"p-table",2)(2,se,2,0,"p"),a()),n&2){let p;s(),P(((p=i.planners())==null?null:p.length)>0?1:2)}},dependencies:[$,N,G,B,O,Y,J],styles:[`.planner-list p{padding:1rem;background-color:var(--project-white-primary-color);color:var(--project-black-primary-color)}
`],encapsulation:2})}}return e})();var me=()=>({width:"50vw"}),ce=()=>({"960px":"75vw","640px":"100vw"}),He=(()=>{class e{constructor(){this.plannerService=g(U),this.router=g(H),this.messageService=g(y),this.confirmationService=g(S),this.topHeaderPageData={title:"\xC9v\xEAnement",description:"Gestion des \xE9v\xE8nements"},this.planners$=this.plannerService.getPlannerList()}editPlanner(t){let n=t;this.plannerService.getPlannerById(n).subscribe({next:i=>{i.status==="success"?this.router.navigate([`/evenements/modifier/${n}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:i.message})},error:i=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}})}deletePlanner(t){let n=t;this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cet \xE9v\xEAnement?",rejectButtonProps:{label:"Annuler",icon:"pi pi-times",outlined:!0,size:"small"},acceptButtonProps:{label:"Supprimer",icon:"pi pi-trash",size:"small"},accept:()=>{this.plannerService.deletePlanner(n).subscribe({next:i=>{i.status==="success"?(this.planners$=this.plannerService.getPlannerList(),this.messageService.add({severity:"success",detail:i.message})):this.messageService.add({severity:"error",detail:i.message})},error:i=>{this.messageService.add({severity:"error",detail:"Erreur syst\xE8me: faire appel au webmaster"})}})},reject:i=>{switch(i){case z.REJECT:this.messageService.add({severity:"info",detail:"Suppression annul\xE9e"});break}}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-planner-list-container"]],features:[I([y,S])],decls:10,vars:9,consts:[[1,"planner-container","pages"],[3,"topHeaderData"],[1,"actions-bar"],["type","button","routerLink","/evenements/creer",1,"add"],[1,"pi","pi-plus"],[3,"deletePlannerEventTrigger","editPlannerEventTrigger","planners"],["styleClass","confirm-delete-dialog","header","Confirmation de suppression",3,"breakpoints"],["position","top-right"]],template:function(n,i){n&1&&(r(0,"div",0),_(1,"app-page-top-header",1),r(2,"div",2)(3,"button",3),_(4,"i",4),l(5," Cr\xE9er \xE9v\xE8nement "),a()(),r(6,"app-planner-list",5),M(7,"async"),u("deletePlannerEventTrigger",function(E){return i.deletePlanner(E)})("editPlannerEventTrigger",function(E){return i.editPlanner(E)}),a()(),_(8,"p-confirmDialog",6)(9,"p-toast",7)),n&2&&(s(),m("topHeaderData",i.topHeaderPageData),s(5),m("planners",A(7,5,i.planners$)),s(2),L(T(7,me)),m("breakpoints",T(8,ce)))},dependencies:[V,j,q,W,Q,K,R,F],encapsulation:2})}}return e})();export{He as PlannerListContainerComponent};
