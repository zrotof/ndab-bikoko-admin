import{a as Q}from"./chunk-RDOILADB.js";import{c as J,d as Y,g as K,h as x}from"./chunk-EYXR3HUR.js";import{c as R,f as q}from"./chunk-YRQFRAV4.js";import"./chunk-U47Z3OXB.js";import"./chunk-EQBWRM3H.js";import"./chunk-JUHVJHN3.js";import{a as G}from"./chunk-XYTUDMC5.js";import{Pa as O,Qa as S,g as F,h as $,na as z,oa as y,sa as T,wa as N}from"./chunk-IY7SHYKA.js";import"./chunk-H25HSPWU.js";import{$a as d,Cc as j,Gb as P,Hb as s,Ib as H,Jb as V,La as m,Mc as B,Ob as h,Pb as k,S as u,Va as C,Yb as I,Z as v,Zb as A,_ as f,gb as c,ia as w,ja as D,jb as M,lb as E,pb as t,qb as i,rb as p,vb as L,xb as _,yb as g}from"./chunk-LNFGSNGS.js";import"./chunk-DAQOROHW.js";function X(e,l){e&1&&(t(0,"tr")(1,"th"),s(2,"Image"),i(),t(3,"th"),s(4,"Nom"),i(),t(5,"th"),s(6,"Type"),i(),t(7,"th"),s(8,"Titre"),i(),t(9,"th"),s(10,"Est activ\xE9"),i(),t(11,"th",5),s(12,"Actions"),i()())}function Z(e,l){e&1&&s(0," Adh\xE9rent ")}function ee(e,l){e&1&&s(0," B\xE9n\xE9ficiare ")}function te(e,l){e&1&&(t(0,"span",8),p(1,"i",12),s(2," Oui "),i())}function ie(e,l){e&1&&(t(0,"span"),p(1,"i",13),s(2," Non "),i())}function ne(e,l){if(e&1){let r=L();t(0,"div",14)(1,"i",15),_("click",function(){v(r);let o=g().$implicit,a=g(2);return f(a.editTestimony(o.id))}),i(),t(2,"i",16),_("click",function(){v(r);let o=g().$implicit,a=g(2);return f(a.deleteTestimony(o.id))}),i()()}}function oe(e,l){if(e&1){let r=L();t(0,"tr")(1,"td",6),p(2,"img",7),i(),t(3,"td"),s(4),i(),t(5,"td"),d(6,Z,1,0)(7,ee,1,0),i(),t(8,"td"),s(9),i(),t(10,"td"),d(11,te,3,0,"span",8)(12,ie,3,0,"span"),i(),t(13,"td",9)(14,"i",10),_("click",function(o){v(r);let a=P(16);return f(a.toggle(o))}),i(),t(15,"p-overlayPanel",null,0),d(17,ne,3,0,"ng-template",11),i()()()}if(e&2){let r,n=l.$implicit;m(2),c("ngSrc",n.image),m(2),H(n.name),m(2),E((r=n.testimonyOwnerType)==="ADHERENT"?6:r==="BENEFICIARY"?7:-1),m(3),V(" ",n.title," "),m(2),E(n.isActive?11:12)}}function re(e,l){if(e&1&&(t(0,"p-table",2),d(1,X,13,0,"ng-template",3)(2,oe,18,5,"ng-template",4),i()),e&2){let r=g();c("value",r.testimonies())}}function se(e,l){e&1&&(t(0,"p"),s(1,"Aucun t\xE9moignage n'a encore \xE9t\xE9 enregistr\xE9 pour le moment."),i())}var U=(()=>{class e{constructor(){this.testimonies=D(),this.editTestimonyEventTrigger=w(),this.deleteTestimonyEventTrigger=w()}editTestimony(r){this.editTestimonyEventTrigger.emit(r)}deleteTestimony(r){this.deleteTestimonyEventTrigger.emit(r)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-testimony-list"]],inputs:{testimonies:[1,"testimonies"]},outputs:{editTestimonyEventTrigger:"editTestimonyEventTrigger",deleteTestimonyEventTrigger:"deleteTestimonyEventTrigger"},features:[h([T,y])],decls:3,vars:1,consts:[["op",""],[1,"testimony-list"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"table-actions-column-header"],[1,"table-image"],["width","40","height","40",3,"ngSrc"],[1,"active-tag"],[1,"table-actions-header"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"pi","pi-check"],[1,"pi","pi-times"],[1,"table-actions-overlay-panel"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(n,o){if(n&1&&(t(0,"div",1),d(1,re,3,1,"p-table",2)(2,se,2,0,"p"),i()),n&2){let a;m(),E(((a=o.testimonies())==null?null:a.length)>0?1:2)}},dependencies:[q,R,N,B,x,S,Y,J],styles:[`.testimony-list{margin-top:2rem}.testimony-list span{display:flex;align-items:center;width:fit-content;gap:.3rem;padding:.3rem .5rem;border-radius:100px;font-size:.9rem;background-color:var(--project-black-secondary-color);color:var(--project-white-primary-color)}.testimony-list .active-tag{background-color:#275a27}.testimony-list p{padding:1rem;background-color:var(--project-white-primary-color);color:var(--project-black-primary-color)}
`],encapsulation:2})}}return e})();var me=()=>({width:"50vw"}),ae=()=>({"960px":"75vw","640px":"100vw"}),Ae=(()=>{class e{constructor(){this.testimonyService=u(Q),this.router=u(F),this.messageService=u(T),this.confirmationService=u(y),this.testimonies$=this.testimonyService.getTestimoniesList(),this.topHeaderPageData={title:"T\xE9moignages",description:"Gestion des t\xE9moignages"}}editTestimonyEventHandler(r){let n=r;this.testimonyService.getTestimonyById(n).subscribe({next:o=>{o.status==="success"?this.router.navigate([`/temoignages/modifier/${n}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:o.message})},error:o=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}})}deleteTestimonyEventHandler(r){let n=r;this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer ce t\xE9moignage ?",rejectButtonProps:{label:"Annuler",icon:"pi pi-times",outlined:!0,size:"small"},acceptButtonProps:{label:"Supprimer",icon:"pi pi-trash",size:"small"},accept:()=>{this.testimonyService.deleteTestimonyById(n).subscribe({next:o=>{o.status==="success"?(this.testimonies$=this.testimonyService.getTestimoniesList(),this.messageService.add({severity:"success",detail:o.message})):this.messageService.add({severity:"error",detail:o.message})},error:o=>{this.messageService.add({severity:"error",detail:"Erreur syst\xE8me: faire appel au webmaster"})}})},reject:o=>{switch(o){case z.REJECT:this.messageService.add({severity:"info",detail:"Suppression annul\xE9e"});break}}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-testimonies-list-container"]],features:[h([T,y])],decls:10,vars:9,consts:[[1,"testimonies-list-container"],[3,"topHeaderData"],[1,"actions-bar"],["type","button","routerLink","/temoignages/creer",1,"add"],[1,"pi","pi-plus"],[3,"editTestimonyEventTrigger","deleteTestimonyEventTrigger","testimonies"],["styleClass","confirm-delete-dialog","header","Confirmation de suppression",3,"breakpoints"],["position","top-right"]],template:function(n,o){n&1&&(t(0,"div",0),p(1,"app-page-top-header",1),t(2,"div",2)(3,"button",3),p(4,"i",4),s(5," Cr\xE9er t\xE9moignage "),i()(),t(6,"app-testimony-list",5),I(7,"async"),_("editTestimonyEventTrigger",function(b){return o.editTestimonyEventHandler(b)})("deleteTestimonyEventTrigger",function(b){return o.deleteTestimonyEventHandler(b)}),i()(),p(8,"p-confirmDialog",6)(9,"p-toast",7)),n&2&&(m(),c("topHeaderData",o.topHeaderPageData),m(5),c("testimonies",A(7,5,o.testimonies$)),m(2),M(k(7,me)),c("breakpoints",k(8,ae)))},dependencies:[j,$,G,x,K,S,O,U],encapsulation:2})}}return e})();export{Ae as TestimoniesListContainerComponent};
