import{a as ee}from"./chunk-7ZYIHZCL.js";import{c as te,d as ie,g as re,h as w}from"./chunk-EYXR3HUR.js";import{c as X,f as Y}from"./chunk-YRQFRAV4.js";import"./chunk-U47Z3OXB.js";import{d as W}from"./chunk-EQBWRM3H.js";import"./chunk-JUHVJHN3.js";import{a as Z}from"./chunk-XYTUDMC5.js";import{Pa as U,Qa as M,g as J,h as N,na as K,oa as y,sa as x,wa as Q}from"./chunk-IY7SHYKA.js";import"./chunk-H25HSPWU.js";import{$a as h,Dc as k,Gb as F,Ha as D,Hb as l,Ib as z,Jb as T,La as c,Mc as G,Ob as S,Pb as O,S as b,Va as v,Yb as $,Z as _,_ as g,_b as q,gb as p,ia as f,ib as B,ja as A,jb as I,lb as R,mb as V,nb as H,ob as j,pb as r,qb as n,rb as u,vb as E,xb as m,yb as d}from"./chunk-LNFGSNGS.js";import{a as P,b as L}from"./chunk-DAQOROHW.js";function le(i,s){if(i&1){let e=E();r(0,"li")(1,"button",1),m("click",function(){let o=_(e).$implicit,a=d();return g(a.onChooseRubric(o.id))}),l(2),n()()}if(i&2){let e=s.$implicit;c(),B("active-rubric",e.isActive),c(),T(" ",e.name," ")}}function ae(i,s){i&1&&(r(0,"p"),l(1,"Aucune rubrique d'article cr\xE9\xE9e pour le moment"),n())}var oe=(()=>{class i{constructor(){this.rubrics=A(),this.chooseRubricEventEmiter=f()}onChooseRubric(e){this.chooseRubricEventEmiter.emit(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-rubric-list-container"]],inputs:{rubrics:[1,"rubrics"]},outputs:{chooseRubricEventEmiter:"chooseRubricEventEmiter"},decls:5,vars:1,consts:[[1,"rubric-list-container"],[3,"click"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"ul"),H(2,le,3,3,"li",null,V,!1,ae,2,0,"p"),n()()),t&2&&(c(2),j(o.rubrics()))},styles:[".rubric-list-container[_ngcontent-%COMP%]{display:flex;border-radius:6px;overflow:hidden}.rubric-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;list-style:none;overflow-x:auto}.rubric-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:100%}.rubric-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:1rem;border-radius:5px;background:#414643;border:1px solid transparent;padding:0 1rem;height:32px}.rubric-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border:1px solid var(--project-yellow-primary-color)}.rubric-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active-rubric[_ngcontent-%COMP%]{background-color:var(--project-yellow-primary-color);font-weight:500;border:1px solid var(--project-yellow-primary-color)}.rubric-list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--project-white-secondary-color)}"]})}}return i})();function se(i,s){i&1&&(r(0,"tr")(1,"th"),l(2," Image "),n(),r(3,"th"),l(4,"Titre"),n(),r(5,"th"),l(6,"Description"),n(),r(7,"th"),l(8,"Date"),n(),r(9,"th",6),l(10,"Actions"),n()())}function pe(i,s){if(i&1&&u(0,"img",8),i&2){let e=d().$implicit;p("ngSrc",e.coverImage)}}function me(i,s){i&1&&l(0," / ")}function de(i,s){if(i&1){let e=E();r(0,"div",13)(1,"i",14),m("click",function(){_(e);let o=d().$implicit,a=d(2);return g(a.editArticle(o.id))}),n(),r(2,"i",15),m("click",function(){_(e);let o=d().$implicit,a=d(2);return g(a.deleteArticle(o.id,o.rubricId))}),n()()}}function ue(i,s){if(i&1){let e=E();r(0,"tr")(1,"td",7),h(2,pe,1,1,"img",8)(3,me,1,0),n(),r(4,"td"),l(5),n(),u(6,"td",9),r(7,"td"),l(8),$(9,"date"),n(),r(10,"td",10)(11,"i",11),m("click",function(o){_(e);let a=F(13);return g(a.toggle(o))}),n(),r(12,"p-overlayPanel",null,0),h(14,de,3,0,"ng-template",12),n()()()}if(i&2){let e=s.$implicit;c(2),R(e.coverImage?2:3),c(3),z(e.title),c(),p("innerHTML",e.description,D),c(2),T(" ",q(9,4,e.date,"d MMMM y","","fr")," ")}}function _e(i,s){if(i&1&&(r(0,"p-table",3),h(1,se,11,0,"ng-template",4)(2,ue,15,9,"ng-template",5),n()),i&2){let e=d();p("value",e.articles())}}function ge(i,s){i&1&&(r(0,"p"),l(1,"Aucun article de cette rubrique n'a encore \xE9t\xE9 enregistr\xE9 pour le moment."),n())}var ce=(()=>{class i{constructor(){this.articles=A(),this.editArticleEventTrigger=f(),this.deleteArticleEventTrigger=f()}editArticle(e){this.editArticleEventTrigger.emit(e)}deleteArticle(e,t){this.deleteArticleEventTrigger.emit({articleId:e,rubricId:t})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-articles-list-container"]],inputs:{articles:[1,"articles"]},outputs:{editArticleEventTrigger:"editArticleEventTrigger",deleteArticleEventTrigger:"deleteArticleEventTrigger"},features:[S([x,y,k])],decls:4,vars:1,consts:[["op",""],[1,"articles-list-container"],[1,"article-list"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"table-actions-column-header"],[1,"table-image"],["width","40","height","40",3,"ngSrc"],[3,"innerHTML"],[1,"table-actions-header"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"table-actions-overlay-panel"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(t,o){if(t&1&&(r(0,"div",1)(1,"div",2),h(2,_e,3,1,"p-table",3)(3,ge,2,0,"p"),n()()),t&2){let a;c(2),R(((a=o.articles())==null?null:a.length)>0?2:3)}},dependencies:[G,k,Y,X,Q,W,w,M,ie,te],styles:[`.articles-list-container{margin-top:2rem}.articles-list-container .article-list p{padding:1rem;background-color:var(--project-white-primary-color);color:var(--project-black-primary-color)}.articles-list-container .default-state{height:15px;width:15px;border-radius:50%;background-color:#cbcbcb}.articles-list-container .active-replay{background-color:green}
`],encapsulation:2})}}return i})();var ve=()=>({width:"50vw"}),Ce=()=>({"960px":"75vw","640px":"100vw"}),Qe=(()=>{class i{constructor(){this.blogService=b(ee),this.router=b(J),this.messageService=b(x),this.confirmationService=b(y),this.topHeaderPageData={title:"Articles",description:"Gestion des articles de blog"}}ngOnInit(){this.getRubrics()}getRubrics(){this.blogService.getBlogRubrics().subscribe({next:e=>{this.rubrics=e.map(t=>L(P({},t),{isActive:!1})),this.rubrics.length>0&&this.onChooseRubricEventHandler(this.rubrics[0].id)}})}getBlogArticlesByRubricId(e){this.blogService.getBlogArticleList(e).subscribe({next:t=>{this.articles=t}})}onChooseRubricEventHandler(e){this.rubrics=this.rubrics.map(t=>L(P({},t),{isActive:t.id===e})),this.getBlogArticlesByRubricId(e)}editArticle(e){this.blogService.getBlogArticleById(e).subscribe({next:t=>{t.status==="success"?this.router.navigate([`/blog/articles/modifier/${e}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:t.message})},error:t=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}})}deleteArticle(e){this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cet article?",rejectButtonProps:{label:"Annuler",icon:"pi pi-times",outlined:!0,size:"small"},acceptButtonProps:{label:"Supprimer",icon:"pi pi-trash",size:"small"},accept:()=>{this.blogService.deleteArticle(e.articleId).subscribe({next:t=>{t.status==="success"?(this.getBlogArticlesByRubricId(e.rubricId),this.messageService.add({severity:"success",detail:t.message})):this.messageService.add({severity:"error",detail:t.message})},error:t=>{this.messageService.add({severity:"error",detail:"Erreur syst\xE8me: faire appel au webmaster"})}})},reject:t=>{switch(t){case K.REJECT:this.messageService.add({severity:"info",detail:"Suppression annul\xE9e"});break}}})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-article-list-container"]],features:[S([x,y])],decls:10,vars:8,consts:[[1,"article-container","pages"],[3,"topHeaderData"],[1,"actions-bar"],["type","button","routerLink","/blog/articles/creer",1,"add"],[1,"pi","pi-plus"],[3,"chooseRubricEventEmiter","rubrics"],[3,"deleteArticleEventTrigger","editArticleEventTrigger","articles"],["styleClass","confirm-delete-dialog","header","Confirmation de suppression",3,"breakpoints"],["position","top-right"]],template:function(t,o){t&1&&(r(0,"div",0),u(1,"app-page-top-header",1),r(2,"div",2)(3,"button",3),u(4,"i",4),l(5," Cr\xE9er article "),n()(),r(6,"app-rubric-list-container",5),m("chooseRubricEventEmiter",function(C){return o.onChooseRubricEventHandler(C)}),n(),r(7,"app-articles-list-container",6),m("deleteArticleEventTrigger",function(C){return o.deleteArticle(C)})("editArticleEventTrigger",function(C){return o.editArticle(C)}),n()(),u(8,"p-confirmDialog",7)(9,"p-toast",8)),t&2&&(c(),p("topHeaderData",o.topHeaderPageData),c(5),p("rubrics",o.rubrics),c(),p("articles",o.articles),c(),I(O(6,ve)),p("breakpoints",O(7,Ce)))},dependencies:[N,Z,oe,ce,w,re,M,U],styles:[`.article-container{display:flex;flex-direction:column}.article-container app-rubric-list-container{width:100%}
`],encapsulation:2})}}return i})();export{Qe as ArticleListContainerComponent};
