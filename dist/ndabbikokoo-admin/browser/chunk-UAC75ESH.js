import{a as ie,b as ae}from"./chunk-SFVALG4N.js";import{a as te,b as ne}from"./chunk-GU5SMQBJ.js";import{a as S}from"./chunk-XZITV3NF.js";import{a as oe}from"./chunk-IZ46LJIQ.js";import{a as K,b as Q}from"./chunk-U2DIKO2V.js";import{b as $,c as J,g as X,h as Z}from"./chunk-EQBWRM3H.js";import{b as j,c,e as q,f as H,h as U,i as G,j as O,k as Y,n as z}from"./chunk-JUHVJHN3.js";import{a as ee}from"./chunk-XYTUDMC5.js";import"./chunk-U47Z3OXB.js";import{Pa as N,Qa as R,g as W,h as M,sa as P}from"./chunk-IY7SHYKA.js";import"./chunk-H25HSPWU.js";import{$a as p,$b as A,Hb as o,Ia as k,Ib as I,La as r,Ob as V,Pb as T,S as f,Va as D,Z as v,_ as g,gb as u,ja as w,jb as F,jc as B,lb as m,n as b,pb as a,qb as n,rb as d,v as x,vb as E,wc as L,xb as y,yb as C}from"./chunk-LNFGSNGS.js";import"./chunk-DAQOROHW.js";var _=[{type:"AG",label:"Assembl\xE9e G\xE9n\xE9rale",color:"#006600"},{type:"IC",label:"Installation de canton",color:"#7E350E"},{type:"SEMINAR",label:"S\xE9minaire",color:"#0070C0"},{type:"BIRTHDAY",label:"Anniversaire",color:"#111010"},{type:"DYNAMO",label:"Soir\xE9e Ndab Dynamo",color:"#111010"}];var le=()=>({height:"320px"});function de(i,s){if(i&1){let t=E();a(0,"button",32),y("click",function(){v(t);let e=C();return g(e.onSavePlanner())}),d(1,"i",33),o(2," Ajouter "),n()}}function se(i,s){if(i&1){let t=E();a(0,"button",32),y("click",function(){v(t);let e=C();return g(e.onEditPlanner())}),d(1,"i",34),o(2," Modifier "),n()}}function pe(i,s){i&1&&(a(0,"small"),o(1,"Image manquante"),n())}function me(i,s){if(i&1&&(a(0,"div",16),p(1,pe,2,0,"small"),n()),i&2){let t=C();r(),m(t.formControls.coverImage.errors!=null&&t.formControls.coverImage.errors.required?1:-1)}}function ce(i,s){if(i&1&&(d(0,"span"),a(1,"div"),o(2),n()),i&2){let t=s.$implicit;F("width: 20px;height: 20px; border-radius:50px; margin-right:12px; background-color: "+t.color+";"),r(2),I(t.label)}}function ue(i,s){i&1&&(a(0,"small",16),o(1,"S\xE9lectionnez un type d'\xE9v\xEAnement"),n())}function he(i,s){i&1&&(a(0,"small",16),o(1,"Renseigner la date de d\xE9but"),n())}function fe(i,s){i&1&&(a(0,"small",16),o(1,"Renseigner la date de fin"),n())}function ve(i,s){i&1&&(a(0,"small",16),o(1,"Renseigner la ville"),n())}function ge(i,s){i&1&&(a(0,"small",16),o(1,"Renseigner le pays"),n())}function Ee(i,s){i&1&&(a(0,"small",16),o(1,"Renseigner le m\xE9dia vid\xE9o"),n())}function ye(i,s){i&1&&(a(0,"small",16),o(1,"Renseigner le contenu de l'article"),n())}var $e=(()=>{class i{constructor(){this.PLANNER_TYPES=_,this.PROCESS_STATE=S,this.processState=w(),this.id=w(),this.router=f(W),this.fb=f(Y),this.messageService=f(P),this.plannerService=f(oe),this.topHeaderPageData=B(()=>this.processState()===S.Create?{title:"Cr\xE9er Un \xC9v\xE8nement",description:"Cr\xE9ation d'un nouvel \xE9v\xE8nement"}:{title:"Modifier Un \xC9v\xE8nement",description:"Modification d'un \xE9v\xE8nement"}),this.isSaveButtonClicked=!1,this.isEditButtonClicked=!1,this.isEditMode=!1,this.isImageEdit=!1,this.isMediaVideoInputIsToDisable=!0}get formControls(){return this.plannerForm.controls}ngOnInit(){this.initForm(),this.checkEditMode(),this.onHandlingMedia()}initForm(){this.plannerForm=this.fb.group({eventType:["",c.required],dateStart:["",c.required],dateEnd:["",c.required],town:["",c.required],country:["",c.required],hasVideo:[!1],videoLink:[{value:"",disabled:!0}],content:["",c.required],coverImage:["",c.required]})}onHandlingMedia(){this.plannerForm.controls.hasVideo.valueChanges.subscribe(t=>{t?(this.plannerForm.controls.videoLink.enable(),this.plannerForm.controls.videoLink.setValidators(c.required)):(this.plannerForm.controls.videoLink.setValue(""),this.plannerForm.controls.videoLink.disable(),this.plannerForm.controls.videoLink.removeValidators(c.required)),this.isMediaVideoInputIsToDisable=!this.isMediaVideoInputIsToDisable,this.plannerForm.controls.videoLink.updateValueAndValidity()})}checkEditMode(){this.processState()===S.Edit&&this.plannerService.getPlannerById(this.id()).subscribe(t=>{if(t.status==="success"){this.initialPlannerDataWhenEdit=t.data;let l=_.filter(h=>h.type===this.initialPlannerDataWhenEdit.type);this.plannerForm.controls.eventType.setValue(l[0]),this.plannerForm.controls.dateStart.setValue(new Date(this.initialPlannerDataWhenEdit.dateStart)),this.plannerForm.controls.dateEnd.setValue(new Date(this.initialPlannerDataWhenEdit.dateEnd)),this.plannerForm.controls.town.setValue(this.initialPlannerDataWhenEdit.town),this.plannerForm.controls.country.setValue(this.initialPlannerDataWhenEdit.country),this.plannerForm.controls.hasVideo.setValue(this.initialPlannerDataWhenEdit.hasVideo),this.plannerForm.controls.videoLink.setValue(this.initialPlannerDataWhenEdit.videoLink),this.plannerForm.controls.content.setValue(this.initialPlannerDataWhenEdit.content);let e=document.getElementById("image-previewed");this.imageDisplay=`${this.initialPlannerDataWhenEdit.coverImage}`,e.style.display="block",this.plannerForm.controls.coverImage.clearValidators(),this.plannerForm.controls.coverImage.updateValueAndValidity()}},()=>{this.messageService.add({severity:"warn",detail:"\xC9v\xEAnement inexistant, contactez le webmaster"})})}getUserConnected(){}onSavePlanner(){if(this.isSaveButtonClicked=!0,this.plannerForm.invalid)return;let t=new FormData;this.plannerForm.get("eventType")?.value&&t.append("type",this.plannerForm.get("eventType")?.value.type),this.plannerForm.get("dateStart")?.value&&t.append("dateStart",this.plannerForm.get("dateStart")?.value),this.plannerForm.get("dateEnd")?.value&&t.append("dateEnd",this.plannerForm.get("dateEnd")?.value),this.plannerForm.get("town")?.value&&t.append("town",this.plannerForm.get("town")?.value),this.plannerForm.get("country")?.value&&t.append("country",this.plannerForm.get("country")?.value),this.plannerForm.get("hasVideo")?.value&&t.append("hasVideo",this.plannerForm.get("hasVideo")?.value),this.plannerForm.get("videoLink")?.value&&t.append("videoLink",this.plannerForm.get("videoLink")?.value),this.plannerForm.get("content")?.value&&t.append("content",this.plannerForm.get("content")?.value),this.plannerForm.get("coverImage")?.value&&t.append("coverImage",this.plannerForm.get("coverImage")?.value),t.append("userId","1"),this.plannerService.addPlanner(t).subscribe(l=>{this.messageService.add({severity:"success",detail:l.message}),b(x(2e3)).then(()=>{this.router.navigateByUrl("/evenements")})})}onEditPlanner(){if(this.isEditButtonClicked=!0,this.plannerForm.controls.eventType.value.type===this.initialPlannerDataWhenEdit.type&&this.plannerForm.controls.dateStart.value===this.initialPlannerDataWhenEdit.dateStart&&this.plannerForm.controls.dateEnd.value===this.initialPlannerDataWhenEdit.dateEnd&&this.plannerForm.controls.town.value===this.initialPlannerDataWhenEdit.town&&this.plannerForm.controls.country.value===this.initialPlannerDataWhenEdit.country&&this.plannerForm.controls.hasVideo.value===this.initialPlannerDataWhenEdit.hasVideo&&this.plannerForm.controls.videoLink.value===this.initialPlannerDataWhenEdit.videoLink&&this.plannerForm.controls.content.value===this.initialPlannerDataWhenEdit.content&&!this.isImageEdit){this.messageService.add({severity:"info",detail:"Aucune modification enregistr\xE9e"});return}let t=new FormData;this.plannerForm.get("eventType")?.value.type!=this.initialPlannerDataWhenEdit.type&&t.append("type",this.plannerForm.get("eventType")?.value.type),this.plannerForm.get("dateStart")?.value!=this.initialPlannerDataWhenEdit.dateStart&&t.append("dateStart",this.plannerForm.get("dateStart")?.value),this.plannerForm.get("dateEnd")?.value!=this.initialPlannerDataWhenEdit.dateEnd&&t.append("dateEnd",this.plannerForm.get("dateEnd")?.value),this.plannerForm.get("town")?.value!=this.initialPlannerDataWhenEdit.town&&t.append("town",this.plannerForm.get("town")?.value),this.plannerForm.get("country")?.value!=this.initialPlannerDataWhenEdit.country&&t.append("country",this.plannerForm.get("country")?.value),this.plannerForm.get("hasVideo")?.value!=this.initialPlannerDataWhenEdit.hasVideo&&t.append("hasVideo",this.plannerForm.get("hasVideo")?.value),this.plannerForm.get("videoLink")?.value!=this.initialPlannerDataWhenEdit.videoLink&&t.append("videoLink",this.plannerForm.get("videoLink")?.value),this.plannerForm.get("content")?.value!=this.initialPlannerDataWhenEdit.content&&t.append("content",this.plannerForm.get("content")?.value),this.isImageEdit&&t.append("coverImage",this.plannerForm.get("coverImage")?.value),t.append("userId","1"),this.plannerService.editPlannerById(this.initialPlannerDataWhenEdit.id,t).subscribe(l=>{l.status==="success"&&(this.messageService.add({severity:"success",detail:l.message}),b(x(2e3)).then(()=>{this.router.navigateByUrl("/evenements")}))},()=>{this.messageService.add({severity:"info",detail:"Programme inconnue"})})}showImagePreview(t){let l=t.target.files[0];if(l){this.isImageEdit=!0,this.plannerForm.patchValue({coverImage:l}),this.formControls.coverImage.updateValueAndValidity();let e=new FileReader;e.onload=()=>{this.imageDisplay=e.result},e.readAsDataURL(l);let h=document.getElementById("image-previewed");h.style.display="block"}}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275cmp=D({type:i,selectors:[["app-planner-add-edit-container"]],inputs:{processState:[1,"processState"],id:[1,"id"]},features:[V([P])],decls:67,vars:22,consts:[["item",""],[1,"planner-add-edit-containe","pages"],[3,"topHeaderData"],[1,"actions-bar"],["type","button","routerLink","/evenements",1,"cancel"],[1,"pi","pi-times"],["type","submit",1,"add"],[3,"formGroup"],[1,"left"],[1,"preview"],["id","image-previewed",3,"src"],[1,"upload"],[1,"input"],["for","image-input"],[1,"pi","pi-upload"],["type","file","id","image-input","accept","image/*",3,"change"],[1,"error-form"],[1,"right"],[1,"row-one-top"],[1,"select-type"],["formControlName","eventType","placeholder","S\xE9lectionnez","optionLabel","label",3,"options"],[1,"row-two"],[1,"field"],["formControlName","dateStart","placeholder","Date de d\xE9but",3,"iconDisplay","showIcon"],["formControlName","dateEnd","placeholder","Date de fin",3,"iconDisplay","showIcon"],["type","text","pInputText","","formControlName","town","placeholder","Ville de l'\xE9v\xEAnement"],["type","text","pInputText","","formControlName","country","placeholder","Pays de l'\xE9v\xEAnement"],["formControlName","hasVideo"],["type","text","pInputText","","formControlName","videoLink",3,"ngClass"],[1,"row-one"],["formControlName","content","placeholder","Renseignez le corps de l'article ici !"],["position","top-right"],["type","submit",1,"add",3,"click"],[1,"pi","pi-plus"],[1,"pi","pi-pencil"]],template:function(l,e){if(l&1){let h=E();a(0,"div",1),d(1,"app-page-top-header",2),a(2,"div",3)(3,"button",4),d(4,"i",5),o(5," Annuler "),n(),p(6,de,3,0,"button",6)(7,se,3,0,"button",6),n(),a(8,"form",7)(9,"div",8)(10,"div",9),d(11,"img",10),n(),a(12,"div",11)(13,"div",12)(14,"label",13),d(15,"i",14),o(16," Image de couverture "),n(),a(17,"input",15),y("change",function(re){return v(h),g(e.showImagePreview(re))}),n()(),p(18,me,2,1,"div",16),n()(),a(19,"div",17)(20,"div",18)(21,"div",19)(22,"label"),o(23,"Type d'\xE9v\xEAnement"),n(),a(24,"p-select",20),p(25,ce,3,3,"ng-template",null,0,A),n(),p(27,ue,2,0,"small",16),n()(),a(28,"div",21)(29,"div",22)(30,"label"),o(31,"Date d\xE9but"),n(),d(32,"p-datepicker",23),p(33,he,2,0,"small",16),n(),a(34,"div",22)(35,"label"),o(36,"Date fin"),n(),d(37,"p-datepicker",24),p(38,fe,2,0,"small",16),n()(),a(39,"div",21)(40,"div",22)(41,"label"),o(42,"Ville"),n(),d(43,"input",25),p(44,ve,2,0,"small",16),n(),a(45,"div",22)(46,"label"),o(47,"Pays"),n(),d(48,"input",26),p(49,ge,2,0,"small",16),n()(),a(50,"div",21)(51,"div",22)(52,"label"),o(53,"Contiendra une vid\xE9o?"),n(),d(54,"p-toggleswitch",27),n(),a(55,"div",22)(56,"label"),o(57,"Media video"),n(),d(58,"input",28),p(59,Ee,2,0,"small",16),n()(),a(60,"div",29)(61,"div",22)(62,"label"),o(63,"Corps de l'article"),n(),d(64,"p-editor",30),p(65,ye,2,0,"small",16),n()()()(),d(66,"p-toast",31),n()}l&2&&(r(),u("topHeaderData",e.topHeaderPageData()),r(5),m(e.processState()===e.PROCESS_STATE.Create?6:-1),r(),m(e.processState()===e.PROCESS_STATE.Edit?7:-1),r(),u("formGroup",e.plannerForm),r(3),u("src",e.imageDisplay,k),r(7),m(e.formControls.coverImage.invalid&&(e.isSaveButtonClicked||e.isEditButtonClicked)?18:-1),r(6),u("options",e.PLANNER_TYPES),r(3),m(e.formControls.eventType.invalid&&(e.isSaveButtonClicked||e.isEditButtonClicked)?27:-1),r(5),u("iconDisplay","input")("showIcon",!0),r(),m(e.formControls.dateStart.invalid&&(e.isSaveButtonClicked||e.isEditButtonClicked)?33:-1),r(4),u("iconDisplay","input")("showIcon",!0),r(),m(e.formControls.dateEnd.invalid&&(e.isSaveButtonClicked||e.isEditButtonClicked)?38:-1),r(6),m(e.formControls.town.invalid&&(e.isSaveButtonClicked||e.isEditButtonClicked)?44:-1),r(5),m(e.formControls.country.invalid&&(e.isSaveButtonClicked||e.isEditButtonClicked)?49:-1),r(9),u("ngClass",e.formControls.hasVideo.value?"enabledInput":"disabledInput"),r(),m(e.formControls.videoLink.invalid&&(e.isSaveButtonClicked||e.isEditButtonClicked)?59:-1),r(5),F(T(21,le)),r(),m(e.formControls.content.invalid&&(e.isSaveButtonClicked||e.isEditButtonClicked)?65:-1))},dependencies:[L,M,z,U,j,q,H,G,O,J,$,Q,K,Z,X,ne,te,ae,ie,R,N,ee],styles:[`.planner-add-edit-containe{display:flex;flex-direction:column;min-height:100vh}.planner-add-edit-containe form{display:flex;justify-content:center}.planner-add-edit-containe form .left{display:flex;flex-direction:column;align-items:center;width:275px;margin-right:20px}.planner-add-edit-containe form .left .preview{width:100%;height:250px;border-radius:5px;overflow:hidden;background-color:#d3d3d3}.planner-add-edit-containe form .left .preview img{width:100%;height:100%;display:none;object-fit:cover;object-position:top}.planner-add-edit-containe form .left .upload{display:flex;flex-direction:column;align-items:flex-start;width:100%;margin-top:15px}.planner-add-edit-containe form .left .upload .input{display:flex;flex-direction:column;width:100%}.planner-add-edit-containe form .left .upload .input input{display:none}.planner-add-edit-containe form .left .upload .input label{width:100%;height:50px;padding:5px 10px;background-color:#fff;color:var(--project-primary-color);border-radius:5px;cursor:pointer;border:solid var(--project-primary-color);display:flex;align-items:center;justify-content:center}.planner-add-edit-containe form .left .upload .input label:hover{transition:all .3 ease-in-out;background-color:var(--project-primary-color);color:#fff}.planner-add-edit-containe form .left .upload .input label i{margin-right:7px}.planner-add-edit-containe form .left .upload small{margin-top:10px}.planner-add-edit-containe form .right{display:flex;justify-content:center;flex-direction:column;width:700px;border-radius:7px;background-color:#fff;padding:60px;box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}.planner-add-edit-containe form .right .row-one-top{display:flex;gap:1rem}.planner-add-edit-containe form .right .row-one-top .select-type{flex:1;display:flex;flex-direction:column;width:100%;margin-bottom:20px}.planner-add-edit-containe form .right .row-one-top .select-type label{margin-bottom:7px}.planner-add-edit-containe form .right .row-one-top .select-type small{margin:10px 0 0}.planner-add-edit-containe form .right .row-one-top .date-bloc{width:150px;flex-shrink:0;display:flex;flex-direction:column;margin-bottom:20px}.planner-add-edit-containe form .right .row-one-top .date-bloc label{margin-bottom:7px}.planner-add-edit-containe form .right .row-one-top .date-bloc small{margin:10px 0 0}.planner-add-edit-containe form .right .row-one{width:100%}.planner-add-edit-containe form .right .row-two{display:flex;gap:1rem}.planner-add-edit-containe form .right .field{display:flex;flex-direction:column;width:100%;margin-bottom:20px;flex:1}.planner-add-edit-containe form .right .field label{margin-bottom:7px}.planner-add-edit-containe form .right .field small{margin:10px 0 0}.planner-add-edit-containe form .right .field .disabledInput{background-color:#d3d3d3}.planner-add-edit-containe form .right .field .enabledInput{background-color:transparent}.planner-add-edit-containe form .right .field .p-button{color:#fff;background:var(--project-primary-color);border:1px solid var(--project-primary-color)}.planner-add-edit-containe form .right .field .p-select,.planner-add-edit-containe form .right .field .p-select span,.planner-add-edit-containe form .right .field .p-datepicker{width:100%}
`],encapsulation:2})}}return i})();export{$e as PlannerAddEditContainerComponent};
