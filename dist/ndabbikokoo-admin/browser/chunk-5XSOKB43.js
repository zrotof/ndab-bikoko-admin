import{c as K,d as Q,g as U,h as W}from"./chunk-EYXR3HUR.js";import{a as Y,d as q}from"./chunk-SNFI66SJ.js";import{a as X}from"./chunk-IZ46LJIQ.js";import"./chunk-U2DIKO2V.js";import{d as G}from"./chunk-EQBWRM3H.js";import"./chunk-JUHVJHN3.js";import{a as J}from"./chunk-XYTUDMC5.js";import"./chunk-U47Z3OXB.js";import{Pa as R,Qa as N,g as F,h as j,na as z,oa as L,sa as w,wa as O}from"./chunk-IY7SHYKA.js";import"./chunk-H25HSPWU.js";import{$a as d,Cc as $,Dc as B,Gb as k,Hb as l,Jb as T,Kb as I,La as p,Mc as H,Ob as A,Pb as y,S as g,Va as P,Yb as v,Z as f,Zb as V,_ as C,_b as b,gb as m,ia as h,ja as M,jb as D,lb as E,pb as r,qb as a,rb as _,vb as S,xb as u,yb as c}from"./chunk-LNFGSNGS.js";import"./chunk-DAQOROHW.js";function te(e,o){e&1&&(r(0,"tr")(1,"th"),l(2," Image "),a(),r(3,"th"),l(4,"Type d'\xE9v\xEAnement"),a(),r(5,"th"),l(6,"lieux"),a(),r(7,"th"),l(8,"Date D\xE9but"),a(),r(9,"th"),l(10,"Date Fin"),a(),r(11,"th",5),l(12,"Actions"),a()())}function ne(e,o){if(e&1&&_(0,"img",7),e&2){let t=c().$implicit;m("ngSrc",t.coverImage)}}function ie(e,o){e&1&&l(0," / ")}function re(e,o){e&1&&l(0," Assembl\xE9e g\xE9n\xE9rale ")}function ae(e,o){e&1&&l(0," Installation de canton ")}function le(e,o){e&1&&l(0," S\xE9minaire ")}function oe(e,o){e&1&&l(0," Anniversaire ")}function pe(e,o){e&1&&l(0," Soir\xE9e Ndab Dynamo ")}function se(e,o){if(e&1){let t=S();r(0,"div",11)(1,"i",12),u("click",function(){f(t);let i=c().$implicit,s=c(2);return C(s.editPlanner(i.id))}),a(),r(2,"i",13),u("click",function(){f(t);let i=c().$implicit,s=c(2);return C(s.deletePlanner(i.id))}),a()()}}function me(e,o){if(e&1){let t=S();r(0,"tr")(1,"td",6),d(2,ne,1,1,"img",7)(3,ie,1,0),a(),r(4,"td"),d(5,re,1,0)(6,ae,1,0)(7,le,1,0)(8,oe,1,0)(9,pe,1,0),a(),r(10,"td"),l(11),a(),r(12,"td"),l(13),v(14,"date"),a(),r(15,"td"),l(16),v(17,"date"),a(),r(18,"td",8)(19,"i",9),u("click",function(i){f(t);let s=k(21);return C(s.toggle(i))}),a(),r(20,"p-overlayPanel",null,0),d(22,se,3,0,"ng-template",10),a()()()}if(e&2){let t,n=o.$implicit;p(2),E(n.coverImage?2:3),p(3),E((t=n.type)==="AG"?5:t==="IC"?6:t==="SEMINAR"?7:t==="BIRTHDAY"?8:t==="DYNAMO"?9:-1),p(6),I(" ",n.town," ( ",n.country," ) "),p(2),T(" ",b(14,6,n.dateStart,"d MMMM y","","fr")," "),p(3),T(" ",b(17,11,n.dateEnd,"d MMMM y","","fr")," ")}}function ce(e,o){if(e&1&&(r(0,"p-table",2),d(1,te,13,0,"ng-template",3)(2,me,23,16,"ng-template",4),a()),e&2){let t=c();m("value",t.planners())}}function de(e,o){e&1&&(r(0,"p"),l(1,"Aucun \xE9v\xEAnement n'a encore \xE9t\xE9 cr\xE9\xE9 pour le moment."),a())}var Z=(()=>{class e{constructor(){this.planners=M(),this.editPlannerEventTrigger=h(),this.deletePlannerEventTrigger=h()}editPlanner(t){this.editPlannerEventTrigger.emit(t)}deletePlanner(t){this.deletePlannerEventTrigger.emit(t)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=P({type:e,selectors:[["app-planner-list"]],inputs:{planners:[1,"planners"]},outputs:{editPlannerEventTrigger:"editPlannerEventTrigger",deletePlannerEventTrigger:"deletePlannerEventTrigger"},decls:3,vars:1,consts:[["op",""],[1,"planner-list"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"table-actions-column-header"],[1,"table-image"],["width","40","height","40",3,"ngSrc"],[1,"table-actions-header"],[1,"pi","pi-ellipsis-v",3,"click"],["pTemplate",""],[1,"table-actions-overlay-panel"],[1,"pi","pi-pencil",3,"click"],[1,"pi","pi-trash",3,"click"]],template:function(n,i){if(n&1&&(r(0,"div",1),d(1,ce,3,1,"p-table",2)(2,de,2,0,"p"),a()),n&2){let s;p(),E(((s=i.planners())==null?null:s.length)>0?1:2)}},dependencies:[H,B,q,Y,O,G,Q,K],styles:[`.planner-list p{padding:1rem;background-color:var(--project-white-primary-color);color:var(--project-black-primary-color)}
`],encapsulation:2})}}return e})();var _e=()=>({width:"50vw"}),ue=()=>({"960px":"75vw","640px":"100vw"}),je=(()=>{class e{constructor(){this.plannerService=g(X),this.router=g(F),this.messageService=g(w),this.confirmationService=g(L),this.topHeaderPageData={title:"\xC9v\xEAnement",description:"Gestion des \xE9v\xE8nements"},this.planners$=this.plannerService.getPlannerList()}editPlanner(t){let n=t;this.plannerService.getPlannerById(n).subscribe({next:i=>{i.status==="success"?this.router.navigate([`/evenements/modifier/${n}`],{queryParamsHandling:"preserve"}):this.messageService.add({severity:"warn",detail:i.message})},error:i=>{this.messageService.add({severity:"error",detail:"Erreur, contactez webmaster"})}})}deletePlanner(t){let n=t;this.confirmationService.confirm({message:"Voulez-vous vraiment supprimer cet \xE9v\xEAnement?",rejectButtonProps:{label:"Annuler",icon:"pi pi-times",outlined:!0,size:"small"},acceptButtonProps:{label:"Supprimer",icon:"pi pi-trash",size:"small"},accept:()=>{this.plannerService.deletePlanner(n).subscribe({next:i=>{i.status==="success"?(this.planners$=this.plannerService.getPlannerList(),this.messageService.add({severity:"success",detail:i.message})):this.messageService.add({severity:"error",detail:i.message})},error:i=>{this.messageService.add({severity:"error",detail:"Erreur syst\xE8me: faire appel au webmaster"})}})},reject:i=>{switch(i){case z.REJECT:this.messageService.add({severity:"info",detail:"Suppression annul\xE9e"});break}}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=P({type:e,selectors:[["app-planner-list-container"]],features:[A([w,L])],decls:10,vars:9,consts:[[1,"planner-container","pages"],[3,"topHeaderData"],[1,"actions-bar"],["type","button","routerLink","/evenements/creer",1,"add"],[1,"pi","pi-plus"],[3,"deletePlannerEventTrigger","editPlannerEventTrigger","planners"],["styleClass","confirm-delete-dialog","header","Confirmation de suppression",3,"breakpoints"],["position","top-right"]],template:function(n,i){n&1&&(r(0,"div",0),_(1,"app-page-top-header",1),r(2,"div",2)(3,"button",3),_(4,"i",4),l(5," Cr\xE9er \xE9v\xE8nement "),a()(),r(6,"app-planner-list",5),v(7,"async"),u("deletePlannerEventTrigger",function(x){return i.deletePlanner(x)})("editPlannerEventTrigger",function(x){return i.editPlanner(x)}),a()(),_(8,"p-confirmDialog",6)(9,"p-toast",7)),n&2&&(p(),m("topHeaderData",i.topHeaderPageData),p(5),m("planners",V(7,5,i.planners$)),p(2),D(y(7,_e)),m("breakpoints",y(8,ue)))},dependencies:[$,j,J,Z,W,U,N,R],encapsulation:2})}}return e})();export{je as PlannerListContainerComponent};
